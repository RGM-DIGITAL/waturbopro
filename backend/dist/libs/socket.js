'use strict';
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x136b + -0xb * -0x169 + 0x15 * -0x1a5);
        let h = e[f];
        return h;
    }, b(c, d);
}
const x = b, y = b;
(function (c, d) {
    const v = b, w = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(v(0xd2)) / (0x1 * -0x14e9 + -0x13f0 + -0x1 * -0x28da) * (-parseInt(w(0x6e)) / (0xcbf + 0x53 * -0x31 + 0x326 * 0x1)) + parseInt(v(0x73)) / (-0x1 * -0xa85 + 0x1b25 * -0x1 + -0x1 * -0x10a3) * (-parseInt(w(0x80)) / (-0x1 * 0x47b + -0x1c36 + 0x20b5)) + parseInt(w(0xa1)) / (0x173 * 0x5 + 0x9 * -0x250 + 0xd96) * (parseInt(v(0x74)) / (-0x809 + 0xa1 * 0x5 + -0x25 * -0x22)) + -parseInt(w(0xc7)) / (-0xc7f * -0x1 + 0x43 * -0x25 + -0x17 * 0x1f) + parseInt(v(0xff)) / (0x1 * -0x21ee + -0x1f74 + 0x416a) + -parseInt(v(0xa6)) / (-0x1 * 0x1fe1 + 0x1 * 0xfb0 + 0x1 * 0x103a) + -parseInt(v(0x9d)) / (0x370 + 0x3f * 0x65 + 0x1c41 * -0x1) * (-parseInt(v(0x66)) / (-0x5 * 0x3c7 + -0x1713 + 0x2a01));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0xb8f1 * 0x4 + 0x5b94b + -0x54f23));
var __importDefault = this && this[x(0xe1) + x(0xb6)] || function (c) {
    const z = x;
    return c && c[z(0xb5)] ? c : { 'default': c };
};
const o = {};
function a() {
    const V = [
        'ent\x20discon',
        'ERVER',
        'origin',
        'join',
        'hannel.',
        'default',
        'xOsso',
        'aXtli',
        'wfqJh',
        'CRBUY',
        'pingInterv',
        './decodeTo',
        'oined\x20to\x20',
        'zImWM',
        'kmJSv',
        'handshake',
        'AppError',
        'ned\x20a\x20tick',
        'Socket\x20IO\x20',
        'name',
        'connection',
        'user',
        'JjMIc',
        'adapter',
        'Client\x20joi',
        '11200mwZFSJ',
        'toString',
        'value',
        'at/Chat',
        '175430hJXJoS',
        'email',
        'KQxyu',
        'SERNAME',
        'oined\x20noti',
        '921501qmIhBs',
        ':userVerif',
        'findByPk',
        'fication\x20c',
        'info',
        'cors',
        'NOfkr',
        'User',
        'warn',
        'oaAkV',
        'nected\x20in\x20',
        'VGFfH',
        'pingTimeou',
        'fKYcV',
        'tion\x20error',
        '__esModule',
        'fault',
        'Ehwtm',
        'register',
        'socket.io-',
        'vZlqA',
        'tenantId',
        'kenSocket',
        'ASSWORD',
        'et\x20channel',
        'tenant',
        'UIwsA',
        'getIO',
        'A\x20client\x20j',
        'hannel\x20',
        'WAksQ',
        'defineProp',
        'IknkE',
        '2845990Ibdilr',
        'mEGUa',
        'status',
        'HKivV',
        'lTBPB',
        'IO_REDIS_P',
        'SOCKET\x20Cli',
        'skiqa',
        'OZWWZ',
        'isValid',
        'ied',
        '1LTDxvP',
        'sUOQE',
        'rMmKs',
        'XZtdc',
        ':joinNotif',
        'emit',
        'socket.io',
        'ZqLVg',
        'authentica',
        'attributes',
        'nFFLl',
        'profile',
        'auth',
        ':updateSta',
        'erty',
        '__importDe',
        'CIFzv',
        'dkfnk',
        ':joinChatB',
        'QTwvE',
        '\x20tickets\x20c',
        'Server',
        'YNpoO',
        'id:',
        'tokenInval',
        'lastOnline',
        'ORT',
        'disconnect',
        'oKeKa',
        'lized',
        'ScOVB',
        'NXxSA',
        ':notificat',
        'IO_REDIS_U',
        '../models/',
        'YtFeP',
        'env',
        'Client\x20con',
        './socketCh',
        'ogger',
        'tusUser',
        ':joinTicke',
        'id:\x20',
        'CJuZw',
        'IclzV',
        '1510344QpDbNS',
        'uonwi',
        '../errors/',
        'redis',
        '6853hUwgVM',
        'initIO',
        'JwEkU',
        'HOfct',
        'logger',
        'MhTRH',
        '../utils/l',
        'mjHcL',
        '624802kytwMN',
        'ication',
        'isOnline',
        'ThqUc',
        'agQLz',
        '123NqZDJf',
        '30yYryOx',
        'use',
        'userId',
        'nected\x20,\x20',
        'update',
        'qayKv',
        'not\x20initia',
        'ion',
        'iQDFo',
        'message',
        'data',
        'token',
        '2348BGRyLQ',
        'IO_REDIS_S',
        'tUupd',
        'lastLogin'
    ];
    a = function () {
        return V;
    };
    return a();
}
o[y(0x9f)] = !![], Object[x(0xc5) + y(0xe0)](exports, y(0xb5), o), exports[y(0xc1)] = exports[y(0x67)] = void (-0x21a9 + -0x2527 * -0x1 + -0x2 * 0x1bf);
const socket_io_1 = require(y(0xd8)), socket_io_redis_1 = __importDefault(require(x(0xb9) + x(0x65))), AppError_1 = __importDefault(require(x(0x101) + x(0x94))), decodeTokenSocket_1 = __importDefault(require(y(0x8f) + y(0xbc))), logger_1 = require(x(0x6c) + y(0xf9)), User_1 = __importDefault(require(x(0xf4) + y(0xad))), Chat_1 = __importDefault(require(x(0xf8) + x(0xa0)));
let io;
const initIO = e => {
    const A = y, B = x, f = {
            'lTBPB': function (k, l) {
                return k(l);
            },
            'YtFeP': A(0xda) + A(0xb4),
            'OZWWZ': function (k, l) {
                return k(l);
            },
            'rMmKs': A(0xbb),
            'xOsso': B(0x97),
            'qayKv': A(0xa2),
            'dkfnk': A(0xdd),
            'ZqLVg': B(0xc9),
            'IclzV': B(0x83),
            'IknkE': B(0xeb),
            'JwEkU': function (k) {
                return k();
            },
            'fKYcV': function (k, l) {
                return k !== l;
            },
            'XZtdc': B(0x8b),
            'zImWM': A(0xb7),
            'WAksQ': A(0x6b),
            'ThqUc': A(0x96) + B(0x7a) + B(0xef),
            'KQxyu': B(0x100),
            'VGFfH': B(0xfd),
            'mjHcL': function (k, l) {
                return k === l;
            },
            'kmJSv': B(0xf0),
            'UIwsA': A(0xba),
            'NOfkr': A(0xe8),
            'CRBUY': A(0xf7) + B(0xb0) + A(0xbf),
            'sUOQE': B(0xed),
            'nFFLl': A(0x98)
        }, g = {};
    g[A(0x86)] = '*';
    const h = {};
    h[B(0xab)] = g, h[A(0xb2) + 't'] = 0x2bf20, h[A(0x8e) + 'al'] = 0xea60, io = new socket_io_1[(B(0xe7))](e, h);
    const i = {
            'host': process[A(0xf6)][B(0x81) + B(0x85)],
            'port': f[A(0xcf)](Number, process[A(0xf6)][A(0xcc) + B(0xec)]),
            'username': process[B(0xf6)][B(0xf3) + B(0xa4)],
            'password': process[B(0xf6)][B(0xcc) + A(0xbd)]
        }, j = socket_io_redis_1[A(0x89)];
    return io[B(0x9b)](f[B(0xcb)](j, i)), io[B(0x75)](async (k, l) => {
        const D = B, E = A, m = {
                'JjMIc': function (n, p) {
                    const C = b;
                    return f[C(0xcb)](n, p);
                },
                'CIFzv': f[D(0xf5)]
            };
        try {
            const n = k?.[D(0x93)]?.[D(0xde)]?.[E(0x7f)], p = (0x2132 + -0x17b * 0x15 + -0x21b * 0x1, decodeTokenSocket_1[D(0x89)])(n);
            if (p[E(0xd0)]) {
                const q = k?.[D(0x93)]?.[D(0xde)];
                k[D(0x93)][E(0xde)] = {
                    ...q,
                    ...p[E(0x7e)],
                    'id': f[D(0xcb)](String, p[E(0x7e)]['id']),
                    'tenantId': f[D(0xcf)](String, p[E(0x7e)][E(0xbb)])
                };
                const r = {};
                r[E(0xdb)] = [
                    'id',
                    f[E(0xd4)],
                    f[D(0x8a)],
                    f[E(0x79)],
                    f[E(0xe3)],
                    f[D(0xd9)],
                    f[E(0xfe)],
                    f[E(0xc6)]
                ];
                const s = await User_1[E(0x89)][E(0xa8)](p[E(0x7e)]['id'], r);
                k[E(0x93)][D(0xde)][D(0x99)] = s, f[D(0x68)](l);
            }
            f[D(0xcb)](l, new Error(f[E(0xf5)]));
        } catch (t) {
            f[E(0xb3)](f[D(0xd5)], f[E(0xd5)]) ? (i[D(0x6a)][D(0xae)](D(0xea) + E(0xfc) + j), k[D(0xd7)](D(0xea) + E(0xe9) + l['id']), m[D(0x9a)](m, new n(m[D(0xe2)]))) : (logger_1[D(0x6a)][D(0xae)](D(0xea) + E(0xfc) + k), k[D(0xd7)](D(0xea) + E(0xe9) + k['id']), f[D(0xcb)](l, new Error(f[E(0xf5)])));
        }
    }), io['on'](f[A(0xdc)], k => {
        const G = A, H = B, l = {
                'HKivV': function (m, n) {
                    const F = b;
                    return f[F(0xb3)](m, n);
                },
                'oKeKa': f[G(0xa3)],
                'HOfct': f[H(0xb1)],
                'skiqa': function (m, n) {
                    const I = H;
                    return f[I(0x6d)](m, n);
                },
                'mEGUa': f[G(0x92)],
                'iQDFo': f[G(0xc0)]
            };
        if (f[G(0x6d)](f[H(0xac)], f[H(0xac)])) {
            const {tenantId: m} = k[G(0x93)][G(0xde)];
            if (m) {
                const n = {};
                n[G(0x7d)] = f[G(0x8d)], n[H(0x7e)] = k[H(0x93)][H(0xde)], logger_1[H(0x6a)][H(0xaa)](n), k[H(0x87)](m[H(0x9e)]()), k['on'](m + (G(0xa7) + G(0xd1)), async p => {
                    const J = H, K = H, q = await User_1[J(0x89)][J(0xa8)](p[J(0x76)]), r = {};
                    r[J(0x70)] = !![], await q[J(0x78)](r), k[K(0xd7)](p[J(0xbb)] + (J(0xdf) + K(0xfa)), q);
                }), k['on'](m + (G(0xe4) + 'ox'), p => {
                    const L = G, M = H;
                    if (l[L(0xca)](l[L(0xee)], l[M(0x69)]))
                        logger_1[L(0x6a)][M(0xaa)](L(0x9c) + L(0x95) + L(0xbe) + '\x20' + m + ':' + p), k[M(0x87)](m + ':' + p);
                    else {
                        const r = {};
                        return r[M(0x89)] = j, g && h[L(0xb5)] ? i : r;
                    }
                }), k['on'](m + (H(0xd6) + H(0x6f)), () => {
                    const N = G, O = G;
                    f[N(0xb3)](f[N(0x91)], f[O(0xc4)]) ? (logger_1[O(0x6a)][N(0xaa)](N(0xc2) + O(0xa5) + N(0xa9) + O(0xc3) + m + (O(0xf2) + O(0x7b))), k[N(0x87)](m + (N(0xf2) + N(0x7b)))) : (i[N(0x6a)][N(0xaa)](N(0xc2) + N(0x90) + j + ':' + k + (N(0xe6) + O(0x88))), l[O(0x87)](m + ':' + n));
                }), k['on'](m + (H(0xfb) + 'ts'), p => {
                    const P = G, Q = G;
                    l[P(0xce)](l[P(0xc8)], l[Q(0x7c)]) ? (g[P(0x6a)][Q(0xaa)](Q(0xc2) + Q(0xa5) + Q(0xa9) + P(0xc3) + h + (Q(0xf2) + P(0x7b))), i[Q(0x87)](j + (Q(0xf2) + P(0x7b)))) : (logger_1[Q(0x6a)][Q(0xaa)](Q(0xc2) + P(0x90) + m + ':' + p + (Q(0xe6) + P(0x88))), k[P(0x87)](m + ':' + p));
                }), Chat_1[H(0x89)][H(0xb8)](k);
            }
            k['on'](f[H(0xd3)], p => {
                const R = H, S = H, q = {};
                q[R(0x7d)] = R(0xcd) + S(0x84) + R(0x77) + m + ',\x20' + p, logger_1[R(0x6a)][S(0xaa)](q);
            });
        } else {
            if (!f)
                throw new i[(H(0x89))](f[H(0x71)]);
            return h;
        }
    }), io;
};
exports[y(0x67)] = initIO;
const getIO = () => {
    const T = y, U = x, d = {};
    d[T(0xaf)] = function (f, g) {
        return f === g;
    }, d[T(0x72)] = U(0x8c), d[T(0xe5)] = T(0x82), d[T(0xf1)] = T(0x96) + U(0x7a) + U(0xef);
    const e = d;
    if (!io) {
        if (e[U(0xaf)](e[U(0x72)], e[U(0xe5)]))
            i[T(0x6a)][U(0xaa)](U(0x9c) + U(0x95) + T(0xbe) + '\x20' + j + ':' + k), l[T(0x87)](m + ':' + n);
        else
            throw new AppError_1[(T(0x89))](e[T(0xf1)]);
    }
    return io;
};
exports[y(0xc1)] = getIO;