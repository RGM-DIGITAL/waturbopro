'use strict';
const a8 = b, a9 = b;
(function (c, d) {
    const a6 = b, a7 = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(a6(0xbc)) / (-0x14ee + 0xeb9 + 0x636) * (parseInt(a7(0xc9)) / (0x12a2 + 0xa6f * 0x1 + -0x2b * 0xad)) + parseInt(a7(0x14c)) / (-0x3 * -0x899 + -0x1495 + -0x533) + -parseInt(a7(0x1a9)) / (0xd90 + 0xb7a * 0x1 + -0x1 * 0x1906) * (parseInt(a7(0xf0)) / (0x1ffa + 0x124e + -0x3243)) + -parseInt(a6(0x161)) / (-0x20cf + -0x1 * 0xf53 + 0x3028) * (parseInt(a6(0x189)) / (-0xdf * -0x2 + 0x1e51 + 0x401 * -0x8)) + parseInt(a7(0x16f)) / (-0x135d + 0xe56 + 0x50f) * (parseInt(a6(0x102)) / (0x1 * -0x103f + 0xf50 + 0xf8)) + -parseInt(a7(0xe9)) / (0x81c + -0x11 * 0xe1 + 0x6df) + parseInt(a6(0x11b)) / (0x22db * 0x1 + 0x2fb + -0x25cb) * (parseInt(a6(0xdf)) / (0x13af * -0x1 + -0x1e0f + 0x31ca));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x4 * -0x22252 + -0xf686e + 0x113e7f));
var __importDefault = this && this[a8(0x116) + a9(0xd8)] || function (c) {
    const aa = a8;
    return c && c[aa(0x146)] ? c : { 'default': c };
};
const a4 = {};
function a() {
    const bt = [
        'WyvzP',
        'dAftL',
        'joinChatSe',
        '__esModule',
        'toUser',
        'IcBqS',
        'lAKqy',
        'JOZPc',
        'sendToAllC',
        '3590166dCjBnk',
        'teOnlineBu',
        'NVvBK',
        'flUSI',
        'mdOIL',
        'onDisconne',
        'attributes',
        'qDqzt',
        'ulxmI',
        'default',
        'joinSucces',
        'lvRmW',
        'sendToUser',
        'pbIgZ',
        'tWindows',
        'oWQHg',
        'RMTJP',
        'KjwDr',
        'updateOnli',
        'emit',
        'Zakor',
        '595578kHZrYn',
        ':chat:upda',
        'length',
        'DcaMG',
        'DLMZL',
        'client\x20ter',
        'sortByKeys',
        'ZdqDI',
        'BVsyN',
        'idXrX',
        'ers',
        'EKvHc',
        'XVgyA',
        'sfully',
        '417544ntwGCS',
        'mLJXz',
        'isAdmin',
        'wHYAg',
        'jWbyj',
        'fromUser',
        'onUpdateUs',
        'debug',
        'jrJau',
        'findByPk',
        'age',
        'YiPJF',
        ':joinSucce',
        'Mjrvj',
        'iVylW',
        'saveChatWi',
        'findKey',
        'riDGB',
        'ePgmr',
        'bGHTk',
        'ucKnQ',
        'lNxiH',
        'username',
        'DwHRg',
        'sortedUser',
        'sortBy',
        '14pgEqZA',
        'usersOnlin',
        'minated',
        'fromPairs',
        'cpJCi',
        'onSetUserA',
        'AIVLj',
        'PwTSR',
        'SujgO',
        'OryYV',
        'LJlQf',
        'ients',
        'OYUIv',
        'erty',
        '3|0|4|1|2',
        'XfAJI',
        'Hgsut',
        'HNxUu',
        'sockets',
        's/logger',
        'zozwf',
        'FtsZZ',
        'IbiYP',
        'KRJCf',
        'socketData',
        'owPQQ',
        'AEDso',
        'dKRFg',
        'SKgWj',
        'dXJUv',
        'YWvsx',
        'tive',
        '1107620qpNyVa',
        'value',
        'kxNwq',
        'jxTor',
        'onSetUserI',
        'fSuDq',
        'profile',
        'events',
        ':setUserAc',
        'oCtWq',
        'gXGpN',
        'IRsaO',
        'auth',
        'yuiyh',
        'ZlucN',
        'without',
        'NrqJk',
        'OYDJh',
        'toPairs',
        'TWmpo',
        'ATKQT',
        'Rtmmh',
        'KDPrM',
        'XEEVf',
        'mWHQb',
        'shared',
        'HBwpV',
        'defineProp',
        'QONNQ',
        '../../mode',
        'find',
        '5|4|0|10',
        'getOpenCha',
        'LETjO',
        'fUHUJ',
        'rKGLd',
        '941KfAYYy',
        'awCSq',
        'PQAHS',
        'CRjkC',
        'register',
        'HPcaJ',
        'KiFqP',
        'disconnect',
        'CPWNj',
        'cVqag',
        'oWcRI',
        'neBubbles',
        'tnnmQ',
        '676ZdbgWq',
        'dWTDf',
        'forEach',
        'RFKyL',
        'DMjms',
        ':setUserId',
        'lodash',
        'uPCsG',
        'ntvxN',
        'bbles',
        'MlYZt',
        'chatMessag',
        'tLnUy',
        'bCCHB',
        'bkrxn',
        'fault',
        './Index',
        'Typing',
        'rduEF',
        'tenantId',
        'Iywpd',
        'role',
        '372156cfHzLR',
        'eventLoop',
        '11|1|8|12|',
        'onnectedCl',
        'dsDIU',
        'RxRxe',
        'push',
        'chatTyping',
        'transport\x20',
        'xohuc',
        '10471900vYXXsB',
        'fnqwI',
        '):\x20',
        'log',
        'gNKOL',
        'IGMnn',
        'ssfully',
        '5EbPnJd',
        'AizGB',
        'Moqxq',
        'isAgent',
        'ScXkP',
        'oZNff',
        'HuVzS',
        'user',
        'shbpu',
        'csFaE',
        'email',
        'FROM',
        'pygWj',
        'ping',
        'AtFBD',
        'logger',
        'cbFQU',
        'idleUsers',
        '9OwtsqP',
        'sendToSelf',
        'ZZVeQ',
        'handshake',
        'qsfDn',
        './Utils',
        'name',
        'qMVWh',
        'YRqkI',
        'YxnKB',
        '6|7|3|2|9|',
        'updateUser',
        'jHMzI',
        'onChatMess',
        'ndow',
        'gHuvj',
        'lMnaq',
        '4|1|3|2|0',
        'sortedIdle',
        'nnected\x20(',
        '__importDe',
        'vSXhg',
        'List',
        'isNull',
        'dle',
        '451EyHMkw',
        'tpivK',
        'User\x20disco',
        'onChatStop',
        'ULQIn',
        'UEumR',
        'WWKlK',
        'cNzjp',
        'jCUHH',
        'spawnChatW',
        'size',
        'chatStopTy',
        'ls/User',
        'uAiQn',
        'lWJez',
        'cWLDJ',
        'buReD',
        'rver\x20USER\x20',
        'update',
        '../../util',
        'offline',
        'onChatTypi',
        'vJHzp',
        '\x20-\x20',
        'info',
        'SSTOt',
        'dWJjm',
        'FmcWN',
        'iTOUK',
        'ObugE',
        'indow',
        '4|0|1|2|3',
        'TXjKG',
        'type',
        'split',
        'error',
        'QQerJ',
        'OZHGG',
        'ICYGP',
        'ctive'
    ];
    a = function () {
        return bt;
    };
    return a();
}
a4[a9(0x1aa)] = !![], Object[a8(0xb3) + a9(0x196)](exports, a9(0x146), a4);
const lodash_1 = require(a9(0xcf)), Utils_1 = require(a9(0x107)), Index_1 = require(a9(0xd9)), User_1 = __importDefault(require(a8(0xb5) + a9(0x127))), logger_1 = require(a9(0x12e) + a8(0x19c)), events = {}, JoinChatServer = e => {
        const ab = a9, ac = a8, f = {};
        f[ab(0x1a7)] = ab(0x156) + ab(0x16e), f[ac(0xbe)] = ac(0x197);
        const g = f, {user: h} = e[ac(0x105)][ab(0x1b5)];
        logger_1[ab(0xff)][ac(0x133)](ac(0x145) + ac(0x12c) + h[ac(0x108)]);
        const {tenantId: i} = h, j = ac(0x1a1) + '_' + i;
        let k;
        k = Index_1[ac(0xb1)][j];
        k && (k[ab(0x18a) + 'e'][h['id']] = {
            'sockets': [e['id']],
            'user': h
        }, k[ab(0x19b)][ac(0xe5)](e), (-0x5b6 + 0x383 * -0xb + 0x2c57, Utils_1[ac(0x103)])(e, g[ac(0x1a7)]));
        if (!k) {
            const l = g[ac(0xbe)][ac(0x13d)]('|');
            let m = 0x2 * 0x97a + -0x1bf4 + 0x900;
            while (!![]) {
                switch (l[m++]) {
                case '0':
                    k = Index_1[ab(0xb1)][j];
                    continue;
                case '1':
                    k[ab(0x19b)][ab(0xe5)](e);
                    continue;
                case '2':
                    (-0x1567 + -0xabf + 0x2026, Utils_1[ab(0x103)])(e, h[ac(0xdc)] + (ac(0x17b) + ab(0xef)));
                    continue;
                case '3':
                    const n = {};
                    n[ac(0x19b)] = [], n[ac(0x18a) + 'e'] = {}, n[ab(0x101)] = {}, Index_1[ab(0xb1)][j] = n;
                    continue;
                case '4':
                    k[ab(0x18a) + 'e'][h['id']] = {
                        'sockets': [e['id']],
                        'user': h
                    };
                    continue;
                }
                break;
            }
        }
    }, UpdateUsers = d => {
        const ad = a9, ae = a8, e = {};
        e[ad(0x11c)] = function (k, l) {
            return k === l;
        }, e[ae(0xa9)] = ae(0x10d) + 's', e[ae(0x19e)] = function (k, l) {
            return k > l;
        }, e[ad(0xbd)] = ae(0x19d);
        const f = e, {user: g} = d[ae(0x105)][ae(0x1b5)], h = ad(0x1a1) + '_' + g[ae(0xdc)], i = Index_1[ad(0xb1)][h], j = (-0xd0d + 0x4f6 + 0x817, Utils_1[ae(0x167)])(i[ad(0x18a) + 'e']);
        (-0x25ff + 0x85 * -0x2 + 0x2709, lodash_1[ae(0xcb)])(j, k => {
            const af = ad, ag = ad, l = k[af(0xf7)], {sockets: m} = k;
            l && f[af(0x19e)](m[ag(0x163)], -0x517 * -0x5 + 0x4b0 * 0x3 + 0x55 * -0x77) && (f[af(0x11c)](f[ag(0xbd)], f[af(0xbd)]) ? (-0x430 + -0x27 * 0xf5 + -0x1 * -0x2983, lodash_1[ag(0xcb)])(m, n => {
                const ai = ag, aj = af, o = {
                        'IGMnn': function (q, r) {
                            const ah = b;
                            return f[ah(0x11c)](q, r);
                        }
                    }, p = (-0x1fcf + -0x1 * -0x218d + -0x1be, lodash_1[ai(0xb6)])(i[ai(0x19b)], q => {
                        const ak = ai;
                        return o[ak(0xee)](q['id'], n);
                    });
                p && ((l[ai(0xde)][aj(0x171)] || l[aj(0xde)][ai(0xf3)]) && p[ai(0x15f)](f[ai(0xa9)], j));
            }) : e[af(0x15f)](f[ag(0xa9)], f));
        });
    }, UpdateOnlineBubbles = d => {
        const al = a9, am = a9, e = {
                'yuiyh': function (l, m) {
                    return l === m;
                },
                'lvRmW': al(0xcd),
                'dsDIU': am(0xb8) + am(0x15a),
                'jWbyj': function (l, m) {
                    return l(m);
                },
                'BVsyN': function (l, m) {
                    return l !== m;
                },
                'TWmpo': al(0x195)
            }, {user: f} = d[al(0x105)][al(0x1b5)], g = al(0x1a1) + '_' + f[al(0xdc)], h = Index_1[am(0xb1)][g], i = (0x1c87 + -0xf9 * -0xb + -0x273a, lodash_1[al(0x18c)])((0x2 * 0x1ca + -0x1 * -0x2092 + -0x2426, lodash_1[am(0x188)])((-0x45 * 0x29 + -0x3b * 0x71 + -0x1 * -0x2518, lodash_1[al(0xaa)])(h[al(0x18a) + 'e']), l => {
                const an = am, ao = am;
                if (e[an(0xa5)](e[ao(0x157)], e[an(0x157)]))
                    return l[0x460 + 0x1 * -0x1c83 + 0x25 * 0xa7];
                else {
                    const n = {};
                    n[ao(0x19b)] = [i['id']], n[ao(0xf7)] = j, g[ao(0x101)][h['id']] = n;
                }
            })), j = (0x10f2 + 0x1f * 0xa5 + 0x17 * -0x19b, lodash_1[al(0x18c)])((0x18e1 + -0x3d * -0x56 + -0x65 * 0x73, lodash_1[am(0x188)])((0x16 * 0xbd + 0x16b9 + -0x26f7, lodash_1[al(0xaa)])(h[al(0x101)]), l => {
                const aq = al, ar = al, m = {
                        'ObugE': function (n, p) {
                            const ap = b;
                            return e[ap(0x173)](n, p);
                        }
                    };
                if (e[aq(0x169)](e[ar(0xab)], e[ar(0xab)]))
                    f['on'](e[aq(0xe3)], () => {
                        const as = ar;
                        m[as(0x138)](i, j);
                    });
                else
                    return l[-0x1 * 0x10e7 + 0x7 * 0x225 + 0x1e4];
            })), k = {};
        k[am(0x187) + am(0x118)] = i, k[al(0x114) + am(0x118)] = j, (-0x1011 + -0x46b + 0x147c, Utils_1[am(0x14b) + am(0xe2) + am(0x194)])(d, f[al(0xdc)] + (al(0x162) + am(0x14d) + al(0xd2)), k);
    }, SpawnOpenChatWindows = d => {
        const at = a8, au = a9, e = {};
        e[at(0x164)] = at(0x124) + at(0x139);
        const f = e, {user: g} = d[au(0x105)][at(0x1b5)], h = User_1[at(0x155)][at(0x178)](g['id']);
        (0x4 * 0x4e9 + -0x3 * -0xc0f + -0x129b * 0x3, Utils_1[au(0x103)])(d, f[au(0x164)], h);
    }, spawnChatWindow = d => {
        const av = a8, aw = a9, e = {};
        e[av(0x131)] = aw(0x108), e[aw(0x106)] = aw(0xfa), e[aw(0xf6)] = av(0x1af), e[av(0xe4)] = av(0x124) + aw(0x139);
        const f = e;
        d['on'](f[aw(0xe4)], async g => {
            const ax = av, ay = av, h = {};
            h[ax(0x152)] = [
                'id',
                f[ay(0x131)],
                f[ax(0x106)],
                f[ax(0xf6)]
            ];
            const i = await User_1[ax(0x155)][ax(0x178)](g, h);
            (0x1386 + -0x1b81 + 0x7fb, Utils_1[ax(0x103)])(d, f[ay(0xe4)], i);
        });
    }, onSetUserIdle = c => {
        const az = a8, aA = a9, d = {
                'wHYAg': az(0x10d) + 's',
                'riDGB': function (g, h) {
                    return g !== h;
                },
                'bGHTk': az(0x17c),
                'TXjKG': az(0x190),
                'shbpu': az(0xcc),
                'KRJCf': function (g, h) {
                    return g(h);
                }
            }, {user: e} = c[aA(0x105)][az(0x1b5)], f = aA(0x1a1) + '_' + e[az(0xdc)];
        c['on'](e[aA(0xdc)] + (az(0xce) + 'le'), () => {
            const aB = az, aC = az, g = {};
            g[aB(0xae)] = d[aC(0x172)];
            const h = g;
            let i;
            i = Index_1[aC(0xb1)][f];
            i && (i[aB(0x101)][e['id']] = {
                'sockets': [c['id']],
                'user': e
            });
            if (!i) {
                if (d[aB(0x180)](d[aC(0x182)], d[aC(0x13b)])) {
                    const j = {};
                    j[aB(0x19b)] = [], j[aB(0x18a) + 'e'] = {}, j[aB(0x101)] = {}, Index_1[aC(0xb1)][f] = j, i = Index_1[aC(0xb1)][f], i[aC(0x101)][aB(0xe5)](c['id']);
                } else
                    return d[0x13a2 + 0x1 * 0xf1b + -0x22bd * 0x1];
            }
            i?.[aC(0x18a) + 'e'][e['id']] && (d[aC(0x180)](d[aB(0xf8)], d[aC(0xf8)]) ? e['on'](h[aC(0xae)], f) : delete i?.[aC(0x18a) + 'e'][e['id']]), d[aC(0x1a0)](UpdateOnlineBubbles, c);
        });
    }, onSetUserActive = c => {
        const aD = a8, aE = a9, d = {
                'XfAJI': function (g, h) {
                    return g !== h;
                },
                'jCUHH': aD(0xaf),
                'dWJjm': function (g, h) {
                    return g(h);
                }
            }, {user: e} = c[aD(0x105)][aE(0x1b5)], f = aD(0x1a1) + '_' + e[aE(0xdc)];
        c['on'](e[aE(0xdc)] + (aD(0x1b1) + aE(0x1a8)), () => {
            const aF = aE, aG = aE;
            let g = Index_1[aF(0xb1)][f];
            g?.[aF(0x101)][e['id']] && delete g?.[aF(0x101)][e['id']];
            if (!g) {
                const h = {};
                h[aF(0x19b)] = [], h[aG(0x18a) + 'e'] = {}, h[aG(0x101)] = {}, Index_1[aG(0xb1)][f] = h, g = Index_1[aG(0xb1)][f], g[aG(0x18a) + 'e'][aF(0xe5)](c['id']);
            }
            if (g?.[aF(0x18a) + 'e']) {
                if (d[aF(0x198)](d[aF(0x123)], d[aG(0x123)]))
                    return;
                else
                    g[aF(0x18a) + 'e'][e['id']] = {
                        'sockets': [c['id']],
                        'user': e
                    };
            }
            d[aF(0x135)](UpdateOnlineBubbles, c);
        });
    }, onUpdateUsers = d => {
        const aH = a9, aI = a9, e = {};
        e[aH(0x120)] = aH(0x10d) + 's';
        const f = e;
        d['on'](f[aI(0x120)], UpdateUsers);
    }, onChatMessage = c => {
        const aJ = a9, aK = a8, d = {
                'Moqxq': aJ(0x124) + aJ(0x139),
                'Hgsut': function (h, i) {
                    return h(i);
                },
                'HBwpV': function (h, i) {
                    return h !== i;
                },
                'Zakor': aK(0x10e),
                'LETjO': function (h, i) {
                    return h === i;
                },
                'fUHUJ': aK(0xd0),
                'gHuvj': aK(0x144),
                'AizGB': aK(0xfb),
                'oCtWq': function (h, i) {
                    return h !== i;
                },
                'DwHRg': aJ(0xb4),
                'JOZPc': aK(0xd4) + 'e'
            }, {user: e} = c[aK(0x105)][aJ(0x1b5)], {tenantId: f} = e, g = aJ(0x1a1) + '_' + f;
        c['on'](d[aJ(0x14a)], function (h) {
            const aM = aJ, aN = aK, i = {
                    'ZlucN': function (j, k) {
                        const aL = b;
                        return d[aL(0x199)](j, k);
                    }
                };
            if (d[aM(0xb2)](d[aM(0x160)], d[aN(0x160)]))
                i[aM(0xa6)](e, f);
            else {
                const k = Index_1[aN(0xb1)][g];
                if (k) {
                    if (d[aM(0xb9)](d[aM(0xba)], d[aN(0x111)]))
                        delete e[aM(0x18a) + 'e'][f['id']];
                    else {
                        const {to: m} = h, {from: n} = h;
                        console[aM(0xec)]('TO', m), console[aM(0xec)](d[aM(0xf1)], n);
                        const o = h[aN(0x13c)];
                        if (d[aN(0xb9)](h[aM(0x13c)], 's'))
                            h[aM(0x13c)] = 'r';
                        else {
                            if (d[aM(0x1b2)](d[aM(0x186)], d[aM(0x186)])) {
                                const {user: q} = g[aN(0x105)][aN(0x1b5)], r = h[aN(0x155)][aN(0x178)](q['id']);
                                (0x6cb * 0x1 + -0x1 * 0x16a2 + 0xfd7, i[aM(0x103)])(j, d[aM(0xf2)], r);
                            } else
                                h[aM(0x13c)] = 's';
                        }
                        (-0x11a1 + -0x4 * 0x5e1 + 0x2925, Utils_1[aM(0x158)])(k[aN(0x19b)], k[aN(0x18a) + 'e'], h[aM(0x147)][aM(0x185)], d[aM(0x14a)], h), h[aM(0x13c)] = o, (-0x71d + 0x1 * 0x12d6 + -0xbb9, Utils_1[aN(0x158)])(k[aN(0x19b)], k[aM(0x18a) + 'e'], h[aN(0x174)][aM(0x185)], d[aM(0x14a)], h);
                    }
                }
            }
        });
    }, onChatTyping = c => {
        const aO = a8, aP = a9, d = {
                'AIVLj': function (h, i) {
                    return h < i;
                },
                'SKgWj': aO(0x10c) + aP(0xe1) + aP(0xb7),
                'SSTOt': function (h, i) {
                    return h(i);
                },
                'oWQHg': function (h, i) {
                    return h === i;
                },
                'oWcRI': function (h, i) {
                    return h(i);
                },
                'RMTJP': function (h, i) {
                    return h(i);
                },
                'ulxmI': function (h, i) {
                    return h !== i;
                },
                'jrJau': aO(0x112),
                'idXrX': aO(0x140),
                'YRqkI': aP(0x1a6),
                'buReD': aO(0xe8),
                'YxnKB': function (h, i) {
                    return h === i;
                },
                'fnqwI': aO(0x1ac),
                'DLMZL': aP(0x121),
                'mLJXz': aP(0xe6)
            }, {user: e} = c[aO(0x105)][aO(0x1b5)], {tenantId: f} = e, g = aP(0x1a1) + '_' + f;
        c['on'](d[aO(0x170)], h => {
            const aR = aP, aX = aP, i = {
                    'flUSI': function (j, k) {
                        const aQ = b;
                        return d[aQ(0x18f)](j, k);
                    },
                    'gXGpN': d[aR(0x1a5)],
                    'qDqzt': function (j, k) {
                        const aS = aR;
                        return d[aS(0x134)](j, k);
                    },
                    'owPQQ': function (j, k) {
                        const aT = aR;
                        return d[aT(0x15b)](j, k);
                    },
                    'cVqag': function (j, k) {
                        const aU = aR;
                        return d[aU(0xc6)](j, k);
                    },
                    'oZNff': function (j, k) {
                        const aV = aR;
                        return d[aV(0x15c)](j, k);
                    },
                    'IcBqS': function (j, k) {
                        const aW = aR;
                        return d[aW(0x154)](j, k);
                    },
                    'fSuDq': d[aR(0x177)],
                    'YiPJF': d[aX(0x16a)]
                };
            if (d[aX(0x15b)](d[aR(0x10a)], d[aX(0x12b)])) {
                const k = l[aR(0x101)][m['id']][aR(0x19b)];
                i[aX(0x14f)]((0x2 * 0x10bf + 0xf5 + -0x2273, n[aR(0x125)])(k), -0x1 * -0x1424 + 0x379 * 0xa + -0x36dc) ? delete u[aX(0x101)][v['id']] : w[aR(0x101)][x['id']][aR(0x19b)] = (-0x3b * -0xd + -0x49f + 0xd * 0x20, y[aR(0xa7)])(k, z['id']);
            } else {
                const k = Index_1[aX(0xb1)][g];
                if (k) {
                    if (d[aX(0x10b)](d[aR(0xea)], d[aX(0x165)])) {
                        const m = {};
                        m[aX(0x19b)] = [i['id']], m[aX(0xf7)] = j, g[aX(0x18a) + 'e'][h['id']] = m;
                    } else {
                        const {to: m} = h, {from: n} = h;
                        let o = null, p = null;
                        (0x3b * -0x9d + -0xabd * -0x1 + 0x1972, lodash_1[aX(0xb6)])(k[aR(0x18a) + 'e'], function (q) {
                            const aY = aX, aZ = aX;
                            i[aY(0x1a2)](i[aY(0xc5)](String, q[aZ(0xf7)]['id']), i[aY(0x153)](String, m)) && (o = q[aY(0xf7)]);
                            if (i[aZ(0x1a2)](i[aY(0xf5)](String, q[aY(0xf7)]['id']), i[aZ(0x153)](String, n))) {
                                if (i[aZ(0x148)](i[aZ(0x1ae)], i[aZ(0x17a)]))
                                    p = q[aY(0xf7)];
                                else {
                                    const s = i[aY(0x1b3)][aY(0x13d)]('|');
                                    let t = 0xf * 0x14b + -0xb0f + 0x856 * -0x1;
                                    while (!![]) {
                                        switch (s[t++]) {
                                        case '0':
                                            X[aZ(0x151) + 'ct'](Y);
                                            continue;
                                        case '1':
                                            N[aY(0xb8) + aZ(0x15a)](O);
                                            continue;
                                        case '2':
                                            H[aZ(0x175) + aY(0x16b)](I);
                                            continue;
                                        case '3':
                                            F[aY(0x18e) + aY(0x142)](G);
                                            continue;
                                        case '4':
                                            V[aZ(0x17e) + aZ(0x110)](W);
                                            continue;
                                        case '5':
                                            T[aZ(0x11e) + aZ(0xda)](U);
                                            continue;
                                        case '6':
                                            if (!C[aY(0x105)]?.[aZ(0x1b5)]?.[aY(0xdc)])
                                                return;
                                            continue;
                                        case '7':
                                            D[aY(0x1ad) + aZ(0x11a)](E);
                                            continue;
                                        case '8':
                                            P[aY(0x10f) + aY(0x179)](Q);
                                            continue;
                                        case '9':
                                            J[aY(0x15e) + aZ(0xc7)](K);
                                            continue;
                                        case '10':
                                            Z[aZ(0x105)][aY(0x1b5)][aZ(0xf7)]['id'] && i[aY(0x153)](a2, a3);
                                            continue;
                                        case '11':
                                            L[aY(0x124) + aZ(0x139)](M);
                                            continue;
                                        case '12':
                                            R[aZ(0x130) + 'ng'](S);
                                            continue;
                                        }
                                        break;
                                    }
                                }
                            }
                        });
                        if ((-0x5 * 0x344 + -0xacb + 0x1b1f, lodash_1[aX(0x119)])(o) || (-0x1 * -0x269 + -0x2600 + 0x2397, lodash_1[aR(0x119)])(p))
                            return;
                        h[aR(0x147)] = o, h[aX(0x174)] = p, (0x2275 + -0x1 * 0x1f5d + -0x9 * 0x58, Utils_1[aX(0x158)])(k[aX(0x19b)], k[aR(0x18a) + 'e'], o[aX(0x108)], d[aR(0x170)], h);
                    }
                }
            }
        });
    }, onChatStopTyping = c => {
        const b0 = a9, b1 = a8, d = {
                'kxNwq': function (h, i) {
                    return h === i;
                },
                'pygWj': b0(0x10d) + 's',
                'cNzjp': function (h, i) {
                    return h === i;
                },
                'ntvxN': function (h, i) {
                    return h(i);
                },
                'ZdqDI': b0(0x141),
                'mWHQb': b1(0x143),
                'ATKQT': b0(0x126) + b1(0xfd)
            }, {user: e} = c[b0(0x105)][b0(0x1b5)], {tenantId: f} = e, g = b0(0x1a1) + '_' + f;
        c['on'](d[b0(0xac)], h => {
            const b4 = b0, b5 = b0, i = {
                    'mdOIL': function (k, l) {
                        const b2 = b;
                        return d[b2(0x122)](k, l);
                    },
                    'ucKnQ': function (k, l) {
                        const b3 = b;
                        return d[b3(0xd1)](k, l);
                    }
                }, j = Index_1[b4(0xb1)][g];
            if (j) {
                if (d[b5(0x1ab)](d[b4(0x168)], d[b5(0xb0)])) {
                    const l = {
                            'LJlQf': function (n, o) {
                                const b6 = b5;
                                return d[b6(0x1ab)](n, o);
                            }
                        }, m = (-0x17b * 0x3 + -0x151c + -0x198d * -0x1, i[b5(0xb6)])(j[b4(0x19b)], u => {
                            const b7 = b4;
                            return l[b7(0x193)](u['id'], o);
                        });
                    m && ((o[b4(0xde)][b4(0x171)] || p[b5(0xde)][b4(0xf3)]) && m[b5(0x15f)](d[b5(0xfc)], r));
                } else {
                    const {to: l} = h;
                    let m = null;
                    (-0x985 * -0x2 + 0x1 * -0x1b0f + 0x805, lodash_1[b5(0xb6)])(j[b4(0x18a) + 'e'], n => {
                        const b8 = b4, b9 = b5;
                        i[b8(0x150)](i[b9(0x183)](String, n[b9(0xf7)]['id']), i[b8(0x183)](String, l)) && (m = n[b8(0xf7)]);
                    });
                    if ((-0x1164 + 0xf * -0x3e + -0x45 * -0x4e, lodash_1[b4(0x119)])(m))
                        return;
                    h[b5(0x147)] = m, (0x13 * 0x1b8 + 0x5f8 + -0x26a0, Utils_1[b5(0x158)])(j[b4(0x19b)], j[b5(0x18a) + 'e'], m[b5(0x108)], d[b5(0xac)], h);
                }
            }
        });
    }, saveChatWindow = d => {
        const ba = a8, bb = a8, e = {};
        e[ba(0x100)] = ba(0x17e) + ba(0x110);
        const f = e;
        d['on'](f[bb(0x100)], async g => {
            const bc = ba, bd = bb, {userId: h} = g, {remove: i} = g, j = await User_1[bc(0x155)][bc(0x178)](h);
            if (j) {
                if (i) {
                } else {
                }
            }
        });
    }, onDisconnect = c => {
        const be = a9, bf = a8, d = {
                'Rtmmh': be(0xfb),
                'OryYV': function (e, f) {
                    return e === f;
                },
                'lAKqy': be(0xd4) + 'e',
                'ScXkP': be(0x113),
                'dKRFg': be(0x156) + be(0x16e),
                'KjwDr': be(0x13a),
                'iVylW': function (e, f) {
                    return e === f;
                },
                'rduEF': be(0xd3),
                'lWJez': function (e, f) {
                    return e < f;
                },
                'pbIgZ': function (e, f) {
                    return e !== f;
                },
                'HNxUu': be(0xbf),
                'ULQIn': function (e, f) {
                    return e === f;
                },
                'NrqJk': bf(0x19f),
                'vSXhg': be(0x191),
                'tLnUy': bf(0x18d),
                'gNKOL': be(0x12f),
                'cWLDJ': function (e, f) {
                    return e(f);
                },
                'QQerJ': function (e, f) {
                    return e === f;
                },
                'HPcaJ': be(0xe7) + bf(0x13e),
                'iTOUK': function (e, f) {
                    return e !== f;
                },
                'KiFqP': be(0x14e),
                'bCCHB': bf(0x181),
                'FmcWN': bf(0x166) + be(0x18b),
                'uAiQn': bf(0xc3)
            };
        c['on'](d[bf(0x128)], async f => {
            const bg = bf, bh = bf, g = {};
            g[bg(0x104)] = d[bg(0x1a4)], g[bg(0xdd)] = d[bh(0x15d)];
            const h = g, {user: j} = c[bg(0x105)][bh(0x1b5)], {tenantId: k} = j, l = bg(0x1a1) + '_' + k, m = Index_1[bg(0xb1)][l];
            if (m?.[bg(0x18a) + 'e']) {
                if (m[bh(0x18a) + 'e'][j['id']]) {
                    if (d[bg(0x17d)](d[bh(0xdb)], d[bh(0xdb)])) {
                        const r = m[bg(0x18a) + 'e'][j['id']][bg(0x19b)];
                        d[bg(0x129)]((0x1 * -0x10a6 + 0x2298 + -0x11f2, lodash_1[bg(0x125)])(r), 0x767 + 0x12bf + -0x1c * 0xef) ? delete m[bg(0x18a) + 'e'][j['id']] : m[bh(0x18a) + 'e'][j['id']][bh(0x19b)] = (0x261 + 0xe8a * 0x2 + -0x1f75, lodash_1[bh(0xa7)])(r, c['id']);
                    } else
                        e = f[bg(0xf7)];
                }
                const p = {};
                p['id'] = c['id'];
                const q = (-0x1a17 + -0x952 + -0x2369 * -0x1, lodash_1[bg(0x17f)])(m[bh(0x19b)], p);
                m[bg(0x19b)] = (-0xaf8 + -0x1b1 * 0xa + 0xa6 * 0x2b, lodash_1[bg(0xa7)])(m[bg(0x19b)], q);
            }
            if (m?.[bh(0x101)]) {
                if (d[bg(0x159)](d[bg(0x19a)], d[bh(0x19a)])) {
                    const {to: u} = v, {from: v} = w;
                    x[bh(0xec)]('TO', u), y[bh(0xec)](d[bg(0xad)], v);
                    const w = z[bg(0x13c)];
                    d[bg(0x192)](A[bg(0x13c)], 's') ? O[bg(0x13c)] = 'r' : P[bg(0x13c)] = 's', (0x16fe + -0x47 * 0x16 + -0x17 * 0xbc, D[bg(0x158)])(E[bh(0x19b)], F[bh(0x18a) + 'e'], G[bh(0x147)][bh(0x185)], d[bg(0x149)], H), I[bh(0x13c)] = w, (0xab + 0x1 * 0xc0e + -0xcb9, J[bh(0x158)])(K[bg(0x19b)], L[bg(0x18a) + 'e'], M[bg(0x174)][bh(0x185)], d[bh(0x149)], N);
                } else {
                    if (m[bg(0x101)][j['id']]) {
                        if (d[bh(0x11f)](d[bh(0xa8)], d[bg(0xa8)])) {
                            const w = m[bh(0x101)][j['id']][bg(0x19b)];
                            if (d[bg(0x129)]((0x532 + 0xd88 + -0x12ba, lodash_1[bg(0x125)])(w), -0x1d * 0xd + 0x89 * -0x3 + -0x4f * -0xa)) {
                                if (d[bh(0x159)](d[bg(0x117)], d[bg(0xd5)]))
                                    delete m[bh(0x101)][j['id']];
                                else {
                                    const y = d[bg(0xf4)][bh(0x13d)]('|');
                                    let z = 0x1319 + 0x553 + -0x824 * 0x3;
                                    while (!![]) {
                                        switch (y[z++]) {
                                        case '0':
                                            (-0xe90 * -0x1 + -0x1 * 0xf8b + 0xfb, B[bg(0x103)])(C, D[bh(0xdc)] + (bh(0x17b) + bg(0xef)));
                                            continue;
                                        case '1':
                                            s = t[bg(0xb1)][u];
                                            continue;
                                        case '2':
                                            z[bg(0x19b)][bh(0xe5)](A);
                                            continue;
                                        case '3':
                                            const A = {};
                                            A[bh(0x19b)] = [x['id']], A[bg(0xf7)] = y, v[bg(0x18a) + 'e'][w['id']] = A;
                                            continue;
                                        case '4':
                                            const B = {};
                                            B[bg(0x19b)] = [], B[bg(0x18a) + 'e'] = {}, B[bh(0x101)] = {}, q[bh(0xb1)][r] = B;
                                            continue;
                                        }
                                        break;
                                    }
                                }
                            } else
                                m[bh(0x101)][j['id']][bh(0x19b)] = (-0x138d + 0x2081 + -0xcf4, lodash_1[bg(0xa7)])(w, c['id']);
                        } else {
                            const {user: z} = p[bh(0x105)][bh(0x1b5)];
                            q[bh(0xff)][bg(0x133)](bg(0x145) + bg(0x12c) + z[bh(0x108)]);
                            const {tenantId: A} = z, B = bh(0x1a1) + '_' + A;
                            let C;
                            C = r[bg(0xb1)][B];
                            C && (C[bg(0x18a) + 'e'][z['id']] = {
                                'sockets': [C['id']],
                                'user': z
                            }, C[bg(0x19b)][bg(0xe5)](D), (-0x1623 * -0x1 + -0x136 * 0x16 + 0x481, E[bg(0x103)])(F, h[bg(0x104)]));
                            if (!C) {
                                const D = h[bg(0xdd)][bh(0x13d)]('|');
                                let E = -0x1eb1 + 0x145a + 0xa57;
                                while (!![]) {
                                    switch (D[E++]) {
                                    case '0':
                                        C = H[bg(0xb1)][B];
                                        continue;
                                    case '1':
                                        C[bh(0x18a) + 'e'][z['id']] = {
                                            'sockets': [I['id']],
                                            'user': z
                                        };
                                        continue;
                                    case '2':
                                        C[bg(0x19b)][bh(0xe5)](J);
                                        continue;
                                    case '3':
                                        (0x59d * 0x2 + 0x19e0 + -0x1 * 0x251a, K[bg(0x103)])(L, z[bg(0xdc)] + (bg(0x17b) + bh(0xef)));
                                        continue;
                                    case '4':
                                        const F = {};
                                        F[bh(0x19b)] = [], F[bg(0x18a) + 'e'] = {}, F[bg(0x101)] = {}, G[bg(0xb1)][B] = F;
                                        continue;
                                    }
                                    break;
                                }
                            }
                        }
                    }
                    const u = {};
                    u['id'] = c['id'];
                    const v = (0x1 * 0x1f6b + 0x2119 + 0x2 * -0x2042, lodash_1[bg(0x17f)])(m[bg(0x19b)], u);
                    m[bh(0x19b)] = (-0x1 * -0x5f4 + -0xe9f + 0x8ab, lodash_1[bg(0xa7)])(m[bh(0x19b)], v);
                }
            }
            const n = await User_1[bg(0x155)][bh(0x178)](j['id']);
            n?.[bh(0x12d)]({
                'status': d[bh(0xed)],
                'lastOnline': new Date()
            }), d[bg(0x12a)](UpdateOnlineBubbles, c);
            if (d[bg(0x13f)](f, d[bg(0xc1)])) {
                if (d[bg(0x137)](d[bg(0xc2)], d[bh(0xd6)]))
                    f = d[bh(0x136)];
                else
                    return d[bg(0x192)](e['id'], f);
            }
            logger_1[bh(0xff)][bg(0x176)](bg(0x11d) + bg(0x115) + f + bh(0xeb) + j[bh(0x108)] + bh(0x132) + c['id']);
        });
    };
events[a8(0x1ad) + a9(0x11a)] = onSetUserIdle, events[a9(0x18e) + a8(0x142)] = onSetUserActive, events[a9(0x175) + a9(0x16b)] = onUpdateUsers, events[a9(0x124) + a8(0x139)] = spawnChatWindow, events[a8(0x10f) + a8(0x179)] = onChatMessage, events[a9(0x130) + 'ng'] = onChatTyping, events[a9(0x11e) + a9(0xda)] = onChatStopTyping, events[a9(0x17e) + a9(0x110)] = saveChatWindow, events[a9(0x151) + 'ct'] = onDisconnect, events[a8(0x15e) + a8(0xc7)] = c => {
    const bi = a9, bj = a8, d = {
            'bkrxn': function (f, g) {
                return f !== g;
            },
            'rKGLd': bi(0xfe),
            'EKvHc': function (f, g) {
                return f(g);
            }
        }, {user: e} = c[bj(0x105)][bj(0x1b5)];
    c['on'](e[bi(0xdc)] + (bj(0x162) + bj(0x14d) + bj(0xd2)), () => {
        const bk = bi, bl = bj;
        if (d[bk(0xd7)](d[bl(0xbb)], d[bl(0xbb)])) {
            const {user: g} = m[bl(0x105)][bk(0x1b5)], h = bl(0x1a1) + '_' + g[bk(0xdc)], i = n[bk(0xb1)][h], j = (0x269 * 0x5 + -0x146 * -0x1b + -0x2e6f * 0x1, o[bk(0x18c)])((-0x82a + -0x1 * -0xb94 + -0x36a, p[bk(0x188)])((0xe5 * 0xa + 0x1349 * 0x1 + -0x1c3b, q[bk(0xaa)])(i[bl(0x18a) + 'e']), B => {
                    return B[-0x8 * -0x16e + -0x15fc + 0xa8c];
                })), k = (0x4 * -0x971 + -0xc09 + 0x31cd, r[bl(0x18c)])((-0xc96 + 0x45f * -0x8 + 0x2f8e, s[bl(0x188)])((-0xa1d + 0xc09 + -0x6 * 0x52, t[bl(0xaa)])(i[bl(0x101)]), B => {
                    return B[0xfa6 + 0x16 * 0x107 + 0x198 * -0x18];
                })), l = {};
            l[bk(0x187) + bk(0x118)] = j, l[bl(0x114) + bl(0x118)] = k, (-0x1720 + 0x906 + 0xbe * 0x13, u[bl(0x14b) + bl(0xe2) + bk(0x194)])(v, g[bk(0xdc)] + (bl(0x162) + bl(0x14d) + bl(0xd2)), l);
        } else
            d[bk(0x16c)](UpdateOnlineBubbles, e[bl(0xdc)]);
    });
}, events[a9(0xb8) + a9(0x15a)] = c => {
    const bm = a9, bn = a8, d = {
            'dWTDf': function (e, f) {
                return e(f);
            },
            'qMVWh': bm(0xb8) + bn(0x15a)
        };
    c['on'](d[bm(0x109)], () => {
        const bo = bm;
        d[bo(0xca)](SpawnOpenChatWindows, c);
    });
};
function register(c) {
    const bp = a9, bq = a8, d = {
            'lNxiH': function (e, f) {
                return e === f;
            },
            'csFaE': function (e, f) {
                return e(f);
            },
            'tnnmQ': function (e, f) {
                return e === f;
            },
            'IRsaO': bp(0x16d)
        };
    if (!c[bq(0x105)]?.[bp(0x1b5)]?.[bq(0xdc)])
        return;
    events[bp(0x1ad) + bp(0x11a)](c), events[bp(0x18e) + bp(0x142)](c), events[bp(0x175) + bq(0x16b)](c), events[bq(0x15e) + bp(0xc7)](c), events[bq(0x124) + bq(0x139)](c), events[bp(0xb8) + bq(0x15a)](c), events[bq(0x10f) + bq(0x179)](c), events[bp(0x130) + 'ng'](c), events[bq(0x11e) + bp(0xda)](c), events[bp(0x17e) + bq(0x110)](c), events[bp(0x151) + 'ct'](c), c[bp(0x105)][bp(0x1b5)][bq(0xf7)]['id'] && (d[bq(0xc8)](d[bp(0x1b4)], d[bq(0x1b4)]) ? d[bq(0xf9)](JoinChatServer, c) : d[bp(0x184)](d[bq(0xf9)](i, j[bq(0xf7)]['id']), d[bp(0xf9)](k, l)) && (o = p[bp(0xf7)]));
}
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x1 * 0xee1 + 0x1 * 0xc6b + 0x109 * 0x3);
        let h = e[f];
        return h;
    }, b(c, d);
}
const eventLoop = c => {
        const br = a9, bs = a9, d = {
                'AEDso': function (e, f) {
                    return e(f);
                },
                'CPWNj': function (e, f) {
                    return e(f);
                }
            };
        d[br(0x1a3)](UpdateUsers, c), d[bs(0xc4)](UpdateOnlineBubbles, c);
    }, a5 = {};
a5[a9(0x1b0)] = events, a5[a9(0xe0)] = eventLoop, a5[a9(0xc0)] = register;
const chat = a5;
exports[a9(0x155)] = chat;