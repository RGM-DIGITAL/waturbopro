'use strict';
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0xe2 * 0x29 + -0x107e * -0x1 + -0xad * 0x4d);
        let h = e[f];
        return h;
    }, b(c, d);
}
const S = b, T = b;
(function (c, d) {
    const Q = b, R = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(Q(0xf5)) / (0x136c * -0x2 + -0x2 * 0x7a0 + 0x3619) * (parseInt(R(0x129)) / (0x7 * -0x25a + -0x9f + 0x23 * 0x7d)) + -parseInt(R(0xc2)) / (0x111a + 0x9 * 0x3d9 + -0x33b8) + -parseInt(R(0x122)) / (-0x52d * -0x2 + -0x1aae * 0x1 + -0x2 * -0x82c) * (-parseInt(R(0xb8)) / (0x117 * -0x1f + -0x133 * 0xb + 0x2eff)) + parseInt(R(0xfa)) / (0x3 * -0xc5b + 0x16b * 0xd + -0x638 * -0x3) + -parseInt(R(0xd1)) / (0x1b7 * 0x4 + -0x1ca + -0x50b) * (-parseInt(Q(0xbc)) / (0x25cd * -0x1 + -0xf49 + 0x351e)) + parseInt(Q(0xd4)) / (-0xa9 * 0x6 + 0xaa4 + -0x6a5) * (parseInt(R(0xdc)) / (0x1ac5 + 0x1da * -0x2 + 0x7ad * -0x3)) + parseInt(R(0x112)) / (0x80d * 0x1 + 0x1c72 + -0x91d * 0x4) * (-parseInt(R(0x116)) / (-0x2 * -0x35e + 0x1 * 0xc95 + -0x1345));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x4ba69 + 0x1c1 * 0x3df + -0x7f * 0xf25));
var __importDefault = this && this[S(0xb2) + S(0x10d)] || function (c) {
    const U = S;
    return c && c[U(0x121)] ? c : { 'default': c };
};
const q = {};
function a() {
    const Z = [
        '__esModule',
        '22044GGbvaD',
        'sequelize',
        'ZitEF',
        'VbJIJ',
        '.mp4',
        'vTLlO',
        'OKTOo',
        '2UGfBBy',
        'saveToFile',
        'messenger',
        'Error\x20send',
        'mediaType',
        'ls/Ticket',
        'sendText',
        '../../help',
        'mp4',
        '../../mode',
        'pending',
        'age\x20is\x20(te',
        'HoGfa',
        '__importDe',
        'domTime',
        'audio',
        'path',
        'CERav',
        'log',
        '295NWpfnc',
        'sended',
        'mIXjO',
        'ptt',
        '16VPrBnB',
        'Error\x20mess',
        's/logger',
        'defineProp',
        'iEKfh',
        'HccbL',
        '897279rbMSbK',
        'LUNuf',
        'peg',
        'readFile',
        '\x20|\x20Ticket:',
        'body',
        'file',
        'default',
        'ZrMzZ',
        'nant:\x20',
        'sleepRando',
        '../../util',
        'dataValues',
        'info',
        'chat:ack',
        '760739HWsXHh',
        'tkUBB',
        'equWS',
        '1928061IiVusT',
        'sendVideo',
        'public',
        'toBuffer',
        'ticket',
        'video',
        'sendFile',
        'WAmrm',
        '20gKIksJ',
        'toFormat',
        'value',
        'messageId',
        'erty',
        'join',
        'FnYvE',
        'Emit',
        'ASC',
        'ls/Message',
        'mediaUrl',
        'chat',
        'RLZwv',
        'filename',
        'text',
        'timestamp',
        'sendImage',
        'image',
        'ack',
        'error',
        'mTime',
        'createdAt',
        ')::\x20',
        'JLQNJ',
        'update',
        '231809eCZiaH',
        'type',
        'mWqLw',
        'split',
        's/sleepRan',
        '2715744SOCnFy',
        'findAll',
        'tenantId',
        'sendAudio',
        'closed',
        'where',
        'date\x20ok',
        'GtqpS',
        'Message\x20Up',
        'iKccM',
        'quotedMsg',
        'messengerI',
        'id:\x20',
        'contact',
        'fs/promise',
        'status',
        'jpeg',
        'lte',
        'end',
        'fault',
        'mediaName',
        'ers/socket',
        'payload',
        'VslMl',
        '176LaCcic',
        'fluent-ffm',
        'zScpF',
        'IqLWh',
        '820392SIjEDx',
        'logger',
        'dBVrX',
        'sharp',
        'UVvdC',
        '\x20message\x20(',
        'document',
        'EQSAd',
        'applicatio',
        'includes',
        'NHxmj'
    ];
    a = function () {
        return Z;
    };
    return a();
}
q[T(0xde)] = !![], Object[T(0xbf) + S(0xe0)](exports, S(0x121), q);
const promises_1 = require(T(0x108) + 's'), fluent_ffmpeg_1 = __importDefault(require(T(0x113) + T(0xc4))), path_1 = require(T(0xb5)), sequelize_1 = require(S(0x123)), sharp_1 = __importDefault(require(T(0x119))), socketEmit_1 = __importDefault(require(S(0xac) + S(0x10f) + S(0xe3))), Message_1 = __importDefault(require(T(0xae) + S(0xe5))), Ticket_1 = __importDefault(require(T(0xae) + T(0xaa))), logger_1 = require(T(0xcd) + S(0xbe)), sleepRandomTime_1 = require(S(0xcd) + S(0xf9) + S(0xb3)), MessengerSendMessagesSystem = async (l, m) => {
        const V = T, W = S, n = {
                'vTLlO': V(0xad),
                'CERav': V(0xef),
                'ZitEF': W(0x10c),
                'iEKfh': V(0xaf),
                'mWqLw': V(0x107),
                'VslMl': W(0xd8),
                'iKccM': W(0xfe),
                'zScpF': W(0xa7),
                'GtqpS': V(0x104),
                'NHxmj': V(0xf1),
                'ZrMzZ': V(0xe4),
                'OKTOo': W(0xe7),
                'UVvdC': W(0xea),
                'mIXjO': V(0xd6),
                'dBVrX': function (t, u) {
                    return t === u;
                },
                'WAmrm': V(0xb4),
                'LUNuf': function (t, u) {
                    return t === u;
                },
                'JLQNJ': V(0xbb),
                'VbJIJ': V(0xed),
                'tkUBB': V(0xd9),
                'FnYvE': V(0x11e) + 'n',
                'IqLWh': V(0xc8),
                'HccbL': W(0x11c),
                'equWS': V(0xb9),
                'EQSAd': W(0xd0),
                'RLZwv': V(0x102) + W(0x100),
                'HoGfa': function (t, u) {
                    return t(u);
                }
            }, o = { [sequelize_1['Op']['is']]: null }, p = {
                'fromMe': !![],
                'messageId': o,
                'status': n[W(0xc0)],
                [sequelize_1['Op']['or']]: [
                    { 'scheduleDate': { [sequelize_1['Op'][W(0x10b)]]: new Date() } },
                    { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
                ]
            }, r = await Message_1[V(0xc9)][W(0xfb)]({
                'where': p,
                'include': [
                    n[W(0xf7)],
                    {
                        'model': Ticket_1[W(0xc9)],
                        'as': n[V(0x111)],
                        'where': {
                            'tenantId': m,
                            [sequelize_1['Op']['or']]: {
                                'status': { [sequelize_1['Op']['ne']]: n[W(0x103)] },
                                'isFarewellMessage': !![]
                            },
                            'channel': n[V(0x114)],
                            'whatsappId': l['id']
                        },
                        'include': [n[V(0xf7)]]
                    },
                    {
                        'model': Message_1[V(0xc9)],
                        'as': n[V(0x101)],
                        'include': [n[V(0xf7)]]
                    }
                ],
                'order': [[
                        n[W(0x120)],
                        n[V(0xca)]
                    ]]
            });
        let s;
        for (const t of r) {
            const u = t, {ticket: v} = u, w = v[W(0x107)][W(0x105) + 'd'];
            try {
                if (![
                        n[W(0x128)],
                        n[W(0x11a)]
                    ][V(0x11f)](u[V(0xa9)]) && u[W(0x10e)]) {
                    const D = (-0xf69 + -0x1 * 0x5f7 + 0x1560, path_1[V(0xe1)])(__dirname, '..', '..', '..', n[W(0xba)]), E = (0x22b6 + -0x19a4 + -0x912, path_1[V(0xe1)])(D, u[W(0x10e)]), F = await (-0x8 * 0x191 + 0x12e3 + -0x65b, promises_1[W(0xc5)])(E);
                    console[V(0xb7)](E);
                    if (n[V(0x118)](u[V(0xa9)], n[W(0xdb)]) || n[W(0xc3)](u[V(0xa9)], n[W(0xf3)])) {
                        const G = u[V(0x10e)][V(0xf8)]('.'), H = (-0xf70 + -0x19cc + -0x3a * -0xb6, path_1[W(0xe1)])(D, G[0x75 * 0x16 + 0x1f51 * 0x1 + -0x295f] + W(0x126));
                        await new Promise((J, K) => {
                            const X = V, Y = W;
                            (0x34d * 0x4 + 0x1a98 + -0x27cc, fluent_ffmpeg_1[X(0xc9)])(E)[Y(0xdd)](n[Y(0x127)])['on'](n[X(0xb6)], L => K(L))['on'](n[X(0x124)], () => J(!![]))[Y(0x12a)](H);
                        });
                        const I = await (-0x39 * 0x17 + -0x1a01 + -0x1 * -0x1f20, promises_1[W(0xc5)])(H);
                        s = await l[V(0xfd)](w, I);
                    }
                    if (n[V(0x118)](u[W(0xa9)], n[V(0x125)])) {
                        const J = await (-0x119f + 0x53 * 0x9 + 0x75a * 0x2, sharp_1[V(0xc9)])(F)[W(0x10a)]()[V(0xd7)](), K = {};
                        K[V(0xe9)] = u[V(0x10e)], s = await l[V(0xec)](w, J, K);
                    }
                    if (n[W(0xc3)](u[V(0xa9)], n[V(0xd2)])) {
                        const L = {};
                        L[W(0xe9)] = u[V(0x10e)], s = await l[V(0xd5)](w, F, L);
                    }
                    if ([
                            n[W(0xe2)],
                            n[V(0x115)],
                            n[V(0xc1)]
                        ][W(0x11f)](u[V(0xa9)])) {
                        const M = {};
                        M[W(0xe9)] = u[W(0x10e)], s = await l[V(0xda)](w, F, M);
                    }
                }
                [
                    n[W(0x128)],
                    n[W(0x11a)]
                ][W(0x11f)](u[W(0xa9)]) && !u[W(0x10e)] && (s = await l[V(0xab)](w, u[W(0xc7)]));
                const x = {
                    ...u,
                    ...s
                };
                x['id'] = u['id'], x[W(0xeb)] = u[W(0xeb)], x[V(0xdf)] = s[W(0xdf)], x[W(0x109)] = n[W(0xd3)], x[W(0xee)] = 0x2;
                const y = x, z = { ...y }, A = {};
                A['id'] = u['id'];
                const B = {};
                B[V(0xff)] = A, await Message_1[V(0xc9)][V(0xf4)](z, B);
                const C = {};
                C[V(0xfc)] = v[W(0xfc)], C[W(0xf6)] = n[W(0x11d)], C[W(0x110)] = { ...u[V(0xce)] }, C[W(0x110)][V(0xe6)] = u[V(0xe6)], C[W(0x110)]['id'] = u['id'], C[W(0x110)][W(0xeb)] = u[W(0xeb)], C[W(0x110)][W(0xdf)] = s[V(0xdf)], C[W(0x110)][W(0x109)] = n[W(0xd3)], C[W(0x110)][V(0xee)] = 0x2, (-0xf * -0xe3 + 0x21f1 + 0x179f * -0x2, socketEmit_1[V(0xc9)])(C), logger_1[W(0x117)][W(0xcf)](n[V(0xe8)]), await (0x906 + -0xecb + -0x5c5 * -0x1, sleepRandomTime_1[V(0xcc) + W(0xf0)])({
                    'minMilliseconds': n[V(0xb1)](Number, -0x4 * -0xcc + -0x1144 + 0x72 * 0x24),
                    'maxMilliseconds': n[V(0xb1)](Number, -0x10 * -0x11d + -0x74d * -0x4 + -0x1494 * 0x2)
                });
            } catch (N) {
                const O = u['id'], P = u[V(0xd8)]['id'];
                logger_1[W(0x117)][V(0xef)](V(0xbd) + V(0xb0) + W(0xcb) + m + (W(0xc6) + '\x20') + P + ')'), logger_1[W(0x117)][W(0xef)](V(0xa8) + W(0x11b) + V(0x106) + O + W(0xf2) + N);
            }
        }
    };
exports[T(0xc9)] = MessengerSendMessagesSystem;