'use strict';
const S = b, T = b;
function a() {
    const Z = [
        'payload',
        'toFormat',
        'nQPkF',
        'fs/promise',
        'pending',
        'text',
        'join',
        'ticket',
        'ptt',
        'closed',
        '../../mode',
        'contact',
        '5114394twSldl',
        'age\x20is\x20(te',
        '\x20message\x20(',
        'defineProp',
        'lte',
        'Message\x20Up',
        'ls/Ticket',
        'NHVCj',
        'value',
        'createdAt',
        'quotedMsg',
        'split',
        'status',
        '18FCrgCB',
        'VrcEC',
        '150aiNpbD',
        '__esModule',
        'sleepRando',
        'logger',
        'chat',
        'teXuz',
        'messenger',
        ')::\x20',
        'tenantId',
        'dataValues',
        'rRGqf',
        'peg',
        '10828xzHmPl',
        'path',
        '.mp4',
        'ZnJij',
        'mTime',
        'domTime',
        'xhDzx',
        'ack',
        'audio',
        'sendImage',
        'Emit',
        'jxOtc',
        'sendAudio',
        'end',
        '\x20|\x20Ticket:',
        'sequelize',
        'error',
        'nant:\x20',
        'fault',
        'image',
        'messageId',
        'mp4',
        'sendFile',
        'xpqbg',
        'knbxR',
        'gNjNZ',
        'Error\x20mess',
        'info',
        'body',
        'CbXux',
        'sendVideo',
        'VzWYi',
        'pHCbD',
        'filename',
        '7287010FBsPzh',
        'mediaUrl',
        'uUAtS',
        'timestamp',
        'mediaName',
        'sharp',
        'sendText',
        'default',
        'UCpbR',
        's/logger',
        '275ZKSZWs',
        'tvLbK',
        'tOEDY',
        'JzQVL',
        'where',
        'messengerI',
        'saveToFile',
        'bmizi',
        'chat:ack',
        '3431592xXVZxl',
        '../../util',
        'log',
        's/sleepRan',
        'Phqjj',
        'public',
        'file',
        'ASC',
        'ls/Message',
        'fluent-ffm',
        'Jijvo',
        'zSrNC',
        'update',
        'NvugX',
        '__importDe',
        'findAll',
        'erty',
        'Error\x20send',
        'mediaType',
        'uzNWL',
        'jpeg',
        'sended',
        'type',
        '../../help',
        'ers/socket',
        'readFile',
        'video',
        '49441zGzHjI',
        'id:\x20',
        'includes',
        'RNKvS',
        'date\x20ok',
        'DCBWR',
        '386103TPInNV',
        'applicatio',
        'toBuffer',
        'document',
        '80474XEVMWF'
    ];
    a = function () {
        return Z;
    };
    return a();
}
(function (c, d) {
    const Q = b, R = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(Q(0x1fc)) / (-0x1a22 + 0xdf8 + 0xc2b) + -parseInt(R(0x17e)) / (-0x17 * -0xc + -0x1158 + -0x2 * -0x823) * (-parseInt(Q(0x198)) / (-0x22d * 0xb + 0x261 + 0x1591)) + -parseInt(R(0x1a6)) / (-0x1f3 * 0x1 + -0x1077 + 0x126e) * (parseInt(Q(0x1d2)) / (-0x160d + 0x721 + -0x9 * -0x1a9)) + parseInt(R(0x19a)) / (0x2210 + 0xb57 * 0x1 + -0x2d61) * (-parseInt(Q(0x1f6)) / (0x11bd + 0x1 * -0x1f25 + -0xd6f * -0x1)) + parseInt(Q(0x1db)) / (0x2 * -0xcf1 + 0x1 * -0xce5 + 0x26cf) + -parseInt(R(0x18b)) / (0x36f * 0x5 + 0x1 * 0x16b8 + 0x27da * -0x1) + parseInt(Q(0x1c8)) / (-0x73 * -0x3e + 0x2673 + -0x4243);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x4e925 * -0x1 + -0x12499e + -0x475f * -0x84));
var __importDefault = this && this[S(0x1e9) + S(0x1b8)] || function (c) {
    const U = T;
    return c && c[U(0x19b)] ? c : { 'default': c };
};
const q = {};
q[T(0x193)] = !![], Object[S(0x18e) + S(0x1eb)](exports, S(0x19b), q);
const promises_1 = require(T(0x182) + 's'), fluent_ffmpeg_1 = __importDefault(require(S(0x1e4) + S(0x1a5))), path_1 = require(T(0x1a7)), sequelize_1 = require(S(0x1b5)), sharp_1 = __importDefault(require(T(0x1cd))), socketEmit_1 = __importDefault(require(T(0x1f2) + S(0x1f3) + S(0x1b0))), Message_1 = __importDefault(require(S(0x189) + S(0x1e3))), Ticket_1 = __importDefault(require(T(0x189) + S(0x191))), logger_1 = require(S(0x1dc) + T(0x1d1)), sleepRandomTime_1 = require(T(0x1dc) + S(0x1de) + T(0x1ab)), MessengerSendMessagesSystem = async (l, m) => {
        const V = T, W = T, n = {
                'UCpbR': V(0x1bb),
                'xhDzx': W(0x1b6),
                'Jijvo': V(0x1b3),
                'xpqbg': W(0x183),
                'nQPkF': V(0x18a),
                'knbxR': V(0x186),
                'VzWYi': W(0x188),
                'DCBWR': W(0x1a0),
                'RNKvS': V(0x195),
                'tOEDY': W(0x194),
                'uUAtS': W(0x1e2),
                'pHCbD': V(0x19e),
                'CbXux': W(0x184),
                'JzQVL': V(0x1e0),
                'uzNWL': function (t, u) {
                    return t === u;
                },
                'zSrNC': V(0x1ae),
                'NvugX': function (t, u) {
                    return t === u;
                },
                'tvLbK': W(0x187),
                'rRGqf': V(0x1b9),
                'jxOtc': V(0x1f5),
                'NHVCj': W(0x1fd) + 'n',
                'gNjNZ': V(0x1e1),
                'Phqjj': W(0x1ff),
                'VrcEC': V(0x1f0),
                'ZnJij': V(0x1da),
                'teXuz': W(0x190) + W(0x1fa),
                'bmizi': function (t, u) {
                    return t(u);
                }
            }, o = { [sequelize_1['Op']['is']]: null }, p = {
                'fromMe': !![],
                'messageId': o,
                'status': n[W(0x1bd)],
                [sequelize_1['Op']['or']]: [
                    { 'scheduleDate': { [sequelize_1['Op'][V(0x18f)]]: new Date() } },
                    { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
                ]
            }, r = await Message_1[W(0x1cf)][W(0x1ea)]({
                'where': p,
                'include': [
                    n[W(0x181)],
                    {
                        'model': Ticket_1[W(0x1cf)],
                        'as': n[W(0x1be)],
                        'where': {
                            'tenantId': m,
                            [sequelize_1['Op']['or']]: {
                                'status': { [sequelize_1['Op']['ne']]: n[V(0x1c5)] },
                                'isFarewellMessage': !![]
                            },
                            'channel': n[V(0x1fb)],
                            'whatsappId': l['id']
                        },
                        'include': [n[V(0x181)]]
                    },
                    {
                        'model': Message_1[V(0x1cf)],
                        'as': n[W(0x1f9)],
                        'include': [n[W(0x181)]]
                    }
                ],
                'order': [[
                        n[V(0x1d4)],
                        n[W(0x1ca)]
                    ]]
            });
        let s;
        for (const t of r) {
            const u = t, {ticket: v} = u, w = v[V(0x18a)][W(0x1d7) + 'd'];
            try {
                if (![
                        n[W(0x1c6)],
                        n[V(0x1c3)]
                    ][W(0x1f8)](u[W(0x1ed)]) && u[V(0x1cc)]) {
                    const D = (0x3 * -0x3c5 + 0x812 + -0x1 * -0x33d, path_1[W(0x185)])(__dirname, '..', '..', '..', n[V(0x1d5)]), E = (0x2325 + -0x7 * 0x23 + 0x223 * -0x10, path_1[W(0x185)])(D, u[V(0x1cc)]), F = await (0x1eee + 0x1cd4 + -0x3bc2, promises_1[W(0x1f4)])(E);
                    console[W(0x1dd)](E);
                    if (n[V(0x1ee)](u[W(0x1ed)], n[V(0x1e6)]) || n[W(0x1e8)](u[V(0x1ed)], n[V(0x1d3)])) {
                        const G = u[W(0x1cc)][V(0x196)]('.'), H = (0x2314 + -0x1173 + 0x11a1 * -0x1, path_1[W(0x185)])(D, G[0xd90 + 0xfc8 + -0x1d58] + V(0x1a8));
                        await new Promise((J, K) => {
                            const X = V, Y = V;
                            (-0xcf5 + -0x628 * -0x5 + 0x27 * -0x75, fluent_ffmpeg_1[X(0x1cf)])(E)[Y(0x180)](n[X(0x1d0)])['on'](n[Y(0x1ac)], L => K(L))['on'](n[X(0x1e5)], () => J(!![]))[Y(0x1d8)](H);
                        });
                        const I = await (-0xe07 + 0x31 * -0x58 + 0x1edf * 0x1, promises_1[W(0x1f4)])(H);
                        s = await l[W(0x1b2)](w, I);
                    }
                    if (n[W(0x1ee)](u[W(0x1ed)], n[W(0x1a4)])) {
                        const J = await (-0x1d69 * 0x1 + 0x22f6 + -0x58d, sharp_1[W(0x1cf)])(F)[V(0x1ef)]()[W(0x1fe)](), K = {};
                        K[W(0x1c7)] = u[V(0x1cc)], s = await l[V(0x1af)](w, J, K);
                    }
                    if (n[W(0x1e8)](u[W(0x1ed)], n[V(0x1b1)])) {
                        const L = {};
                        L[V(0x1c7)] = u[W(0x1cc)], s = await l[W(0x1c4)](w, F, L);
                    }
                    if ([
                            n[W(0x192)],
                            n[V(0x1bf)],
                            n[W(0x1df)]
                        ][V(0x1f8)](u[V(0x1ed)])) {
                        const M = {};
                        M[V(0x1c7)] = u[V(0x1cc)], s = await l[V(0x1bc)](w, F, M);
                    }
                }
                [
                    n[V(0x1c6)],
                    n[V(0x1c3)]
                ][W(0x1f8)](u[W(0x1ed)]) && !u[W(0x1cc)] && (s = await l[V(0x1ce)](w, u[W(0x1c2)]));
                const x = {
                    ...u,
                    ...s
                };
                x['id'] = u['id'], x[W(0x1cb)] = u[W(0x1cb)], x[V(0x1ba)] = s[W(0x1ba)], x[V(0x197)] = n[V(0x199)], x[W(0x1ad)] = 0x2;
                const y = x, z = { ...y }, A = {};
                A['id'] = u['id'];
                const B = {};
                B[V(0x1d6)] = A, await Message_1[V(0x1cf)][W(0x1e7)](z, B);
                const C = {};
                C[V(0x1a2)] = v[V(0x1a2)], C[W(0x1f1)] = n[W(0x1a9)], C[V(0x17f)] = { ...u[W(0x1a3)] }, C[V(0x17f)][V(0x1c9)] = u[W(0x1c9)], C[V(0x17f)]['id'] = u['id'], C[V(0x17f)][W(0x1cb)] = u[W(0x1cb)], C[V(0x17f)][V(0x1ba)] = s[V(0x1ba)], C[V(0x17f)][V(0x197)] = n[W(0x199)], C[V(0x17f)][V(0x1ad)] = 0x2, (-0xe * -0x9f + -0x135f + 0xaad, socketEmit_1[V(0x1cf)])(C), logger_1[W(0x19d)][V(0x1c1)](n[V(0x19f)]), await (-0x478 + 0x1 * -0x6f5 + 0xb6d, sleepRandomTime_1[V(0x19c) + W(0x1aa)])({
                    'minMilliseconds': n[W(0x1d9)](Number, -0x503 + -0x256c + 0x2c63),
                    'maxMilliseconds': n[V(0x1d9)](Number, 0xd55 + 0x159b + -0x4 * 0x745)
                });
            } catch (N) {
                const O = u['id'], P = u[V(0x186)]['id'];
                logger_1[V(0x19d)][W(0x1b6)](W(0x1c0) + W(0x18c) + V(0x1b7) + m + (V(0x1b4) + '\x20') + P + ')'), logger_1[V(0x19d)][V(0x1b6)](W(0x1ec) + W(0x18d) + W(0x1f7) + O + V(0x1a1) + N);
            }
        }
    };
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x2238 + 0xcbd + 0x71 * -0x67);
        let h = e[f];
        return h;
    }, b(c, d);
}
exports[S(0x1cf)] = MessengerSendMessagesSystem;