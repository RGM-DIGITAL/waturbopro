'use strict';
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0xd1 * -0x20 + -0x5b * -0xb + 0x6 * 0x3e1);
        let h = e[f];
        return h;
    }, b(c, d);
}
const v = b, w = b;
(function (c, d) {
    const t = b, u = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(t(0x13c)) / (-0x204f + -0x2fa + 0x234a) * (parseInt(u(0x116)) / (-0x1461 + 0x25a7 + -0x1144)) + parseInt(u(0x125)) / (0xa77 + -0x14fe + 0xa8a) * (parseInt(t(0x10f)) / (0x1643 + -0x7be * 0x1 + 0xe81 * -0x1)) + -parseInt(u(0x13e)) / (0x555 + -0x1bfb + 0x16ab) + -parseInt(t(0x15e)) / (-0x1829 + -0x5 * -0x4c6 + -0x9 * -0x9) + -parseInt(t(0x15a)) / (-0x3a * -0xa9 + -0x803 + -0x1e40) * (-parseInt(t(0x172)) / (-0x1e7b + 0x88e * -0x3 + 0x1 * 0x382d)) + -parseInt(t(0x160)) / (-0x6 * 0x377 + -0x109e + 0x2d * 0xd5) * (parseInt(t(0x151)) / (0x100 + 0x3ab + -0x4a1)) + -parseInt(u(0x169)) / (-0x177e + 0x21a7 + -0x50f * 0x2) * (-parseInt(t(0x15c)) / (-0x316 * -0x2 + 0x1a26 + -0x1 * 0x2046));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x1f * 0x6416 + 0xaaff9 + 0xa01f7));
function a() {
    const L = [
        'unreadMess',
        'wServices/',
        'contact',
        'channel',
        's/logger',
        'hXoka',
        'ervices/Fi',
        'ndOrCreate',
        'rVerifyMed',
        'xmZDV',
        '../ChatFlo',
        'video',
        'ssEaM',
        '330vBrOBf',
        'file',
        'sChatFlowT',
        'page',
        'RxHjW',
        'message',
        'QXFAl',
        'bwbLA',
        'XHkmg',
        '5203583OzYJTf',
        'pCVqT',
        '12LLLzjX',
        'isFarewell',
        '6458784evOrRR',
        'cZPzq',
        '102996WDWWfq',
        'RACwA',
        'messenger',
        'kZwTh',
        'mRhHr',
        'fFBrd',
        'Message',
        'logger',
        'entry',
        '13656566fNByWP',
        'ages',
        'ers/Verify',
        'BjqEa',
        'erty',
        '/messenger',
        'icket',
        'iaMessage',
        'length',
        '8aGlEOZ',
        'fbPageId',
        'audio',
        'vices/help',
        'type',
        'defineProp',
        'default',
        'RqJhd',
        '70088klEvwQ',
        'mid',
        'urs',
        'JzPSx',
        'oDnHF',
        'whatsappId',
        'ice',
        '2kEEHgY',
        '../../libs',
        'messaging',
        'rVerifyCon',
        'jxVPf',
        'rVerifyMes',
        'tact',
        './Messenge',
        'value',
        'image',
        '../../util',
        'BusinessHo',
        'PNQMo',
        'rShowChann',
        'error',
        '129GRyENI',
        'getMesseng',
        'rMarkRead',
        '../TicketS',
        'timestamp',
        'sage',
        'dDfKr',
        'text',
        'LWtRo',
        'rkGgW',
        'VerifyStep',
        'GZpfv',
        'fallback',
        '__esModule',
        'isCampaign',
        'TicketServ',
        'sender',
        'QQakm',
        'tenantId',
        'Bot',
        '__importDe',
        'shift',
        'msg',
        '79589QgRCKG',
        'location',
        '4009020gEaGLJ',
        '../WbotSer',
        'fault',
        'object',
        'read',
        'erBot'
    ];
    a = function () {
        return L;
    };
    return a();
}
var __importDefault = this && this[v(0x139) + w(0x140)] || function (c) {
    const x = v;
    return c && c[x(0x132)] ? c : { 'default': c };
};
const k = {};
k[v(0x11e)] = !![], Object[w(0x177) + w(0x16d)](exports, v(0x132), k);
const logger_1 = require(w(0x120) + w(0x148)), FindOrCreateTicketService_1 = __importDefault(require(v(0x128) + v(0x14a) + v(0x14b) + v(0x134) + v(0x115))), messengerBot_1 = require(v(0x117) + v(0x16e) + v(0x138)), MessengerVerifyContact_1 = __importDefault(require(w(0x11d) + w(0x119) + v(0x11c))), MessengerVerifyMessage_1 = __importDefault(require(v(0x11d) + w(0x11b) + w(0x12a))), MessengerVerifyMediaMessage_1 = __importDefault(require(w(0x11d) + v(0x14c) + v(0x170))), VerifyStepsChatFlowTicket_1 = __importDefault(require(v(0x14e) + w(0x145) + w(0x12f) + w(0x153) + v(0x16f))), MessengerMarkRead_1 = __importDefault(require(v(0x11d) + w(0x127))), MessengerShowChannel_1 = __importDefault(require(v(0x11d) + v(0x123) + 'el')), VerifyBusinessHours_1 = __importDefault(require(v(0x13f) + w(0x175) + v(0x16b) + w(0x121) + v(0x111))), getMessageType = d => {
        const y = v, z = v, e = {};
        e[y(0x136)] = function (i, j) {
            return i > j;
        }, e[z(0x179)] = z(0x12c), e[y(0x14d)] = function (i, j) {
            return i === j;
        }, e[y(0x12d)] = z(0x11f), e[z(0x130)] = y(0x174), e[z(0x12e)] = z(0x14f), e[z(0x16c)] = y(0x13d), e[y(0x157)] = z(0x152), e[y(0x15f)] = function (i, j) {
            return i === j;
        }, e[z(0x12b)] = y(0x131);
        const f = e, {attachments: g} = d, h = g && f[z(0x136)](g[z(0x171)], 0xab2 + 0x22d * 0x5 + -0x731 * 0x3);
        if (d[z(0x12c)] && !h)
            return f[y(0x179)];
        if (h && f[y(0x14d)](g[0x52b + 0x16fa + -0x1 * 0x1c25][y(0x176)], f[z(0x12d)]))
            return f[y(0x12d)];
        if (h && f[z(0x14d)](g[-0x1 * 0x8cc + 0x8 * -0x31d + 0x21b4][z(0x176)], f[y(0x130)]))
            return f[z(0x130)];
        if (h && f[z(0x14d)](g[-0x9 * 0x2e + 0x1 * 0x115 + 0x89][y(0x176)], f[y(0x12e)]))
            return f[z(0x12e)];
        if (h && f[z(0x14d)](g[0x1b60 + 0x11d * 0x13 + -0x3087][z(0x176)], f[z(0x16c)]))
            return f[z(0x16c)];
        if (h && f[y(0x14d)](g[0x9 * 0x3ea + 0x2673 + 0x188f * -0x3][z(0x176)], f[z(0x157)]))
            return f[y(0x157)];
        if (h && f[y(0x15f)](g[-0x9 * -0x59 + -0x71 * 0x27 + 0xe16][y(0x176)], f[z(0x12b)]))
            return f[y(0x12b)];
    }, MessengerHandleMessage = async c => {
        const A = v, B = v, d = {
                'oDnHF': function (e, f) {
                    return e !== f;
                },
                'PNQMo': A(0x154),
                'kZwTh': function (e, f) {
                    return e(f);
                },
                'fFBrd': A(0x162),
                'hXoka': function (e) {
                    return e();
                },
                'JzPSx': B(0x12c)
            };
        return new Promise((e, f) => {
            const D = A, F = B, g = {
                    'mRhHr': function (h, i) {
                        const C = b;
                        return d[C(0x113)](h, i);
                    },
                    'RxHjW': d[D(0x122)],
                    'bwbLA': function (h, i) {
                        const E = D;
                        return d[E(0x163)](h, i);
                    },
                    'ssEaM': d[D(0x165)],
                    'RACwA': function (h) {
                        const G = F;
                        return d[G(0x149)](h);
                    },
                    'jxVPf': function (h, i) {
                        const H = F;
                        return d[H(0x113)](h, i);
                    },
                    'pCVqT': d[F(0x112)],
                    'XHkmg': function (h) {
                        const I = F;
                        return d[I(0x149)](h);
                    }
                };
            ((async () => {
                const J = F, K = F;
                let h, i;
                const j = 0x2 * -0x162 + -0x1a19 + 0x5c6 * 0x5;
                try {
                    if (g[J(0x164)](c[K(0x141)], g[J(0x155)]))
                        return;
                    const l = c[J(0x168)][J(0x13a)](), m = l?.[K(0x118)][K(0x13a)](), n = {};
                    n[K(0x173)] = l['id'], h = await (-0x165 * -0xb + -0x25 * -0x8d + -0x23b8, MessengerShowChannel_1[J(0x178)])(n);
                    if (!h)
                        return;
                    const o = await (-0x174d + 0x11 * 0x1d + -0x72 * -0x30, messengerBot_1[K(0x126) + K(0x143)])(h['id']);
                    if (!m?.[K(0x156)] && m[K(0x142)]) {
                        (-0x7 * -0x425 + 0x61 * -0xb + -0x18d8, MessengerMarkRead_1[J(0x178)])(m, h[J(0x137)]);
                        return;
                    }
                    i = await (-0x1c51 + 0x1 * -0x9e7 + -0x131c * -0x2, MessengerVerifyContact_1[J(0x178)])(m[J(0x135)], o, h[K(0x137)]);
                    const p = {
                            ...m,
                            'type': g[J(0x158)](getMessageType, m[J(0x156)]),
                            'fromMe': ![],
                            'body': m?.[J(0x156)]?.[J(0x12c)] || '',
                            'timestamp': m[J(0x129)],
                            'message_id': m[J(0x156)][J(0x110)]
                        }, q = {};
                    q[K(0x146)] = i, q[J(0x114)] = h['id'], q[J(0x144) + K(0x16a)] = j, q[K(0x137)] = h[J(0x137)], q[K(0x13b)] = p, q[K(0x147)] = g[J(0x150)];
                    const r = await (0x44f * 0x1 + -0x564 + 0x115 * 0x1, FindOrCreateTicketService_1[K(0x178)])(q);
                    if (r?.[K(0x133) + K(0x166)]) {
                        g[J(0x161)](e);
                        return;
                    }
                    if (r?.[J(0x15d) + K(0x166)]) {
                        g[J(0x161)](e);
                        return;
                    }
                    g[J(0x11a)](p[J(0x176)], g[J(0x15b)]) ? await (-0x2063 + 0x1a52 + 0x611, MessengerVerifyMediaMessage_1[J(0x178)])(h, p, r, i) : await (0x1d49 + -0xb * -0x38b + -0x2221 * 0x2, MessengerVerifyMessage_1[K(0x178)])(p, r, i), await (-0x8f1 + -0x5 * -0x2d7 + -0x2 * 0x2a1, VerifyStepsChatFlowTicket_1[K(0x178)])(p, r), await (-0xe1b + 0x1 * -0xef9 + 0x4 * 0x745, VerifyBusinessHours_1[J(0x178)])(p, r), g[J(0x159)](e);
                } catch (s) {
                    logger_1[J(0x167)][K(0x124)](s), g[K(0x158)](f, s);
                }
            })());
        });
    };
exports[w(0x178)] = MessengerHandleMessage;