'use strict';
const A = b, B = b;
(function (c, d) {
    const y = b, z = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(y(0x154)) / (-0xfdd + -0x1c12 * 0x1 + 0x2bf0) + -parseInt(z(0x1ac)) / (-0x3d3 + -0xc5b + -0x94 * -0x1c) + -parseInt(z(0x14c)) / (-0x201d * 0x1 + 0x64 * -0x3d + 0x2 * 0x1bfa) * (parseInt(z(0x182)) / (0x1193 + 0x103 * 0x16 + -0x27d1 * 0x1)) + parseInt(y(0x165)) / (0x1c0c + 0x82e * -0x3 + -0x37d) * (parseInt(z(0x19c)) / (-0x49 * -0x4e + 0x13e * 0x6 + -0x1dac)) + -parseInt(y(0x156)) / (0x78 * -0x22 + -0x66b * -0x3 + -0x34a) * (parseInt(y(0x137)) / (0x1 * -0x1699 + -0x82e + 0x1ecf)) + parseInt(y(0x158)) / (-0x472 + -0x5 * 0x565 + -0x2c * -0xb7) * (parseInt(y(0x1b1)) / (0x2 * -0xdf9 + 0x2100 + -0x504)) + parseInt(z(0x1b6)) / (-0x69f * 0x5 + -0x26df + -0x67 * -0xb3);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x186f8 + -0xccb1 * -0x3 + -0x77 * 0x3df));
function a() {
    const V = [
        'tEZoq',
        'fallback',
        'EYdUJ',
        'default',
        'read',
        'PMCuk',
        'sage',
        'TGPgf',
        'urs',
        'GcrqI',
        'icket',
        'rVerifyMed',
        'yCtxx',
        'isFarewell',
        'QyLzY',
        'cupYi',
        'VqbZT',
        'YGkCf',
        'Nmvkh',
        '32MnvpgF',
        'ssxbT',
        'Bot',
        'cJUZN',
        'CMkCN',
        'rShowChann',
        'audio',
        'QthCn',
        'tenantId',
        'KatOj',
        'bYUQN',
        'mid',
        'isCampaign',
        'iaMessage',
        './Messenge',
        'vices/help',
        'gKyWJ',
        'Message',
        'entry',
        'jgnMP',
        'IzcoE',
        '4164oMoNek',
        'uETOv',
        'rVerifyMes',
        'eckDB',
        'timestamp',
        'IjcCe',
        'IUUSW',
        'uJCID',
        '42185wEqTEs',
        'BcaFO',
        '370321CcCNdg',
        'kgANt',
        '54wAlUda',
        'PTpVR',
        'wOaCY',
        'HIqHt',
        'rMarkRead',
        'sGDso',
        'error',
        'video',
        '../ChatFlo',
        'Xhpev',
        'ers/Verify',
        'fbPageId',
        '../../util',
        '10odnsre',
        'ervices/Fi',
        'rVerifyCon',
        'type',
        'image',
        'UhlCV',
        'unreadMess',
        'message',
        'messenger',
        'sChatFlowT',
        '../../libs',
        'ZnfnR',
        'getMesseng',
        '__importDe',
        'location',
        'fault',
        'rtqKf',
        'object',
        'Zxhtu',
        'RFdcW',
        'KlbFK',
        'tact',
        'text',
        '../TicketS',
        'YsnFP',
        'XrzWK',
        'logger',
        'liPnA',
        'BusinessHo',
        '636NsxBxE',
        'jMFSr',
        'muILw',
        'VerifyStep',
        'DsDWM',
        'PrYIo',
        '__esModule',
        'tpuCF',
        'pSNQO',
        'length',
        'aQGDh',
        'QZdKZ',
        '../WbotSer',
        'nLDxJ',
        'page',
        'ages',
        'zTVah',
        'fNbSJ',
        'XYmnE',
        'erty',
        'zeXdJ',
        'xaxdp',
        'contact',
        '/messenger',
        'dBzHk',
        'erBot',
        '96006pQCyIW',
        'Xgvdo',
        'tvjSC',
        'shift',
        'ndOrCreate',
        'MQjnO',
        'file',
        's/logger',
        'bFPYG',
        'jywBB',
        'ice',
        'wServices/',
        'defineProp',
        'GHWJT',
        'whatsappId',
        'TicketServ',
        '60828OWPDuz',
        'value',
        'channel',
        'dFYAe',
        'eQwXH',
        '112580eZjlPn',
        'msg',
        'UnRkz',
        'sender',
        'gsyzJ',
        '5063795eUkrIj',
        'fubDm',
        'messaging'
    ];
    a = function () {
        return V;
    };
    return a();
}
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x202 + 0x3ea * 0x2 + -0x8b4);
        let h = e[f];
        return h;
    }, b(c, d);
}
var __importDefault = this && this[A(0x172) + A(0x174)] || function (c) {
    const C = B;
    return c && c[C(0x188)] ? c : { 'default': c };
};
const k = {};
k[A(0x1ad)] = !![], Object[B(0x1a8) + A(0x195)](exports, A(0x188), k);
const logger_1 = require(B(0x164) + B(0x1a3)), FindOrCreateTicketService_1 = __importDefault(require(B(0x17c) + A(0x166) + B(0x1a0) + A(0x1ab) + B(0x1a6))), messengerBot_1 = require(B(0x16f) + B(0x199) + A(0x139)), MessengerVerifyContact_1 = __importDefault(require(B(0x145) + B(0x167) + B(0x17a))), MessengerVerifyMessage_1 = __importDefault(require(B(0x145) + B(0x14e) + B(0x12a))), MessengerVerifyMediaMessage_1 = __importDefault(require(A(0x145) + A(0x12f) + A(0x144))), VerifyStepsChatFlowTicket_1 = __importDefault(require(A(0x160) + A(0x1a7) + A(0x185) + A(0x16e) + A(0x12e))), MessengerMarkRead_1 = __importDefault(require(A(0x145) + B(0x15c))), MessengerShowChannel_1 = __importDefault(require(A(0x145) + B(0x13c) + 'el')), VerifyBusinessHours_1 = __importDefault(require(A(0x18e) + A(0x146) + B(0x162) + B(0x181) + A(0x12c))), getMessageType = d => {
        const D = A, E = A, e = {};
        e[D(0x132)] = function (i, j) {
            return i > j;
        }, e[E(0x1af)] = E(0x17b), e[D(0x1a4)] = function (i, j) {
            return i === j;
        }, e[E(0x196)] = D(0x169), e[E(0x153)] = function (i, j) {
            return i === j;
        }, e[E(0x19d)] = E(0x13d), e[E(0x17d)] = D(0x15f), e[D(0x135)] = function (i, j) {
            return i === j;
        }, e[E(0x178)] = D(0x173), e[E(0x13b)] = function (i, j) {
            return i === j;
        }, e[D(0x152)] = D(0x1a2), e[E(0x189)] = D(0x125);
        const f = e, {attachments: g} = d, h = g && f[D(0x132)](g[D(0x18b)], -0x138f + 0xd * 0x1ca + -0x3b3 * 0x1);
        if (d[E(0x17b)] && !h)
            return f[D(0x1af)];
        if (h && f[D(0x1a4)](g[0xbb9 * 0x1 + 0x2078 + -0xebb * 0x3][D(0x168)], f[D(0x196)]))
            return f[D(0x196)];
        if (h && f[D(0x153)](g[-0x126a + -0x2 * -0xe41 + -0xa18][E(0x168)], f[D(0x19d)]))
            return f[E(0x19d)];
        if (h && f[D(0x1a4)](g[-0x4f * -0x3d + 0x5fb * -0x2 + -0x6dd][E(0x168)], f[E(0x17d)]))
            return f[E(0x17d)];
        if (h && f[D(0x135)](g[-0x14b5 + 0x2 * 0xfd1 + -0x1 * 0xaed][D(0x168)], f[E(0x178)]))
            return f[D(0x178)];
        if (h && f[E(0x13b)](g[0x235 * 0x11 + -0xd7 + 0x3ab * -0xa][E(0x168)], f[D(0x152)]))
            return f[D(0x152)];
        if (h && f[D(0x13b)](g[0x13 * 0x193 + 0x19 * -0x113 + -0x30e][E(0x168)], f[D(0x189)]))
            return f[D(0x189)];
    }, MessengerHandleMessage = async c => {
        const F = A, G = B, d = {
                'KlbFK': function (e, f) {
                    return e > f;
                },
                'jMFSr': F(0x17b),
                'ZnfnR': function (e, f) {
                    return e === f;
                },
                'UnRkz': F(0x169),
                'jgnMP': F(0x13d),
                'eckDB': G(0x15f),
                'muILw': G(0x173),
                'IzcoE': G(0x1a2),
                'HIqHt': G(0x125),
                'QthCn': function (e, f) {
                    return e(f);
                },
                'GcrqI': function (e) {
                    return e();
                },
                'PrYIo': F(0x124),
                'DsDWM': G(0x161),
                'xaxdp': function (e, f) {
                    return e !== f;
                },
                'IjcCe': G(0x190),
                'rtqKf': F(0x193),
                'nLDxJ': F(0x19e),
                'XYmnE': G(0x16d),
                'PMCuk': G(0x140),
                'eQwXH': function (e, f) {
                    return e !== f;
                },
                'wOaCY': F(0x1a1),
                'TGPgf': F(0x159)
            };
        return new Promise((e, f) => {
            const I = G, K = G, g = {
                    'GHWJT': function (h, i) {
                        const H = b;
                        return d[H(0x179)](h, i);
                    },
                    'zTVah': d[I(0x183)],
                    'aQGDh': function (h, i) {
                        const J = I;
                        return d[J(0x170)](h, i);
                    },
                    'uETOv': d[K(0x1b3)],
                    'XrzWK': function (h, i) {
                        const L = K;
                        return d[L(0x170)](h, i);
                    },
                    'cJUZN': d[I(0x14a)],
                    'VqbZT': d[I(0x14f)],
                    'EYdUJ': d[K(0x184)],
                    'jywBB': d[I(0x14b)],
                    'fubDm': d[I(0x15b)],
                    'liPnA': function (h, i) {
                        const M = I;
                        return d[M(0x13e)](h, i);
                    },
                    'gsyzJ': function (h) {
                        const N = I;
                        return d[N(0x12d)](h);
                    },
                    'ssxbT': d[I(0x187)],
                    'cupYi': d[K(0x186)],
                    'yCtxx': function (h, i) {
                        const O = K;
                        return d[O(0x197)](h, i);
                    },
                    'sGDso': d[I(0x151)],
                    'QZdKZ': function (h, i) {
                        const P = I;
                        return d[P(0x170)](h, i);
                    },
                    'bYUQN': d[I(0x175)],
                    'BcaFO': d[I(0x18f)],
                    'pSNQO': d[I(0x194)],
                    'UhlCV': d[K(0x129)],
                    'Zxhtu': function (h, i) {
                        const Q = I;
                        return d[Q(0x1b0)](h, i);
                    },
                    'kgANt': d[K(0x15a)],
                    'Nmvkh': d[I(0x12b)]
                };
            ((async () => {
                const T = I, U = K, h = {
                        'dBzHk': function (m, n) {
                            const R = b;
                            return g[R(0x180)](m, n);
                        },
                        'gKyWJ': function (m) {
                            const S = b;
                            return g[S(0x1b5)](m);
                        }
                    };
                let i, j;
                const l = -0x11b + -0xedf + -0xffb * -0x1;
                try {
                    if (g[T(0x17e)](g[U(0x138)], g[U(0x133)])) {
                        (0x7 * 0x2fb + -0x3 * -0xa85 + 0x16 * -0x262, f[U(0x127)])(g, h[U(0x13f)]);
                        return;
                    } else {
                        if (g[U(0x130)](c[U(0x176)], g[T(0x15d)]))
                            return;
                        const n = c[T(0x149)][T(0x19f)](), o = n?.[U(0x123)][T(0x19f)](), p = {};
                        p[U(0x163)] = n['id'], i = await (0x133 + 0x218b + 0x2 * -0x115f, MessengerShowChannel_1[U(0x127)])(p);
                        if (!i)
                            return;
                        const q = await (-0xa9 * 0x1f + -0x665 * -0x2 + 0x7ad, messengerBot_1[T(0x171) + U(0x19b)])(i['id']);
                        if (!o?.[U(0x16c)] && o[T(0x128)]) {
                            if (g[U(0x18d)](g[T(0x141)], g[U(0x155)]))
                                g[U(0x17f)][T(0x15e)](h), h[T(0x19a)](i, j);
                            else {
                                (0x1f20 + -0x13b7 + -0xb69, MessengerMarkRead_1[T(0x127)])(o, i[U(0x13f)]);
                                return;
                            }
                        }
                        j = await (-0x1a6e + -0xf * 0x29a + 0x4174 * 0x1, MessengerVerifyContact_1[T(0x127)])(o[T(0x1b4)], q, i[T(0x13f)]);
                        const r = {
                                ...o,
                                'type': g[T(0x180)](getMessageType, o[T(0x16c)]),
                                'fromMe': ![],
                                'body': o?.[U(0x16c)]?.[U(0x17b)] || '',
                                'timestamp': o[T(0x150)],
                                'message_id': o[U(0x16c)][T(0x142)]
                            }, s = {};
                        s[U(0x198)] = j, s[U(0x1aa)] = i['id'], s[T(0x16b) + T(0x191)] = l, s[U(0x13f)] = i[U(0x13f)], s[U(0x1b2)] = r, s[T(0x1ae)] = g[U(0x18a)];
                        const t = await (-0xf * 0xad + 0x5 * -0x7cc + -0x9d3 * -0x5, FindOrCreateTicketService_1[T(0x127)])(s);
                        if (t?.[U(0x143) + U(0x148)]) {
                            g[T(0x1b5)](e);
                            return;
                        }
                        if (t?.[U(0x131) + U(0x148)]) {
                            if (g[T(0x130)](g[T(0x16a)], g[T(0x16a)])) {
                                const {attachments: w} = e, x = w && g[U(0x1a9)](w[U(0x18b)], -0xb7c + -0xc32 + -0x1 * -0x17ae);
                                if (f[T(0x17b)] && !x)
                                    return g[U(0x192)];
                                if (x && g[T(0x18c)](w[0x3 * -0x3fd + -0x1d86 * 0x1 + 0x297d][U(0x168)], g[T(0x14d)]))
                                    return g[U(0x14d)];
                                if (x && g[T(0x17e)](w[-0x952 * 0x1 + -0xafd + 0x1 * 0x144f][T(0x168)], g[T(0x13a)]))
                                    return g[U(0x13a)];
                                if (x && g[U(0x17e)](w[-0x4ba + -0x1 * 0x2029 + -0x24e3 * -0x1][T(0x168)], g[U(0x134)]))
                                    return g[T(0x134)];
                                if (x && g[T(0x17e)](w[-0x23dc + 0x730 + -0xe56 * -0x2][T(0x168)], g[U(0x126)]))
                                    return g[T(0x126)];
                                if (x && g[T(0x17e)](w[-0x4cd * -0x6 + 0x1f70 + -0x3c3e][U(0x168)], g[U(0x1a5)]))
                                    return g[U(0x1a5)];
                                if (x && g[U(0x18c)](w[-0x2202 + 0x1 * -0x1917 + 0x171 * 0x29][T(0x168)], g[U(0x122)]))
                                    return g[T(0x122)];
                            } else {
                                g[U(0x1b5)](e);
                                return;
                            }
                        }
                        if (g[T(0x130)](r[T(0x168)], g[U(0x192)]))
                            await (-0x1207 + 0x139b * 0x1 + -0x194 * 0x1, MessengerVerifyMediaMessage_1[T(0x127)])(i, r, t, j);
                        else {
                            if (g[T(0x177)](g[U(0x157)], g[U(0x136)]))
                                await (-0x2 * 0xfc9 + 0x2ad * 0x7 + 0xcd7, MessengerVerifyMessage_1[U(0x127)])(r, t, j);
                            else {
                                h[U(0x147)](s);
                                return;
                            }
                        }
                        await (0x1f5f + -0x2 * -0xe34 + -0x3bc7, VerifyStepsChatFlowTicket_1[U(0x127)])(r, t), await (0x107e * 0x2 + 0x456 + -0x119 * 0x22, VerifyBusinessHours_1[U(0x127)])(r, t), g[U(0x1b5)](e);
                    }
                } catch (x) {
                    logger_1[U(0x17f)][U(0x15e)](x), g[T(0x180)](f, x);
                }
            })());
        });
    };
exports[A(0x127)] = MessengerHandleMessage;