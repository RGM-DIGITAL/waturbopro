'use strict';
const Q = b, R = b;
function a() {
    const V = [
        'AHTZI',
        'ack',
        'messageId',
        'Error\x20send',
        'logger',
        'reply_to_m',
        'ls/Message',
        'gtYvg',
        'jrNYp',
        'pktXd',
        '\x20message\x20(',
        '../../help',
        'ls/Ticket',
        'dataValues',
        'mediaName',
        'GnVot',
        'ASC',
        'findAll',
        'rsPrj',
        'ers/socket',
        'fBorG',
        'timestamp',
        'sendVideo',
        'nMXGY',
        'default',
        'ticket',
        'sendMessag',
        'type',
        'ers/SetTic',
        'PiBwW',
        'telegram',
        'mediaType',
        'tUYXR',
        'update',
        '373112FRomtw',
        'message_id',
        '207ZGyVwO',
        'telegramId',
        'nant:\x20',
        'status',
        'quotedMsg',
        'hkKDF',
        'contact',
        'text',
        '108heIBCa',
        'essage_id',
        'age\x20is\x20(te',
        'Error\x20mess',
        '7871330mIUUPu',
        'error',
        'where',
        'e\x20text',
        'public',
        '110235iWiRIB',
        'image',
        'Message\x20Up',
        'OVijq',
        'UnfDL',
        'date',
        'NJWWl',
        'join',
        '47srKHbE',
        'mpTPR',
        'path',
        'Ikxeb',
        'createdAt',
        'sendPhoto',
        'pending',
        '__esModule',
        'BDBcS',
        'sendVoice',
        '../../util',
        'sequelize',
        'defineProp',
        '132XZBWLQ',
        'ptt',
        'date\x20ok',
        'tenantId',
        's/logger',
        '476854hxGydW',
        'sended',
        'KNIFi',
        'value',
        'source',
        'fault',
        'e\x20media',
        'erty',
        'mediaUrl',
        'info',
        'sendDocume',
        'closed',
        '\x20|\x20Ticket:',
        'body',
        '../../mode',
        '18716mDarlu',
        'GnMkC',
        'FSoGl',
        '__importDe',
        'Emit',
        'video',
        '2436IMeFkc',
        'zTjgU',
        'chat',
        'ketMessage',
        'id:\x20',
        '15977190XkVhQf',
        'Ghrdx',
        'includes',
        'audio',
        'payload',
        'zVPIy',
        '27731oqkuqm',
        'lte',
        'sAsRead',
        ')::\x20',
        'chat:ack'
    ];
    a = function () {
        return V;
    };
    return a();
}
(function (c, d) {
    const O = b, P = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(O(0x248)) / (0x1229 + 0x2500 + -0x14 * 0x2c2) * (parseInt(O(0x1f5)) / (-0x7 * -0x1d3 + -0x1746 + 0x12b * 0x9)) + parseInt(O(0x240)) / (-0x5bb * -0x2 + -0x2057 + 0x14e4 * 0x1) * (-parseInt(O(0x237)) / (0x12f2 + -0x18c3 + 0x5d5 * 0x1)) + parseInt(O(0x23b)) / (-0x837 * 0x2 + -0x27e * -0xf + -0x14ef) + parseInt(O(0x1e1)) / (0x1d48 + 0x1a3e * -0x1 + -0x304) * (-parseInt(O(0x1e6)) / (-0xd83 + -0x18a9 + 0x2633)) + parseInt(O(0x22d)) / (0x6a9 + -0x1db0 + 0x170f) * (parseInt(O(0x22f)) / (0x2 * -0xc9 + -0xee5 + 0x3 * 0x580)) + parseInt(O(0x200)) / (-0x3 * 0x3a9 + 0x4 * 0x9bf + -0x1bf7 * 0x1) + -parseInt(P(0x206)) / (0x47 * -0x1 + 0x1 * -0x247a + 0x24cc) * (parseInt(P(0x1fb)) / (-0x2639 + 0xcdd + -0x2 * -0xcb4));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0xb60d0 + -0x17ea94 + 0x44e * 0xb0b));
var __importDefault = this && this[Q(0x1f8) + R(0x1eb)] || function (c) {
    const S = R;
    return c && c[S(0x1db)] ? c : { 'default': c };
};
const q = {};
q[R(0x1e9)] = !![], Object[R(0x1e0) + Q(0x1ed)](exports, R(0x1db), q);
const path_1 = require(R(0x1d6)), sequelize_1 = require(Q(0x1df)), SetTicketMessagesAsRead_1 = __importDefault(require(R(0x216) + Q(0x227) + R(0x1fe) + R(0x208))), socketEmit_1 = __importDefault(require(R(0x216) + Q(0x21e) + Q(0x1f9))), Message_1 = __importDefault(require(R(0x1f4) + Q(0x211))), Ticket_1 = __importDefault(require(R(0x1f4) + Q(0x217))), logger_1 = require(Q(0x1de) + Q(0x1e5)), SendMessagesSystemWbot = async (m, n) => {
        const T = Q, U = R, o = {};
        o[T(0x228)] = T(0x1da), o[T(0x1dc)] = U(0x235), o[U(0x214)] = T(0x224), o[U(0x20b)] = U(0x1f1), o[U(0x246)] = U(0x229), o[U(0x1e8)] = U(0x233), o[T(0x243)] = U(0x1d8), o[U(0x1f7)] = T(0x21b), o[T(0x213)] = T(0x1fd), o[T(0x222)] = U(0x236), o[U(0x1fc)] = T(0x23f), o[T(0x212)] = function (v, w) {
            return v === w;
        }, o[U(0x244)] = T(0x203), o[T(0x205)] = function (v, w) {
            return v === w;
        }, o[T(0x1d5)] = T(0x1e2), o[T(0x21f)] = U(0x241), o[U(0x1f6)] = T(0x1fa), o[U(0x22b)] = U(0x225) + U(0x1ec), o[U(0x1d7)] = U(0x225) + T(0x23e), o[T(0x234)] = function (v, w) {
            return v * w;
        }, o[T(0x201)] = T(0x1e7), o[U(0x21a)] = T(0x20a), o[T(0x21d)] = U(0x242) + U(0x1e3);
        const p = o, r = { [sequelize_1['Op']['is']]: null }, s = {
                'fromMe': !![],
                'messageId': r,
                'status': p[T(0x228)],
                [sequelize_1['Op']['or']]: [
                    { 'scheduleDate': { [sequelize_1['Op'][T(0x207)]]: new Date() } },
                    { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
                ]
            }, t = await Message_1[T(0x223)][T(0x21c)]({
                'where': s,
                'include': [
                    p[T(0x1dc)],
                    {
                        'model': Ticket_1[T(0x223)],
                        'as': p[U(0x214)],
                        'where': {
                            'tenantId': n,
                            [sequelize_1['Op']['or']]: {
                                'status': { [sequelize_1['Op']['ne']]: p[T(0x20b)] },
                                'isFarewellMessage': !![]
                            },
                            'channel': p[U(0x246)],
                            'whatsappId': m['id']
                        },
                        'include': [p[U(0x1dc)]]
                    },
                    {
                        'model': Message_1[U(0x223)],
                        'as': p[T(0x1e8)],
                        'include': [p[T(0x1dc)]]
                    }
                ],
                'order': [[
                        p[T(0x243)],
                        p[T(0x1f7)]
                    ]]
            });
        let u;
        for (const v of t) {
            const w = v, {ticket: x} = w, y = x[T(0x235)][U(0x230)], z = {};
            w[U(0x233)] && (z[T(0x210) + U(0x238)] = w[T(0x233)][U(0x20d)]);
            try {
                if (![
                        p[U(0x213)],
                        p[U(0x222)]
                    ][T(0x202)](w[U(0x22a)]) && w[U(0x219)]) {
                    const F = (-0x2443 * -0x1 + 0xf2a + -0x336d, path_1[T(0x247)])(__dirname, '..', '..', '..', p[U(0x1fc)]), G = (0x219 * -0x1 + 0x74 * -0x2 + -0x301 * -0x1, path_1[T(0x247)])(F, w[U(0x219)]);
                    if (p[U(0x212)](w[T(0x22a)], p[U(0x244)]) || p[T(0x205)](w[T(0x22a)], p[U(0x1d5)])) {
                        const H = {};
                        H[U(0x1ea)] = G, u = await m[T(0x229)][U(0x1dd)](y, H, z);
                    } else {
                        if (p[T(0x205)](w[U(0x22a)], p[T(0x21f)])) {
                            const I = {};
                            I[U(0x1ea)] = G, u = await m[U(0x229)][T(0x1d9)](y, I, z);
                        } else {
                            if (p[T(0x212)](w[T(0x22a)], p[U(0x1f6)])) {
                                const J = {};
                                J[U(0x1ea)] = G, u = await m[U(0x229)][T(0x221)](y, J, z);
                            } else {
                                const K = {};
                                K[U(0x1ea)] = G, u = await m[T(0x229)][T(0x1f0) + 'nt'](y, K, z);
                            }
                        }
                    }
                    logger_1[T(0x20f)][T(0x1ef)](p[T(0x22b)]);
                } else
                    u = await m[U(0x229)][U(0x225) + 'e'](y, w[U(0x1f3)], z), logger_1[U(0x20f)][T(0x1ef)](p[T(0x1d7)]);
                const A = {
                        ...w,
                        ...u,
                        'id': w['id'],
                        'timestamp': p[U(0x234)](u[T(0x245)], -0x1c85 + -0xb26 * 0x1 + 0x1 * 0x2b93),
                        'messageId': u[U(0x22e)],
                        'status': p[T(0x201)],
                        'ack': 0x2
                    }, B = { ...A }, C = {};
                C['id'] = w['id'];
                const D = {};
                D[U(0x23d)] = C, await Message_1[T(0x223)][T(0x22c)](B, D);
                const E = {};
                E[U(0x1e4)] = x[U(0x1e4)], E[T(0x226)] = p[T(0x21a)], E[T(0x204)] = { ...w[U(0x218)] }, E[T(0x204)]['id'] = w['id'], E[T(0x204)][U(0x1ee)] = w[T(0x1ee)], E[T(0x204)][T(0x220)] = A[U(0x220)], E[T(0x204)][U(0x20d)] = u[T(0x22e)], E[T(0x204)][U(0x232)] = p[U(0x201)], E[T(0x204)][U(0x20c)] = 0x2, (0x9ad * -0x1 + 0x1588 + -0xbdb * 0x1, socketEmit_1[T(0x223)])(E), logger_1[U(0x20f)][U(0x1ef)](p[T(0x21d)]), await (-0x1 * -0x16bb + -0x16a * -0x1b + 0x1f7 * -0x1f, SetTicketMessagesAsRead_1[T(0x223)])(x);
            } catch (L) {
                const M = w['id'], N = w[T(0x224)]['id'];
                logger_1[U(0x20f)][U(0x23c)](T(0x23a) + U(0x239) + U(0x231) + n + (U(0x1f2) + '\x20') + N + ')'), logger_1[T(0x20f)][T(0x23c)](U(0x20e) + T(0x215) + T(0x1ff) + M + T(0x209) + L);
            }
        }
    };
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x7 * 0x14b + -0x1 * -0x2138 + -0x1656);
        let h = e[f];
        return h;
    }, b(c, d);
}
exports[Q(0x223)] = SendMessagesSystemWbot;