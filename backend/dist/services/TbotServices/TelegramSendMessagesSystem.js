'use strict';
function a() {
    const V = [
        'HKHVz',
        'YrOzO',
        's/logger',
        'text',
        'includes',
        'e\x20text',
        '\x20message\x20(',
        '../../mode',
        '2095996KYTitM',
        'where',
        'audio',
        'FvuED',
        'payload',
        '7KXadWQ',
        'ers/socket',
        'Ryjnw',
        'e\x20media',
        '4016590zxGaEu',
        'findAll',
        'info',
        'age\x20is\x20(te',
        'telegram',
        'defineProp',
        'sended',
        '67795gTLuhc',
        'default',
        'mediaType',
        'message_id',
        'sendMessag',
        '\x20|\x20Ticket:',
        'ptt',
        'ack',
        'jCqRd',
        'sendVoice',
        'xEJXJ',
        'essage_id',
        'type',
        'XyOql',
        'messageId',
        'chat:ack',
        'source',
        'timestamp',
        'error',
        'date',
        'Aonyj',
        'ROTks',
        'ls/Message',
        'UCmXZ',
        'contact',
        'join',
        'createdAt',
        'HZuCp',
        'WQuiF',
        'mediaUrl',
        '5121639WAmhVg',
        'logger',
        'value',
        'rSrQD',
        'bYlxQ',
        'path',
        'nant:\x20',
        'public',
        'reply_to_m',
        '../../util',
        'ELOJo',
        'video',
        '__importDe',
        'dataValues',
        'ketMessage',
        'Emit',
        'update',
        'Error\x20mess',
        'sequelize',
        'date\x20ok',
        'body',
        'WFMFF',
        'zDnsu',
        'erty',
        'Message\x20Up',
        'sendPhoto',
        'LubKJ',
        '265720UgbKDU',
        '3123714uzMlRH',
        'closed',
        '../../help',
        'mediaName',
        'ls/Ticket',
        'iWeRD',
        'status',
        'ticket',
        'Error\x20send',
        'id:\x20',
        'quotedMsg',
        'sAsRead',
        'LnPcS',
        'ASC',
        '26utiOke',
        'image',
        'tenantId',
        'telegramId',
        'mRDNA',
        'chat',
        'ers/SetTic',
        'hBAgH',
        'sendDocume',
        ')::\x20',
        '145424RTLgAp',
        'lte',
        'fault',
        'pending',
        'vewQG',
        '3jhUNzQ',
        'sendVideo',
        'BDrHo',
        '__esModule'
    ];
    a = function () {
        return V;
    };
    return a();
}
const Q = b, R = b;
(function (c, d) {
    const O = b, P = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(O(0xb0)) / (0x3 * -0x3e3 + -0x4a8 + 0x829 * 0x2) * (-parseInt(P(0x85)) / (0x7ec + -0xc74 + -0x245 * -0x2)) + -parseInt(O(0x94)) / (-0x1cd5 + 0x1648 + 0x690) * (-parseInt(P(0xa0)) / (-0x1663 + 0x3 * 0x225 + 0xff8)) + parseInt(P(0xa9)) / (-0x14 * -0xad + -0xe79 * -0x1 + -0x37f * 0x8) + -parseInt(P(0x77)) / (0x1e8b + 0xd96 + -0x2c1b * 0x1) * (-parseInt(P(0xa5)) / (-0x1 * 0x3ee + 0x18b7 + 0x14c2 * -0x1)) + parseInt(P(0x8f)) / (-0x6 * 0x33b + 0x38 * 0x2 + 0x12fa) + -parseInt(O(0xce)) / (-0x810 + -0x7 * -0x449 + -0x1 * 0x15e6) + parseInt(P(0x76)) / (-0xa * 0x287 + 0x1 * -0x1c0b + -0x3 * -0x11c9);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x5 * -0x287b + 0xa81ab + -0x48c6a));
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x7 * -0x80 + -0x8ec * 0x1 + 0x5d7);
        let h = e[f];
        return h;
    }, b(c, d);
}
var __importDefault = this && this[Q(0xda) + Q(0x91)] || function (c) {
    const S = Q;
    return c && c[S(0x97)] ? c : { 'default': c };
};
const q = {};
q[R(0xd0)] = !![], Object[R(0xae) + R(0x72)](exports, R(0x97), q);
const path_1 = require(Q(0xd3)), sequelize_1 = require(R(0x6d)), SetTicketMessagesAsRead_1 = __importDefault(require(Q(0x79) + R(0x8b) + R(0xdc) + R(0x82))), socketEmit_1 = __importDefault(require(Q(0x79) + R(0xa6) + R(0xdd))), Message_1 = __importDefault(require(Q(0x9f) + R(0xc6))), Ticket_1 = __importDefault(require(R(0x9f) + Q(0x7b))), logger_1 = require(R(0xd7) + Q(0x9a)), SendMessagesSystemWbot = async (m, n) => {
        const T = R, U = Q, o = {};
        o[T(0xc4)] = U(0x92), o[T(0xa3)] = T(0xc8), o[U(0xcb)] = U(0x7e), o[U(0x8c)] = T(0x78), o[T(0x93)] = U(0xad), o[T(0x96)] = U(0x81), o[T(0xd1)] = U(0xca), o[T(0xa7)] = T(0x84), o[T(0xba)] = T(0x8a), o[U(0x89)] = U(0x9b), o[U(0xcc)] = U(0xd5), o[T(0xbd)] = function (v, w) {
            return v === w;
        }, o[T(0x7c)] = T(0xa2), o[U(0x71)] = function (v, w) {
            return v === w;
        }, o[U(0xc7)] = T(0xb6), o[T(0x83)] = U(0x86), o[U(0x75)] = function (v, w) {
            return v === w;
        }, o[U(0x70)] = T(0xd9), o[T(0xd8)] = U(0xb4) + T(0xa8), o[U(0xb8)] = T(0xb4) + U(0x9d), o[T(0x98)] = function (v, w) {
            return v * w;
        }, o[T(0xc5)] = T(0xaf), o[T(0x99)] = U(0xbf), o[T(0xd2)] = U(0x73) + T(0x6e);
        const p = o, r = { [sequelize_1['Op']['is']]: null }, s = {
                'fromMe': !![],
                'messageId': r,
                'status': p[T(0xc4)],
                [sequelize_1['Op']['or']]: [
                    { 'scheduleDate': { [sequelize_1['Op'][U(0x90)]]: new Date() } },
                    { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
                ]
            }, t = await Message_1[T(0xb1)][T(0xaa)]({
                'where': s,
                'include': [
                    p[T(0xa3)],
                    {
                        'model': Ticket_1[T(0xb1)],
                        'as': p[T(0xcb)],
                        'where': {
                            'tenantId': n,
                            [sequelize_1['Op']['or']]: {
                                'status': { [sequelize_1['Op']['ne']]: p[T(0x8c)] },
                                'isFarewellMessage': !![]
                            },
                            'channel': p[T(0x93)],
                            'whatsappId': m['id']
                        },
                        'include': [p[U(0xa3)]]
                    },
                    {
                        'model': Message_1[T(0xb1)],
                        'as': p[T(0x96)],
                        'include': [p[U(0xa3)]]
                    }
                ],
                'order': [[
                        p[T(0xd1)],
                        p[T(0xa7)]
                    ]]
            });
        let u;
        for (const v of t) {
            const w = v, {ticket: x} = w, y = x[T(0xc8)][T(0x88)], z = {};
            w[T(0x81)] && (z[T(0xd6) + U(0xbb)] = w[U(0x81)][U(0xbe)]);
            try {
                if (![
                        p[U(0xba)],
                        p[T(0x89)]
                    ][U(0x9c)](w[T(0xb2)]) && w[U(0x7a)]) {
                    const F = (0x2575 + -0x17cb + -0xdaa, path_1[T(0xc9)])(__dirname, '..', '..', '..', p[U(0xcc)]), G = (-0x2 * -0xe09 + 0x1049 + -0x2c5b, path_1[U(0xc9)])(F, w[T(0x7a)]);
                    if (p[T(0xbd)](w[U(0xb2)], p[U(0x7c)]) || p[U(0x71)](w[T(0xb2)], p[U(0xc7)])) {
                        const H = {};
                        H[U(0xc0)] = G, u = await m[U(0xad)][T(0xb9)](y, H, z);
                    } else {
                        if (p[T(0xbd)](w[U(0xb2)], p[U(0x83)])) {
                            const I = {};
                            I[U(0xc0)] = G, u = await m[U(0xad)][T(0x74)](y, I, z);
                        } else {
                            if (p[U(0x75)](w[U(0xb2)], p[U(0x70)])) {
                                const J = {};
                                J[T(0xc0)] = G, u = await m[U(0xad)][U(0x95)](y, J, z);
                            } else {
                                const K = {};
                                K[T(0xc0)] = G, u = await m[T(0xad)][T(0x8d) + 'nt'](y, K, z);
                            }
                        }
                    }
                    logger_1[T(0xcf)][T(0xab)](p[U(0xd8)]);
                } else
                    u = await m[T(0xad)][T(0xb4) + 'e'](y, w[U(0x6f)], z), logger_1[U(0xcf)][U(0xab)](p[U(0xb8)]);
                const A = {
                        ...w,
                        ...u,
                        'id': w['id'],
                        'timestamp': p[U(0x98)](u[U(0xc3)], -0x2 * 0x346 + -0x22f5 + -0x5d * -0x7d),
                        'messageId': u[U(0xb3)],
                        'status': p[T(0xc5)],
                        'ack': 0x2
                    }, B = { ...A }, C = {};
                C['id'] = w['id'];
                const D = {};
                D[U(0xa1)] = C, await Message_1[T(0xb1)][T(0x6b)](B, D);
                const E = {};
                E[T(0x87)] = x[T(0x87)], E[U(0xbc)] = p[U(0x99)], E[T(0xa4)] = { ...w[U(0xdb)] }, E[T(0xa4)]['id'] = w['id'], E[T(0xa4)][U(0xcd)] = w[T(0xcd)], E[T(0xa4)][U(0xc1)] = A[T(0xc1)], E[T(0xa4)][T(0xbe)] = u[U(0xb3)], E[T(0xa4)][T(0x7d)] = p[T(0xc5)], E[T(0xa4)][T(0xb7)] = 0x2, (0x3 * -0x821 + 0x230a + -0xaa7, socketEmit_1[T(0xb1)])(E), logger_1[U(0xcf)][U(0xab)](p[U(0xd2)]), await (-0x71 * -0x4 + 0x1506 + 0x16ca * -0x1, SetTicketMessagesAsRead_1[U(0xb1)])(x);
            } catch (L) {
                const M = w['id'], N = w[U(0x7e)]['id'];
                logger_1[U(0xcf)][T(0xc2)](T(0x6c) + U(0xac) + T(0xd4) + n + (T(0xb5) + '\x20') + N + ')'), logger_1[T(0xcf)][U(0xc2)](T(0x7f) + U(0x9e) + U(0x80) + M + T(0x8e) + L);
            }
        }
    };
exports[R(0xb1)] = SendMessagesSystemWbot;