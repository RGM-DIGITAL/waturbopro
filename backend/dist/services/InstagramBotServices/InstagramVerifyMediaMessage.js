'use strict';
function a() {
    const R = [
        'LtNHt',
        'image',
        'eStream',
        'imagem',
        'join',
        'erty',
        'stream',
        'bDcLC',
        'áudio',
        '3695377quZdlT',
        'nWQJl',
        'default',
        '4256703zjVgrO',
        '16KhTVzt',
        'update',
        'kpbKb',
        'FLGfL',
        'received',
        'cnRDG',
        'Nsmpg',
        'cyjGz',
        'pipe',
        'axios',
        '4509Nbjock',
        'getTime',
        'error',
        'path',
        'ions',
        'BWvCj',
        'ERROR\x20DONW',
        'pfqtZ',
        'JiQvp',
        'data',
        'item_id',
        '__esModule',
        'image_vers',
        'messageDat',
        'Gmwfp',
        'qXHRi',
        'UaqKB',
        'utKHB',
        'WDHLS',
        'wxdHB',
        'toString',
        'sended',
        'HjyCB',
        'voice_medi',
        'finish',
        'media',
        '816295bNFCAB',
        'reateMessa',
        'ztSRB',
        'zjwXT',
        'ions2',
        'defineProp',
        'geService',
        '../Message',
        'LOAD',
        '4950365fwidhW',
        'aHZml',
        'NtVpc',
        '4|0|1|3|2',
        'pOEbQ',
        'public',
        'PTiyY',
        'applicatio',
        'vWYHl',
        'SVIgN',
        'value',
        'fault',
        'createWrit',
        '8467370uNhXXe',
        'tenantId',
        'media_type',
        'split',
        'kfGFp',
        '4jlyXUK',
        'message',
        'ORVto',
        'TySJI',
        'vídeo',
        'audio_src',
        'item_type',
        'FuufR',
        '3|0|2|4|1',
        'length',
        'tuqtc',
        'EYGlq',
        'url',
        'audio',
        'hQfmX',
        'video',
        '5642214IPMjyq',
        'gRmFw',
        'video_vers',
        'caption',
        'KHhxS',
        'GET',
        'candidates',
        '__importDe',
        'Services/C',
        'arquivo',
        '42jWyThz',
        'text',
        'rUjcS',
        '2|4|3|1|0',
        'rfxXe'
    ];
    a = function () {
        return R;
    };
    return a();
}
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x136c + 0xe * -0x154 + 0x7e4 * 0x5);
        let h = e[f];
        return h;
    }, b(c, d);
}
const D = b, E = b;
(function (c, d) {
    const B = b, C = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(B(0x1b7)) / (-0xaeb * -0x2 + -0x11 * 0x21c + 0xe07) + -parseInt(C(0x181)) / (-0x2 * 0x11fc + 0x2388 + 0x72) * (parseInt(C(0x19d)) / (-0x11b1 + -0x1091 + -0x11b * -0x1f)) + parseInt(C(0x1d2)) / (-0x18a4 + 0x1bbf + 0x317 * -0x1) * (-parseInt(C(0x1c0)) / (-0x1 * 0x11a1 + 0xb01 + 0x6a5)) + parseInt(B(0x177)) / (-0x1 * -0x25c1 + -0xbd9 + -0x19e2) + -parseInt(B(0x18f)) / (-0xca * -0x1e + -0xe3d + -0x968) * (-parseInt(B(0x193)) / (-0x1687 + -0xffe + 0x268d)) + -parseInt(B(0x192)) / (0x2342 + -0x174e + 0x1 * -0xbeb) + parseInt(C(0x1cd)) / (-0x61b * -0x6 + -0x1c53 + -0x845);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x39f39 + -0x6a0dd * -0x1 + -0x4 * 0x8876));
var __importDefault = this && this[D(0x17e) + D(0x1cb)] || function (c) {
    const F = E;
    return c && c[F(0x1a8)] ? c : { 'default': c };
};
const u = {};
u[E(0x1ca)] = !![], Object[E(0x1bc) + E(0x18b)](exports, D(0x1a8), u);
const path_1 = require(D(0x1a0)), fs_1 = require('fs'), axios_1 = __importDefault(require(E(0x19c))), CreateMessageService_1 = __importDefault(require(D(0x1be) + E(0x17f) + E(0x1b8) + D(0x1bd))), getExt = d => {
        const G = D, H = D, e = {};
        e[G(0x1ab)] = function (j, k) {
            return j - k;
        };
        const f = e, g = d[G(0x1d0)]('?'), h = g[-0xbef * -0x1 + -0x3 * 0x5b9 + 0x53c][H(0x1d0)]('/'), i = h[f[H(0x1ab)](h[H(0x170)], -0x14f0 + -0x2535 + 0x3a26)][G(0x1d0)]('.');
        return i[0x4 * 0x9af + -0x24cc + -0x1ef];
    }, downloadFile = async (c, d) => {
        const I = E, J = D, e = {
                'ORVto': I(0x1a3) + I(0x1bf),
                'FLGfL': function (g, h) {
                    return g(h);
                },
                'WDHLS': J(0x1b5),
                'cnRDG': I(0x19f),
                'vWYHl': J(0x17c),
                'pOEbQ': I(0x18c)
            }, f = await (-0x1fc1 + 0x4 * -0x956 + -0x9df * -0x7, axios_1[J(0x191)])({
                'url': c[I(0x1b1)](),
                'method': e[J(0x1c8)],
                'responseType': e[I(0x1c4)]
            });
        await new Promise((g, h) => {
            const K = J, M = J, i = {
                    'nWQJl': e[K(0x1d4)],
                    'gRmFw': function (j, k) {
                        const L = K;
                        return e[L(0x196)](j, k);
                    }
                };
            f[K(0x1a6)][K(0x19b)]((0x6 * 0x1df + -0x5 * -0x2ea + -0x1fc * 0xd, fs_1[K(0x1cc) + M(0x188)])(d))['on'](e[M(0x1af)], async () => g(!![]))['on'](e[K(0x198)], j => {
                const N = K, O = M;
                console[N(0x19f)](i[N(0x190)], j), i[O(0x178)](h, new Error(j));
            });
        });
    }, VerifyMediaMessage = async (d, e, f, g) => {
        const P = E, Q = E, h = {
                'BWvCj': P(0x1c7) + 'n',
                'tuqtc': Q(0x180),
                'SVIgN': function (t, v) {
                    return t === v;
                },
                'kfGFp': function (t, v) {
                    return t !== v;
                },
                'FuufR': Q(0x1d5),
                'kpbKb': Q(0x184),
                'zjwXT': Q(0x189),
                'rUjcS': Q(0x187),
                'PTiyY': function (t, v) {
                    return t(v);
                },
                'bDcLC': function (t, v) {
                    return t === v;
                },
                'JiQvp': Q(0x1c3),
                'LtNHt': function (t, v) {
                    return t(v);
                },
                'UaqKB': P(0x1d6),
                'hQfmX': Q(0x176),
                'pfqtZ': function (t, v) {
                    return t === v;
                },
                'wxdHB': P(0x1b4) + 'a',
                'utKHB': P(0x1da),
                'cyjGz': Q(0x18e),
                'KHhxS': function (t, v) {
                    return t(v);
                },
                'NtVpc': Q(0x174),
                'qXHRi': P(0x1c5),
                'aHZml': function (t, v) {
                    return t === v;
                },
                'HjyCB': function (t, v, w) {
                    return t(v, w);
                },
                'Nsmpg': function (t, v) {
                    return t(v);
                },
                'ztSRB': Q(0x1b2),
                'EYGlq': Q(0x197),
                'rfxXe': function (t, v) {
                    return t || v;
                }
            };
        let i, j, k, l = h[Q(0x1a2)], m = h[Q(0x171)];
        if (h[P(0x1c9)](d[Q(0x1d3)]?.[Q(0x1b6)]?.[Q(0x1cf)], 0x21ba + 0x10d5 * -0x1 + 0x10e4 * -0x1)) {
            if (h[P(0x1d1)](h[Q(0x1d9)], h[P(0x1d9)])) {
                const v = {};
                return v[P(0x191)] = j, g && h[P(0x1a8)] ? i : v;
            } else {
                const v = h[P(0x195)][Q(0x1d0)]('|');
                let w = 0x214f + -0x13 * 0xc9 + -0x1264;
                while (!![]) {
                    switch (v[w++]) {
                    case '0':
                        m = h[Q(0x1ba)];
                        continue;
                    case '1':
                        l = h[P(0x183)];
                        continue;
                    case '2':
                        j = d[P(0x1d3)][Q(0x1b6)];
                        continue;
                    case '3':
                        k = h[Q(0x1c6)](getExt, i[Q(0x173)]);
                        continue;
                    case '4':
                        [i] = d[P(0x1d3)][Q(0x1b6)][P(0x1a9) + Q(0x1bb)][Q(0x17d)];
                        continue;
                    }
                    break;
                }
            }
        }
        if (h[Q(0x18d)](d[Q(0x1d3)]?.[P(0x1b6)]?.[Q(0x1cf)], -0x215f + -0x391 + 0x24f2)) {
            const x = h[Q(0x1a5)][P(0x1d0)]('|');
            let y = 0x2 * -0xa39 + 0x22 + 0x1450;
            while (!![]) {
                switch (x[y++]) {
                case '0':
                    [i] = d[P(0x1d3)][P(0x1b6)][P(0x179) + P(0x1a1)];
                    continue;
                case '1':
                    k = h[Q(0x186)](getExt, i[P(0x173)]);
                    continue;
                case '2':
                    m = h[Q(0x1ad)];
                    continue;
                case '3':
                    l = h[Q(0x175)];
                    continue;
                case '4':
                    j = d[P(0x1d3)][Q(0x1b6)];
                    continue;
                }
                break;
            }
        }
        if (h[Q(0x1a4)](d[P(0x1d3)]?.[Q(0x1d8)], h[Q(0x1b0)])) {
            const z = h[Q(0x1ae)][Q(0x1d0)]('|');
            let A = -0x7 * -0x325 + -0xe33 + 0x4 * -0x1f4;
            while (!![]) {
                switch (z[A++]) {
                case '0':
                    i = d[P(0x1d3)][Q(0x1b4) + 'a'][Q(0x1b6)][P(0x174)];
                    continue;
                case '1':
                    m = h[Q(0x19a)];
                    continue;
                case '2':
                    k = h[P(0x17b)](getExt, i[P(0x1d7)]);
                    continue;
                case '3':
                    j = d[P(0x1d3)][Q(0x1b4) + 'a'][Q(0x1b6)];
                    continue;
                case '4':
                    l = h[Q(0x1c2)];
                    continue;
                }
                break;
            }
        }
        const n = f['id'] + '_' + j['id'] + '_' + new Date()[Q(0x19e)]() + '.' + k, o = (0x19 * 0x6d + -0x136d + 0x8 * 0x119, path_1[Q(0x18a)])(__dirname, '..', '..', '..', h[Q(0x1ac)], n), p = h[P(0x1c1)](d[Q(0x1d3)][Q(0x1d8)], h[Q(0x1b0)]) ? i[Q(0x1d7)] : i[P(0x173)];
        await h[P(0x1b3)](downloadFile, p, o);
        const q = {
            'messageId': h[Q(0x199)](String, d[Q(0x1d3)]?.[Q(0x1a7)]),
            'ticketId': f['id'],
            'contactId': e ? undefined : g['id'],
            'body': d[P(0x1d3)]?.[P(0x182)] || d[Q(0x1d3)]?.[P(0x17a)] || m,
            'fromMe': e,
            'read': e,
            'mediaUrl': n,
            'mediaType': l,
            'quotedMsgId': '',
            'timestamp': new Date()[Q(0x19e)](),
            'status': e ? h[Q(0x1b9)] : h[P(0x172)]
        };
        await f[Q(0x194)]({
            'lastMessage': d[P(0x1d3)]?.[Q(0x182)] || d[Q(0x1d3)]?.[Q(0x17a)] || m,
            'lastMessageAt': new Date()[Q(0x19e)](),
            'answered': h[Q(0x185)](e, ![])
        });
        const r = {};
        r[P(0x1aa) + 'a'] = q, r[P(0x1ce)] = f[Q(0x1ce)];
        const s = await (0x2 * -0xaf9 + 0x878 * 0x1 + 0xd7a, CreateMessageService_1[P(0x191)])(r);
        return s;
    };
exports[D(0x191)] = VerifyMediaMessage;