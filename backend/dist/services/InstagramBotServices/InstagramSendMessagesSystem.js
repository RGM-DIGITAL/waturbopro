'use strict';
const T = b, U = b;
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x1980 + -0x7ed * 0x1 + -0x1 * 0x1091);
        let h = e[f];
        return h;
    }, b(c, d);
}
(function (c, d) {
    const R = b, S = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(R(0x161)) / (-0x113f + 0x1847 + 0x7 * -0x101) * (-parseInt(R(0x15f)) / (-0xaf1 + -0x1fca + 0x2abd)) + -parseInt(R(0x13b)) / (0xc31 + 0x122d + -0x199 * 0x13) * (-parseInt(S(0x17e)) / (-0x1095 + 0x1e38 + 0x13d * -0xb)) + parseInt(R(0x132)) / (-0x3ae * -0x5 + 0x1 * 0x1305 + -0x12b3 * 0x2) * (-parseInt(R(0x119)) / (0x2334 + -0x1 * 0x25f0 + 0x2c2)) + parseInt(R(0x147)) / (-0x2537 + -0x1 * 0x7cc + 0x2d0a) * (-parseInt(S(0x10e)) / (-0x1 * 0xb + -0x1 * 0xc9 + 0x2c * 0x5)) + -parseInt(R(0x158)) / (0x1 * -0xc11 + -0xdeb + -0x1 * -0x1a05) * (parseInt(R(0x111)) / (-0x3 * -0xceb + 0x25 * 0x86 + -0x3a15)) + -parseInt(R(0x106)) / (-0x125 * -0x1f + -0x2d * 0xb + -0x2181) * (parseInt(R(0x153)) / (-0xf9c + -0xd * 0x89 + -0x33b * -0x7)) + parseInt(R(0x144)) / (-0x1e38 + -0x4 * 0x962 + 0x43cd) * (parseInt(R(0x136)) / (-0x3 * 0x73b + 0x130d * -0x1 + -0x7 * -0x5d4));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x1 * 0x4b25f + 0x1 * -0xd5f9d + 0x152742));
var __importDefault = this && this[T(0x145) + U(0x13d)] || function (c) {
    const V = U;
    return c && c[V(0x164)] ? c : { 'default': c };
};
const q = {};
function a() {
    const a0 = [
        'hoto',
        'end',
        'Emit',
        'image',
        'LTeiH',
        'public',
        'timestamp',
        'zqvqi',
        'logger',
        'Mrmvn',
        'sequelize',
        'rZXEu',
        'lte',
        'erty',
        '../../util',
        'age\x20is\x20(te',
        'sended',
        'contact',
        'fs/promise',
        'directThre',
        'error',
        'ack',
        'Roqvc',
        'cPNXe',
        '8lfDsmT',
        'createdAt',
        'info',
        'iRAKb',
        'cRbha',
        'broadcastP',
        'includes',
        's/sleepRan',
        'file',
        'Message\x20Up',
        'ideo',
        'nant:\x20',
        '\x20|\x20Ticket:',
        'qGtCu',
        'ls/Ticket',
        'video',
        'split',
        'default',
        'Error\x20send',
        '11hLSIgT',
        'lDHoB',
        'peg',
        'FcllF',
        '\x20message\x20(',
        'body',
        'PULGd',
        'e\x20text',
        '8SChvAJ',
        'sleepRando',
        'ext',
        '10lbqREA',
        'saveToFile',
        'value',
        'LlxsR',
        'BGySr',
        'UCcIk',
        'audio',
        'sharp',
        '6mnDycW',
        'chat:ack',
        'rjLSm',
        'toFormat',
        'ptt',
        'mediaType',
        'oice',
        'messageId',
        'entity',
        'ticket',
        'dataValues',
        'zaOsJ',
        'toBuffer',
        'WNsNy',
        'mediaName',
        'text',
        'item_id',
        'e\x20media',
        'update',
        'mediaUrl',
        'readFile',
        's/logger',
        ')::\x20',
        'where',
        '../../mode',
        '447880hsDwzi',
        'quotedMsg',
        'tenantId',
        'mUQqx',
        '6135542bCQdbK',
        'wnLQc',
        'broadcastV',
        'date\x20ok',
        'instagramP',
        '1977714VBtbwE',
        'path',
        'fault',
        'ls/Message',
        'mp4',
        'sendMessag',
        'status',
        'yyaCY',
        'id:\x20',
        '26wMmHZZ',
        '__importDe',
        'jpeg',
        '9446717VGYFMq',
        'ASC',
        'EmGFW',
        '../../help',
        'closed',
        'UtYyi',
        'defineProp',
        'chat',
        'join',
        'IZtIg',
        'findAll',
        'pending',
        '5582628YsMdgm',
        'KGfOb',
        'UBUSD',
        'IgPuZ',
        'ers/socket',
        '3518415BWaRQU',
        'Error\x20mess',
        'payload',
        'broadcastT',
        'type',
        'fluent-ffm',
        'instagram',
        '2SWCzze',
        '.mp4',
        '917947umrBjX',
        'log',
        'mTime',
        '__esModule',
        'domTime'
    ];
    a = function () {
        return a0;
    };
    return a();
}
q[U(0x113)] = !![], Object[U(0x14d) + U(0x173)](exports, T(0x164), q);
const promises_1 = require(U(0x178) + 's'), fluent_ffmpeg_1 = __importDefault(require(T(0x15d) + T(0x108))), path_1 = require(U(0x13c)), sequelize_1 = require(T(0x170)), sharp_1 = __importDefault(require(T(0x118))), socketEmit_1 = __importDefault(require(U(0x14a) + U(0x157) + T(0x168))), Message_1 = __importDefault(require(U(0x131) + T(0x13e))), Ticket_1 = __importDefault(require(T(0x131) + T(0x18c))), logger_1 = require(U(0x174) + T(0x12e)), sleepRandomTime_1 = require(U(0x174) + T(0x185) + U(0x165)), SendMessagesSystemWbot = async (l, m) => {
        const W = T, X = T, n = {
                'PULGd': W(0x13f),
                'lDHoB': W(0x17a),
                'LlxsR': W(0x167),
                'rZXEu': W(0x152),
                'cRbha': W(0x177),
                'zaOsJ': W(0x122),
                'BGySr': X(0x14b),
                'zqvqi': W(0x15e),
                'iRAKb': W(0x133),
                'UCcIk': X(0x17f),
                'wnLQc': W(0x148),
                'qGtCu': W(0x14e),
                'cPNXe': X(0x128),
                'KGfOb': X(0x16b),
                'WNsNy': function (t, u) {
                    return t === u;
                },
                'IgPuZ': W(0x117),
                'UtYyi': function (t, u) {
                    return t === u;
                },
                'rjLSm': W(0x11d),
                'LTeiH': X(0x169),
                'IZtIg': function (t, u) {
                    return t === u;
                },
                'yyaCY': X(0x102),
                'UBUSD': X(0x140) + X(0x12a),
                'Mrmvn': X(0x140) + X(0x10d),
                'EmGFW': X(0x176),
                'FcllF': W(0x11a),
                'mUQqx': W(0x187) + W(0x139),
                'Roqvc': function (t, u) {
                    return t(u);
                }
            }, o = { [sequelize_1['Op']['is']]: null }, p = {
                'fromMe': !![],
                'messageId': o,
                'status': n[X(0x171)],
                [sequelize_1['Op']['or']]: [
                    { 'scheduleDate': { [sequelize_1['Op'][W(0x172)]]: new Date() } },
                    { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
                ]
            }, r = await Message_1[X(0x104)][W(0x151)]({
                'where': p,
                'include': [
                    n[X(0x182)],
                    {
                        'model': Ticket_1[X(0x104)],
                        'as': n[W(0x124)],
                        'where': {
                            'tenantId': m,
                            [sequelize_1['Op']['or']]: {
                                'status': { [sequelize_1['Op']['ne']]: n[W(0x115)] },
                                'isFarewellMessage': !![]
                            },
                            'channel': n[X(0x16d)],
                            'whatsappId': l['id']
                        },
                        'include': [n[W(0x182)]]
                    },
                    {
                        'model': Message_1[X(0x104)],
                        'as': n[W(0x181)],
                        'include': [n[X(0x182)]]
                    }
                ],
                'order': [[
                        n[X(0x116)],
                        n[X(0x137)]
                    ]]
            });
        let s;
        for (const t of r) {
            const u = t, {ticket: v} = u, w = v[W(0x177)][W(0x13a) + 'K'], x = await l[W(0x121)][W(0x179) + 'ad']([w]);
            try {
                if (![
                        n[W(0x18b)],
                        n[X(0x17d)]
                    ][X(0x184)](u[X(0x11e)]) && u[W(0x127)]) {
                    const E = (0x1 * -0x1a39 + -0xe12 + -0x284b * -0x1, path_1[W(0x14f)])(__dirname, '..', '..', '..', n[W(0x154)]), F = (-0x3 * 0xba9 + 0x1b6c + -0xf * -0x81, path_1[W(0x14f)])(E, u[W(0x127)]), G = await (0x1 * 0x1c14 + 0x833 * 0x3 + -0x34ad, promises_1[X(0x12d)])(F);
                    console[X(0x162)](F);
                    if (n[X(0x126)](u[X(0x11e)], n[X(0x156)]) || n[X(0x14c)](u[W(0x11e)], n[X(0x11b)])) {
                        const H = u[W(0x127)][W(0x103)]('.'), I = (0x3 * -0xbd9 + -0x16ad + 0x3a38, path_1[X(0x14f)])(E, H[0x72a + 0x8 * 0x400 + 0x12 * -0x22d] + X(0x160));
                        await new Promise((L, M) => {
                            const Y = W, Z = X;
                            (0x1a6a + -0x43 * -0x79 + -0x3a15, fluent_ffmpeg_1[Y(0x104)])(F)[Y(0x11c)](n[Z(0x10c)])['on'](n[Z(0x107)], N => M(N))['on'](n[Y(0x114)], () => L(!![]))[Y(0x112)](I);
                        });
                        const J = await (-0x1e6b + -0x1c95 + 0x3b00, promises_1[X(0x12d)])(I), K = {};
                        K[W(0x186)] = J, s = await x[W(0x138) + W(0x11f)](K);
                    }
                    if (n[X(0x126)](u[W(0x11e)], n[X(0x16a)])) {
                        const L = await (0xac7 * -0x2 + 0x1319 + 0x275, sharp_1[X(0x104)])(G)[X(0x146)]()[W(0x125)](), M = {};
                        M[W(0x186)] = L, s = await x[W(0x183) + X(0x166)](M);
                    }
                    if (n[X(0x150)](u[X(0x11e)], n[W(0x142)])) {
                        const N = {};
                        N[X(0x102)] = G, s = await x[X(0x138) + X(0x188)](N);
                    }
                    logger_1[X(0x16e)][X(0x180)](n[W(0x155)]);
                }
                [
                    n[X(0x18b)],
                    n[X(0x17d)]
                ][X(0x184)](u[W(0x11e)]) && !u[W(0x127)] && (s = await x[W(0x15b) + X(0x110)](u[W(0x10b)]), logger_1[X(0x16e)][W(0x180)](n[X(0x16f)]));
                const y = {
                    ...u,
                    ...s
                };
                y['id'] = u['id'], y[W(0x16c)] = u[X(0x16c)], y[W(0x120)] = s[W(0x129)], y[X(0x141)] = n[X(0x149)], y[X(0x17b)] = 0x2;
                const z = y, A = { ...z }, B = {};
                B['id'] = u['id'];
                const C = {};
                C[W(0x130)] = B, await Message_1[W(0x104)][X(0x12b)](A, C);
                const D = {};
                D[X(0x134)] = v[X(0x134)], D[W(0x15c)] = n[X(0x109)], D[W(0x15a)] = { ...u[X(0x123)] }, D[W(0x15a)][X(0x12c)] = u[W(0x12c)], D[W(0x15a)]['id'] = u['id'], D[W(0x15a)][W(0x16c)] = u[X(0x16c)], D[W(0x15a)][X(0x120)] = s[X(0x129)], D[W(0x15a)][W(0x141)] = n[X(0x149)], D[W(0x15a)][X(0x17b)] = 0x2, (0x17 * -0xc + -0x20e1 * 0x1 + 0x21f5, socketEmit_1[W(0x104)])(D), logger_1[X(0x16e)][X(0x180)](n[X(0x135)]), await (0x1 * 0xc66 + 0x1 * -0x1f4e + 0x12e8, sleepRandomTime_1[W(0x10f) + W(0x163)])({
                    'minMilliseconds': n[W(0x17c)](Number, -0xdcd + 0x16e9 + -0xa6 * 0x2),
                    'maxMilliseconds': n[W(0x17c)](Number, 0x3 * -0x693 + 0x7f0 + 0x1781)
                });
            } catch (O) {
                const P = u['id'], Q = u[W(0x122)]['id'];
                logger_1[W(0x16e)][X(0x17a)](W(0x159) + X(0x175) + W(0x189) + m + (W(0x18a) + '\x20') + Q + ')'), logger_1[W(0x16e)][X(0x17a)](W(0x105) + W(0x10a) + W(0x143) + P + W(0x12f) + O);
            }
        }
    };
exports[U(0x104)] = SendMessagesSystemWbot;