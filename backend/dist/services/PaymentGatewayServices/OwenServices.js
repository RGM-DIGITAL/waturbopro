'use strict';
const E = b, F = b;
(function (c, d) {
    const C = b, D = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(C(0x176)) / (0x17da + -0x21 * 0x43 + -0xb1 * 0x16) + parseInt(D(0x14f)) / (-0x117f + 0x3 * -0x452 + 0x1e77) * (parseInt(C(0x15b)) / (-0x23e1 + -0x6 * 0x3ce + 0x3ab8)) + -parseInt(D(0x145)) / (0x1 * 0x4be + 0x15aa + 0x233 * -0xc) * (parseInt(C(0x158)) / (0x9ce + 0x1cfe + 0xced * -0x3)) + parseInt(C(0x183)) / (-0x163b + -0x5 * -0x4c7 + -0x1a2) * (parseInt(D(0x1a7)) / (-0x1ca * -0x7 + -0x4a8 + 0xdf * -0x9)) + parseInt(C(0x191)) / (0x74f * 0x1 + -0x65c + -0xeb) + -parseInt(D(0x198)) / (0x643 + 0x1eff + 0xd * -0x2dd) + parseInt(D(0x173)) / (0x1a48 + -0x19e0 * 0x1 + 0x5e * -0x1) * (parseInt(C(0x157)) / (0x5eb + -0x9 * 0x265 + 0xfad * 0x1));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x25 * -0x4e7 + -0x13559 * 0x1 + 0x78232));
var __importDefault = this && this[E(0x1a9) + F(0x168)] || function (c) {
    const G = E;
    return c && c[G(0x161)] ? c : { 'default': c };
};
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0xa75 + 0x73 + 0xb47);
        let h = e[f];
        return h;
    }, b(c, d);
}
function a() {
    const L = [
        's/logger',
        'logger',
        '/api/v1/qr',
        'owenSecret',
        '../../erro',
        'dhXPJ',
        'rs/AppErro',
        'eral',
        'reload',
        'default',
        '9429250fIwdnK',
        'qrcode',
        'axios',
        '85054xcBrhs',
        'get',
        'ncontrado,',
        't\x20found',
        'il.com.br',
        'owenWebhoo',
        'Problema\x20e',
        'include',
        'where',
        'valor',
        'xChIM',
        'ers/CheckS',
        'Key',
        '4938SOojLD',
        'tenantId',
        'dueDate',
        'tenant',
        '-mainchann',
        'setDate',
        'APPROVED',
        'YhJwl',
        'Invoice\x20no',
        'CONCLUIDA',
        'split',
        'toFixed',
        'qrcodeId',
        'original',
        '972232lYjdCL',
        'dinamico',
        'm\x20o\x20suport',
        'defineProp',
        '../../libs',
        'https://pi',
        'contato\x20co',
        '2361339wHqosZ',
        'error',
        'super',
        'UYDUq',
        '\x20entre\x20em\x20',
        'ZjoWy',
        'findOne',
        'ftlkc',
        'owenToken',
        'WmVag',
        'model',
        'paid',
        'yTIBP',
        'owenCnpj',
        'tenant-',
        '224vVMpnj',
        '-payment',
        '__importDe',
        'getDate',
        'json',
        'getIO',
        'open',
        '/socket',
        'body',
        '158236VOXvwy',
        'on\x20error:\x20',
        'XeLDO',
        'stringify',
        'x.owenbras',
        'erty',
        'findByPk',
        'uYquV',
        'ueKaX',
        'owen',
        '330086jVrQYg',
        '../../util',
        'status',
        'ettingsGen',
        'WTGkL',
        'emit',
        'value',
        '../../mode',
        '11HAJwCh',
        '90buOyvq',
        'enFLE',
        '../../help',
        '3YxIMWo',
        'update',
        'suIXt',
        'toISOStrin',
        'owenCreate',
        '#Fatura:',
        '__esModule',
        'data',
        'xsTHC',
        'ls/Tenant',
        'txId',
        'ls/Invoice',
        'Subscripti',
        'fault'
    ];
    a = function () {
        return L;
    };
    return a();
}
const k = {};
k[E(0x155)] = !![], Object[E(0x194) + F(0x14a)](exports, F(0x161), k), exports[E(0x15f) + E(0x167) + 'on'] = exports[E(0x17b) + 'k'] = void (0x1ba9 * 0x1 + -0xd86 + -0xe23);
const axios_1 = __importDefault(require(E(0x175))), CheckSettingsGeneral_1 = __importDefault(require(E(0x15a) + F(0x181) + E(0x152) + E(0x170))), logger_1 = require(E(0x150) + E(0x169)), socket_1 = require(E(0x195) + E(0x1ae)), Invoices_1 = __importDefault(require(E(0x156) + E(0x166) + 's')), Tenant_1 = __importDefault(require(E(0x156) + F(0x164))), AppError_1 = __importDefault(require(F(0x16d) + F(0x16f) + 'r')), owenBaseURL = E(0x196) + E(0x149) + E(0x17a), owenWebhook = async (l, m) => {
        const H = F, I = E, n = {};
        n[H(0x1a1)] = function (r, s) {
            return r === s;
        }, n[H(0x15d)] = I(0x189), n[H(0x163)] = H(0x1ad), n[H(0x19d)] = H(0x186), n[I(0x153)] = function (r, s) {
            return r < s;
        }, n[H(0x147)] = function (r, s) {
            return r + s;
        }, n[I(0x159)] = I(0x1a3), n[H(0x19b)] = I(0x19a), n[H(0x180)] = I(0x18c);
        const o = n, {data: p} = l[I(0x1af)];
        if (o[I(0x1a1)](p[H(0x151)], o[H(0x15d)])) {
            const {qrcodeId: r} = p, s = {};
            s[I(0x165)] = r, s[H(0x151)] = o[I(0x163)];
            const t = {};
            t[H(0x1a2)] = Tenant_1[H(0x172)], t['as'] = o[H(0x19d)];
            const u = {};
            u[I(0x17e)] = s, u[I(0x17d)] = [t];
            const v = await Invoices_1[I(0x172)][H(0x19e)](u);
            if (!v || o[I(0x153)](p[H(0x17f)], v[H(0x155)])) {
                const B = {};
                return B['ok'] = !![], m[H(0x1ab)](B);
            }
            const w = new Date(v[H(0x186)][I(0x185)]);
            w[I(0x188)](o[H(0x147)](w[I(0x1aa)](), 0x819 * 0x4 + 0x1e9d + -0x1 * 0x3ee3));
            const x = w[I(0x15e) + 'g']()[H(0x18d)]('T')[-0xddb * -0x1 + -0x13ab + 0x5d0], y = {};
            y[H(0x185)] = x, await v[H(0x186)][I(0x15c)](y);
            const z = {};
            z[I(0x151)] = o[H(0x159)], await v[H(0x15c)](z), await v[I(0x186)][I(0x171)]();
            const A = (-0x30 * -0x73 + 0x45a + -0x6b * 0x3e, socket_1[I(0x1ac)])();
            A['to'](H(0x1a6) + v[I(0x184)] + (I(0x187) + 'el'))['to'](o[I(0x19b)])[I(0x154)](I(0x1a6) + v[I(0x184)] + H(0x1a8), {
                'action': o[I(0x180)],
                'tenant': v[I(0x186)],
                'invoiceId': v['id']
            });
        }
        const q = {};
        return q['ok'] = !![], m[H(0x1ab)](q);
    };
exports[F(0x17b) + 'k'] = owenWebhook;
const owenCreateSubscription = async (g, h) => {
    const J = F, K = E, i = {};
    i[J(0x18a)] = K(0x1a5), i[J(0x19f)] = K(0x1a0), i[K(0x14c)] = J(0x16c) + K(0x182), i[J(0x1a4)] = K(0x18b) + J(0x179), i[K(0x14d)] = K(0x14e), i[J(0x16e)] = J(0x17c) + J(0x178) + J(0x19c) + J(0x197) + K(0x193) + 'e!';
    const j = i, {
            price: l,
            invoiceId: m
        } = g[K(0x1af)], n = {
            'params': {
                'valor': l[K(0x18e)]([0x186e + 0xd * -0x212 + 0x27e]),
                'minutos': 0x5,
                'mensagem': K(0x160) + m,
                'user': await (-0x1f0b + 0xe24 + 0x1 * 0x10e7, CheckSettingsGeneral_1[K(0x172)])(j[J(0x18a)]),
                'password': await (0x2 * 0x10b9 + 0x205 + 0x1 * -0x2377, CheckSettingsGeneral_1[J(0x172)])(j[J(0x19f)]),
                'secretkey': await (-0xd * -0x1c4 + 0x29 * 0x2d + -0x1e29, CheckSettingsGeneral_1[K(0x172)])(j[J(0x14c)])
            }
        };
    try {
        const o = await Invoices_1[K(0x172)][K(0x14b)](m);
        if (!o)
            throw new Error(j[K(0x1a4)]);
        const p = await axios_1[K(0x172)][K(0x177)](owenBaseURL + (K(0x16b) + J(0x192)), n);
        o[K(0x15c)]({
            'txId': p[K(0x162)][J(0x162)][J(0x18f)],
            'payGw': j[K(0x14d)],
            'payGwData': JSON[K(0x148)](p[J(0x162)][K(0x162)])
        });
        const q = {};
        q[J(0x174)] = p[J(0x162)][J(0x162)][J(0x174)];
        const r = {};
        r[K(0x190)] = l;
        const s = {};
        return s[J(0x174)] = q, s[K(0x17f)] = r, h[K(0x1ab)](s);
    } catch (t) {
        logger_1[J(0x16a)][K(0x199)](K(0x15f) + J(0x167) + K(0x146) + t);
        throw new AppError_1[(K(0x172))](j[J(0x16e)], -0x14b * 0xa + 0x1c3e + -0x14 * 0xb0);
    }
};
exports[E(0x15f) + E(0x167) + 'on'] = owenCreateSubscription;