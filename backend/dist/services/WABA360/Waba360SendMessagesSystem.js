'use strict';
const C = b, D = b;
(function (c, d) {
    const A = b, B = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(A(0x176)) / (0x6de + 0xe3 * -0x10 + 0x753) + -parseInt(A(0x1ac)) / (-0x19 * 0x65 + 0x1f53 + -0x1574) * (parseInt(B(0x165)) / (-0x2090 + -0xc41 * 0x1 + -0x13 * -0x25c)) + parseInt(B(0x179)) / (0xe9 * -0xd + 0xbf * -0x25 + 0x4 * 0x9dd) * (parseInt(B(0x15b)) / (-0x26 * -0x50 + 0x6e8 + -0x3 * 0x641)) + -parseInt(B(0x16a)) / (-0x2308 + 0x6 * 0x306 + 0x1b1 * 0xa) + parseInt(B(0x19a)) / (-0x1 * 0x1a93 + 0x43 * 0x94 + -0xc22) * (parseInt(B(0x16b)) / (0xbcb + 0xaa + -0xc6d)) + -parseInt(B(0x1b7)) / (0x123f + -0x1 * -0x135b + -0x2591) + -parseInt(A(0x166)) / (0x1b6 + -0x1 * -0x26dc + -0x4 * 0xa22) * (-parseInt(B(0x168)) / (0x9fb + 0x44 * 0x75 + 0x177 * -0x1c));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x67763 + -0x415ff + 0x3f89 * 0x6));
var __importDefault = this && this[C(0x18b) + C(0x18a)] || function (c) {
    const E = D;
    return c && c[E(0x18e)] ? c : { 'default': c };
};
function a() {
    const J = [
        '363407iKYCrW',
        'default',
        '1109544QqsNOI',
        '40TvpdJZ',
        'applicatio',
        'nnyEF',
        'lte',
        'where',
        'dataValues',
        'chat',
        'VzcwS',
        'JInpm',
        'erty',
        'mediaType',
        '96078OTtxSS',
        'jUQkE',
        '360',
        '7988aitkaZ',
        'text',
        'defineProp',
        'hVAFp',
        'vvEcR',
        'type',
        'sended',
        'status',
        'ticket',
        'ezqNN',
        'UayNj',
        'WVYZt',
        'ers/socket',
        'SBznv',
        'sCqot',
        'ls/Whatsap',
        'sAsRead',
        'fault',
        '__importDe',
        'findAll',
        'document',
        '__esModule',
        '../../help',
        'mediaName',
        '../../mode',
        'qkazR',
        'video',
        'audio',
        'nDkkL',
        'pending',
        'MEKWn',
        'RbdhR',
        'wabaMediaI',
        '673743JymyGb',
        'EwRFW',
        'zqhHm',
        'messageId',
        'ers/SetTic',
        'value',
        'vTxGx',
        'kBRLs',
        'XeZav',
        'ls/Ticket',
        'Azosh',
        'ASC',
        'GtDyZ',
        'quotedMsg',
        'number',
        'Message\x20Up',
        'messages',
        'VQmYg',
        '166sJRRjj',
        'HkFNo',
        'apiKey',
        'MMbbn',
        'contact',
        'body',
        'CDEsB',
        'BvNur',
        'voice',
        'caption',
        'bXTAg',
        '693999ILLNBN',
        'whatsapp',
        'cQCZZ',
        'sequelize',
        'TFAlz',
        'ls/Message',
        'createdAt',
        'dYiFC',
        'JgxXf',
        'ack',
        'kUOlI',
        'mediaUrl',
        'qyIuo',
        'message',
        's/logger',
        'ZHwdd',
        'age',
        'info',
        'hfGJq',
        'VCLPr',
        'chat:ack',
        'WXiBC',
        'includes',
        'tenantId',
        'logger',
        'LXoBX',
        'KGgzi',
        'update',
        'payload',
        './SentMess',
        'ketMessage',
        'byUvl',
        '../../util',
        'CBiUT',
        '365HOFUeK',
        'Emit',
        'individual',
        'BqKku',
        'waba',
        'image',
        'date\x20ok',
        'timestamp',
        'HBcKv',
        'LeIZH',
        '14883FGFccT',
        '120DbujBz',
        'tokenAPI'
    ];
    a = function () {
        return J;
    };
    return a();
}
const m = {};
m[C(0x19f)] = !![], Object[D(0x17b) + D(0x174)](exports, D(0x18e), m);
const sequelize_1 = require(C(0x1ba)), SetTicketMessagesAsRead_1 = __importDefault(require(D(0x18f) + D(0x19e) + C(0x157) + D(0x189))), socketEmit_1 = __importDefault(require(D(0x18f) + C(0x185) + D(0x15c))), Message_1 = __importDefault(require(D(0x191) + C(0x1bc))), Ticket_1 = __importDefault(require(D(0x191) + C(0x1a3))), Whatsapp_1 = __importDefault(require(D(0x191) + D(0x188) + 'p')), logger_1 = require(D(0x159) + C(0x1c5)), SentMessage_1 = __importDefault(require(C(0x156) + C(0x1c7))), buildWabaMessage360 = async (h, i) => {
        const F = C, G = D, j = {
                'SBznv': F(0x193),
                'qkazR': G(0x160),
                'WXiBC': F(0x194),
                'BqKku': function (l, o) {
                    return l(o);
                },
                'kBRLs': G(0x15d),
                'ezqNN': F(0x17a),
                'byUvl': function (l, o) {
                    return l === o;
                },
                'qyIuo': G(0x16c) + 'n',
                'nnyEF': function (l, o) {
                    return l === o;
                },
                'JInpm': G(0x18d),
                'MMbbn': function (l, o) {
                    return l !== o;
                },
                'hVAFp': G(0x187),
                'vvEcR': function (l, o) {
                    return l !== o;
                },
                'VQmYg': G(0x1bf),
                'HkFNo': function (l, o) {
                    return l === o;
                },
                'hfGJq': F(0x1b4),
                'KGgzi': F(0x1b9),
                'VCLPr': F(0x1a6),
                'nDkkL': G(0x171),
                'TFAlz': function (l, o) {
                    return l === o;
                },
                'dYiFC': function (l, o) {
                    return l !== o;
                },
                'VzcwS': F(0x183)
            };
        let k = {
            'timestamp': j[G(0x15e)](String, h[F(0x162)]),
            'recipient_type': j[F(0x1a1)],
            'to': i,
            'type': j[F(0x182)]
        };
        if (j[G(0x158)](h[G(0x175)], j[G(0x1c3)]) || j[F(0x16d)](h[F(0x175)], j[F(0x173)])) {
            if (j[G(0x1af)](j[G(0x17c)], j[G(0x17c)])) {
                const o = {};
                o['id'] = j[G(0x199) + 'd'], o[G(0x1b5)] = k[F(0x1b1)] || l[F(0x190)] || '';
                const p = { ...i };
                p[G(0x17e)] = j[G(0x186)], p[F(0x193)] = o, h = p;
            } else {
                const o = {};
                o['id'] = h[G(0x199) + 'd'], o[G(0x1b5)] = h[G(0x1b1)] || h[G(0x190)] || '' || '', k = {
                    ...k,
                    'type': j[G(0x173)],
                    'document': o
                };
            }
        }
        if (j[G(0x16d)](h[G(0x175)], j[F(0x192)])) {
            const p = {};
            p['id'] = h[F(0x199) + 'd'], p[F(0x1b5)] = h[G(0x1b1)] || h[G(0x190)] || '', k = {
                ...k,
                'type': j[F(0x192)],
                'image': p
            };
        }
        if (j[G(0x16d)](h[G(0x175)], j[G(0x186)])) {
            if (j[F(0x17d)](j[F(0x1ab)], j[F(0x1ab)])) {
                const r = {};
                r[F(0x1b1)] = h[G(0x1b1)];
                const s = { ...g };
                s[F(0x17a)] = r, s = s;
            } else {
                const r = {};
                r['id'] = h[F(0x199) + 'd'], r[F(0x1b5)] = h[F(0x1b1)] || h[G(0x190)] || '', k = {
                    ...k,
                    'type': j[G(0x186)],
                    'video': r
                };
            }
        }
        if (j[G(0x158)](h[G(0x175)], j[F(0x1cc)]) || j[G(0x1ad)](h[F(0x175)], j[G(0x1c9)])) {
            if (j[F(0x1af)](j[F(0x1d1)], j[F(0x1ca)])) {
                const s = {};
                s['id'] = h[F(0x199) + 'd'], s[F(0x1b5)] = h[G(0x1b1)] || h[G(0x190)] || '', k = {
                    ...k,
                    'type': j[F(0x1cc)],
                    'audio': s
                };
            } else {
                const u = {};
                u['id'] = j[F(0x199) + 'd'], u[F(0x1b5)] = k[F(0x1b1)] || l[F(0x190)] || '';
                const v = { ...i };
                v[F(0x17e)] = j[F(0x192)], v[F(0x160)] = u, v = v;
            }
        }
        if (j[G(0x158)](h[F(0x175)], j[G(0x195)]) || j[F(0x1bb)](h[F(0x175)], j[F(0x182)])) {
            if (j[G(0x1be)](j[F(0x172)], j[F(0x172)])) {
                const v = {};
                v['id'] = j[G(0x199) + 'd'], v[G(0x1b5)] = k[G(0x1b1)] || l[G(0x190)] || '';
                const w = { ...i };
                w[F(0x17e)] = j[F(0x1cc)], w[G(0x194)] = v, w = w;
            } else {
                const v = {};
                v[G(0x1b1)] = h[G(0x1b1)], k = {
                    ...k,
                    'text': v
                };
            }
        }
        return k;
    }, n = { [sequelize_1['Op']['is']]: null }, where = {
        'fromMe': !![],
        'messageId': n,
        'status': D(0x196),
        [sequelize_1['Op']['or']]: [
            { 'scheduleDate': { [sequelize_1['Op'][C(0x16e)]]: new Date() } },
            { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
        ]
    }, Waba360SendMessagesSystem = async i => {
        const H = D, I = D, j = {
                'zqhHm': H(0x1b0),
                'ZHwdd': I(0x181),
                'XeZav': H(0x15f),
                'CBiUT': I(0x1b8),
                'BvNur': I(0x178),
                'jUQkE': H(0x1a7),
                'MEKWn': H(0x1bd),
                'EwRFW': I(0x1a5),
                'HBcKv': function (l, o) {
                    return l !== o;
                },
                'kUOlI': H(0x1b2),
                'Azosh': function (l, o) {
                    return l(o);
                },
                'LeIZH': I(0x17a),
                'bXTAg': H(0x171),
                'LXoBX': function (l, o, p) {
                    return l(o, p);
                },
                'WVYZt': H(0x17f),
                'RbdhR': H(0x1cb),
                'vTxGx': I(0x1a9) + H(0x161)
            }, k = await Message_1[H(0x169)][I(0x18c)]({
                'where': where,
                'include': [
                    j[H(0x19c)],
                    {
                        'model': Ticket_1[I(0x169)],
                        'as': j[H(0x1c6)],
                        'where': {
                            'tenantId': i[I(0x1ce)],
                            'channel': j[I(0x1a2)]
                        },
                        'include': [
                            j[I(0x19c)],
                            {
                                'model': Whatsapp_1[I(0x169)],
                                'as': j[I(0x15a)],
                                'where': {
                                    'id': i['id'],
                                    'type': j[I(0x1a2)],
                                    'wabaBSP': j[H(0x1b3)]
                                }
                            }
                        ]
                    },
                    {
                        'model': Message_1[H(0x169)],
                        'as': j[I(0x177)],
                        'include': [j[H(0x19c)]]
                    }
                ],
                'order': [[
                        j[H(0x197)],
                        j[I(0x19b)]
                    ]]
            });
        for (const l of k) {
            if (j[H(0x163)](j[H(0x1c1)], j[H(0x1c1)])) {
                const p = {};
                return p[H(0x169)] = j, g && h[I(0x18e)] ? i : p;
            } else {
                const {ticket: p} = l, q = j[H(0x1a4)](String, p[I(0x1b0)][I(0x1a8)]);
                if (![
                        j[H(0x164)],
                        j[I(0x1b6)]
                    ][H(0x1cd)](l[H(0x175)]) && l[I(0x1c2)] && !l[I(0x199) + 'd']) {
                }
                const r = await j[H(0x1d0)](buildWabaMessage360, l, q), s = {};
                s[H(0x1c4)] = r, s[I(0x1ae)] = i[H(0x167)];
                const t = await (-0xd7 * 0xf + 0x128 + 0xb71, SentMessage_1[H(0x169)])(s), u = { ...l };
                u[H(0x19d)] = t[H(0x1aa)][-0x1ffd + -0x1755 + -0x92 * -0x61]['id'], u[H(0x180)] = j[I(0x184)], u[I(0x1c0)] = 0x2;
                const v = u, w = { ...v }, x = {};
                x['id'] = l['id'];
                const y = {};
                y[H(0x16f)] = x, await Message_1[I(0x169)][I(0x154)](w, y);
                const z = {};
                z[I(0x1ce)] = p[H(0x1ce)], z[H(0x17e)] = j[H(0x198)], z[I(0x155)] = { ...v[H(0x170)] }, z[I(0x155)][I(0x1c2)] = l[H(0x1c2)], z[I(0x155)][H(0x19d)] = v[I(0x19d)], z[I(0x155)][I(0x180)] = j[I(0x184)], z[I(0x155)][H(0x1c0)] = 0x2, (0xbc9 + -0x18ca + 0xd01, socketEmit_1[H(0x169)])(z), logger_1[H(0x1cf)][H(0x1c8)](j[H(0x1a0)]), await (0x1 * 0x245b + -0x3ab * 0x4 + -0x15af, SetTicketMessagesAsRead_1[H(0x169)])(p);
            }
        }
    };
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x157b + 0x2392 * -0x1 + 0x3a61);
        let h = e[f];
        return h;
    }, b(c, d);
}
exports[C(0x169)] = Waba360SendMessagesSystem;