'use strict';
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x240a + 0x47b * -0x8 + 0x48f2);
        let h = e[f];
        return h;
    }, b(c, d);
}
const B = b, C = b;
(function (c, d) {
    const z = b, A = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(z(0x139)) / (0x29 * 0x22 + 0x9d5 * -0x3 + -0x1 * -0x180e) + parseInt(A(0x13c)) / (-0x1fb5 + -0x1 * 0x1a2d + -0x1 * -0x39e4) * (-parseInt(z(0x15e)) / (0x84f + 0x1 * 0x17ad + 0x665 * -0x5)) + parseInt(z(0x135)) / (0x1e3 * -0xb + -0x4e5 + -0x291 * -0xa) + parseInt(z(0x11e)) / (-0x1 * 0xecf + -0x23cb + 0x329f * 0x1) * (parseInt(A(0x16a)) / (-0xb4d + 0x15f0 + -0xa9d)) + parseInt(A(0x12d)) / (-0x1 * -0x19ad + 0x965 * 0x1 + -0x230b * 0x1) * (-parseInt(A(0x120)) / (-0x1 * 0x8eb + 0x157e + 0xa9 * -0x13)) + parseInt(A(0x178)) / (0xd5 * 0x1f + 0x18e7 + 0x9 * -0x5a1) + parseInt(A(0x115)) / (-0x29 * 0x53 + 0xc2 * -0x2 + 0x1 * 0xed9);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x97fb7 + 0x610 * -0x124 + 0x1 * 0x85b44));
function a() {
    const I = [
        'ketMessage',
        'mediaType',
        'default',
        'agCYb',
        'type',
        'number',
        'defineProp',
        'whatsapp',
        'ls/Message',
        'sequelize',
        'WWXXF',
        'tuixj',
        '24918330rYaOia',
        'ls/Ticket',
        'logger',
        'audio',
        'lte',
        'Message\x20Up',
        'timestamp',
        'payload',
        'chat:ack',
        '5MjppeJ',
        'body',
        '1849504UEtsbS',
        'vANJJ',
        'NTUdm',
        'chat',
        'UzUvl',
        'Ndrxy',
        'includes',
        's/logger',
        'OpbFX',
        'tenantId',
        'quotedMsg',
        'document',
        'ers/socket',
        '35DjWgYm',
        'video',
        './SentMess',
        'update',
        '__esModule',
        'age',
        'ZGsip',
        'Emit',
        '3004236mPsxIZ',
        'date\x20ok',
        'caption',
        'messages',
        '1075307xAdwFD',
        'rYXpw',
        'text',
        '24lTZEBM',
        'image',
        'KOClI',
        '360',
        'rbtcr',
        'erty',
        'fdqXc',
        'Mjpcv',
        'contact',
        'ticket',
        '../../mode',
        'voice',
        'info',
        'message',
        'sended',
        'findAll',
        'AbalV',
        'where',
        'pending',
        '../../util',
        'QqIZq',
        'UffsY',
        'applicatio',
        'faxxA',
        'LbCOX',
        'status',
        'mediaName',
        'OLSNv',
        'Muftp',
        'pJcHF',
        'individual',
        'wXVrQ',
        'qLUAV',
        'sAsRead',
        '350673wwYjfG',
        'waba',
        'apiKey',
        'ers/SetTic',
        'MLHQO',
        'ack',
        'wabaMediaI',
        'messageId',
        'PbWsA',
        'tokenAPI',
        'createdAt',
        'dBwrt',
        '905958XYlPgh',
        'jfuec',
        'ASC',
        'ccVDl',
        'nNkuH',
        'mediaUrl',
        'GKBmm',
        '../../help',
        'dataValues',
        '__importDe',
        'HTDvl',
        'ERXyC',
        'ls/Whatsap',
        'fault',
        '8613369vgvScn',
        'value'
    ];
    a = function () {
        return I;
    };
    return a();
}
var __importDefault = this && this[B(0x173) + C(0x177)] || function (c) {
    const D = C;
    return c && c[D(0x131)] ? c : { 'default': c };
};
const m = {};
m[C(0x179)] = !![], Object[C(0x180) + B(0x141)](exports, B(0x131), m);
const sequelize_1 = require(B(0x112)), SetTicketMessagesAsRead_1 = __importDefault(require(C(0x171) + C(0x161) + C(0x17a) + B(0x15d))), socketEmit_1 = __importDefault(require(B(0x171) + B(0x12c) + B(0x134))), Message_1 = __importDefault(require(C(0x146) + B(0x111))), Ticket_1 = __importDefault(require(C(0x146) + C(0x116))), Whatsapp_1 = __importDefault(require(C(0x146) + C(0x176) + 'p')), logger_1 = require(C(0x14f) + B(0x127)), SentMessage_1 = __importDefault(require(C(0x12f) + C(0x132))), buildWabaMessage360 = async (h, i) => {
        const E = B, F = B, j = {
                'PbWsA': function (l, o) {
                    return l(o);
                },
                'qLUAV': E(0x15a),
                'agCYb': F(0x13b),
                'WWXXF': function (l, o) {
                    return l === o;
                },
                'wXVrQ': E(0x152) + 'n',
                'tuixj': function (l, o) {
                    return l === o;
                },
                'pJcHF': F(0x12b),
                'OLSNv': F(0x150),
                'faxxA': F(0x13d),
                'jfuec': F(0x12e),
                'ZGsip': function (l, o) {
                    return l !== o;
                },
                'rbtcr': E(0x13e),
                'nNkuH': function (l, o) {
                    return l === o;
                },
                'Ndrxy': F(0x118),
                'rYXpw': E(0x147),
                'Mjpcv': E(0x123)
            };
        let k = {
            'timestamp': j[F(0x166)](String, h[F(0x11b)]),
            'recipient_type': j[E(0x15c)],
            'to': i,
            'type': j[E(0x17d)]
        };
        if (j[E(0x113)](h[E(0x17b)], j[F(0x15b)]) || j[F(0x114)](h[F(0x17b)], j[E(0x159)])) {
            if (j[F(0x114)](j[F(0x157)], j[F(0x157)])) {
                const l = {};
                l['id'] = h[F(0x164) + 'd'], l[F(0x137)] = h[F(0x11f)] || h[E(0x156)] || '' || '', k = {
                    ...k,
                    'type': j[F(0x159)],
                    'document': l
                };
            } else {
                const p = {};
                return p[E(0x17c)] = j, g && h[E(0x131)] ? i : p;
            }
        }
        if (j[F(0x113)](h[E(0x17b)], j[F(0x153)])) {
            const p = {};
            p['id'] = h[E(0x164) + 'd'], p[F(0x137)] = h[E(0x11f)] || h[F(0x156)] || '', k = {
                ...k,
                'type': j[F(0x153)],
                'image': p
            };
        }
        if (j[E(0x113)](h[F(0x17b)], j[F(0x16b)])) {
            if (j[F(0x133)](j[F(0x140)], j[E(0x140)])) {
                const r = {};
                r[E(0x11f)] = h[E(0x11f)];
                const s = { ...g };
                s[F(0x13b)] = r, s = s;
            } else {
                const r = {};
                r['id'] = h[E(0x164) + 'd'], r[F(0x137)] = h[F(0x11f)] || h[E(0x156)] || '', k = {
                    ...k,
                    'type': j[E(0x16b)],
                    'video': r
                };
            }
        }
        if (j[F(0x16e)](h[E(0x17b)], j[E(0x125)]) || j[F(0x113)](h[F(0x17b)], j[F(0x13a)])) {
            const s = {};
            s['id'] = h[F(0x164) + 'd'], s[E(0x137)] = h[F(0x11f)] || h[F(0x156)] || '', k = {
                ...k,
                'type': j[E(0x125)],
                'audio': s
            };
        }
        if (j[F(0x114)](h[E(0x17b)], j[E(0x143)]) || j[E(0x16e)](h[F(0x17b)], j[E(0x17d)])) {
            const t = {};
            t[E(0x11f)] = h[F(0x11f)], k = {
                ...k,
                'text': t
            };
        }
        return k;
    }, n = { [sequelize_1['Op']['is']]: null }, where = {
        'fromMe': !![],
        'messageId': n,
        'status': C(0x14e),
        [sequelize_1['Op']['or']]: [
            { 'scheduleDate': { [sequelize_1['Op'][B(0x119)]]: new Date() } },
            { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
        ]
    }, Waba360SendMessagesSystem = async i => {
        const G = C, H = C, j = {
                'OpbFX': G(0x144),
                'UffsY': G(0x145),
                'AbalV': G(0x15f),
                'ccVDl': H(0x110),
                'vANJJ': G(0x13f),
                'MLHQO': H(0x12a),
                'Muftp': H(0x168),
                'ERXyC': H(0x16c),
                'UzUvl': function (l, o) {
                    return l(o);
                },
                'NTUdm': G(0x13b),
                'GKBmm': H(0x123),
                'dBwrt': function (l, o, p) {
                    return l(o, p);
                },
                'HTDvl': H(0x14a),
                'fdqXc': H(0x11d),
                'LbCOX': H(0x11a) + H(0x136)
            }, k = await Message_1[H(0x17c)][H(0x14b)]({
                'where': where,
                'include': [
                    j[G(0x128)],
                    {
                        'model': Ticket_1[G(0x17c)],
                        'as': j[G(0x151)],
                        'where': {
                            'tenantId': i[G(0x129)],
                            'channel': j[H(0x14c)]
                        },
                        'include': [
                            j[H(0x128)],
                            {
                                'model': Whatsapp_1[G(0x17c)],
                                'as': j[G(0x16d)],
                                'where': {
                                    'id': i['id'],
                                    'type': j[H(0x14c)],
                                    'wabaBSP': j[G(0x121)]
                                }
                            }
                        ]
                    },
                    {
                        'model': Message_1[H(0x17c)],
                        'as': j[G(0x162)],
                        'include': [j[G(0x128)]]
                    }
                ],
                'order': [[
                        j[H(0x158)],
                        j[H(0x175)]
                    ]]
            });
        for (const l of k) {
            const {ticket: o} = l, p = j[H(0x124)](String, o[H(0x144)][G(0x17f)]);
            if (![
                    j[G(0x122)],
                    j[H(0x170)]
                ][H(0x126)](l[G(0x17b)]) && l[H(0x16f)] && !l[G(0x164) + 'd']) {
            }
            const q = await j[H(0x169)](buildWabaMessage360, l, p), r = {};
            r[H(0x149)] = q, r[H(0x160)] = i[H(0x167)];
            const s = await (0xd * -0x301 + 0x185d + 0xeb0, SentMessage_1[H(0x17c)])(r), t = { ...l };
            t[H(0x165)] = s[H(0x138)][-0x7ed * -0x3 + 0xecf + -0x2696]['id'], t[H(0x155)] = j[H(0x174)], t[G(0x163)] = 0x2;
            const u = t, v = { ...u }, w = {};
            w['id'] = l['id'];
            const x = {};
            x[G(0x14d)] = w, await Message_1[H(0x17c)][H(0x130)](v, x);
            const y = {};
            y[G(0x129)] = o[G(0x129)], y[H(0x17e)] = j[H(0x142)], y[H(0x11c)] = { ...u[H(0x172)] }, y[H(0x11c)][G(0x16f)] = l[G(0x16f)], y[H(0x11c)][G(0x165)] = u[G(0x165)], y[H(0x11c)][G(0x155)] = j[H(0x174)], y[H(0x11c)][G(0x163)] = 0x2, (-0x1d08 + -0x1 * 0x192d + -0x1 * -0x3635, socketEmit_1[H(0x17c)])(y), logger_1[H(0x117)][G(0x148)](j[G(0x154)]), await (-0x44d + 0x18c6 + -0x3 * 0x6d3, SetTicketMessagesAsRead_1[H(0x17c)])(o);
        }
    };
exports[B(0x17c)] = Waba360SendMessagesSystem;