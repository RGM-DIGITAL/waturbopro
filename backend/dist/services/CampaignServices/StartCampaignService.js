'use strict';
function a() {
    const a0 = [
        'dgjhy',
        'DGHny',
        'InSeconds',
        'rRDlH',
        'AIGN_NOT_E',
        'InDays',
        'S_NOT_EXIS',
        'SslkF',
        '08:00',
        'where',
        'America/Sa',
        'isAfter',
        'GSjbL',
        'HmZCu',
        'WjLAE',
        'wAoYr',
        'delay',
        '5538632dqSwsK',
        'message1',
        'ufuKv',
        '2187222MJwwnd',
        'defineProp',
        'mediaUrl',
        'message3',
        'ZMTLE',
        'iTlCv',
        '/Queue',
        'isBefore',
        'message2',
        'vmodE',
        '3104720MnRosR',
        'erty',
        'cChNj',
        'iXFYU',
        'getTime',
        'nfqhw',
        '8KzUiLu',
        'addDays',
        'difference',
        '__esModule',
        'value',
        '851655DVmyUB',
        '../../libs',
        'start',
        'ZkZAK',
        'length',
        '__importDe',
        'ocAFa',
        'EApbG',
        'split',
        'HDuDY',
        'oUtc',
        'parse',
        'campaignId',
        'zonedTimeT',
        'dPoos',
        'tenantId',
        'sessionId',
        'date-fns',
        'SendMessag',
        'ls/Campaig',
        'gWNhZ',
        'nQbjO',
        '_id_',
        'rpTVE',
        'SQXlT',
        'AaflB',
        'UjVwK',
        'session',
        'scheduled',
        '20:00',
        'setMinutes',
        '../../mode',
        'floor',
        'rfavU',
        'bWwwW',
        'vHtZT',
        '3843812qCXYaq',
        'fPSWa',
        'ePJCT',
        'MQuOK',
        'PfKAv',
        'default',
        'ZzxAn',
        'PTzHj',
        'add',
        'ERROR_CAMP',
        '15swMOXn',
        'uPfvo',
        'findAll',
        'Wtthj',
        'date-fns-t',
        'contact',
        'getMinutes',
        'eWhatsappC',
        'o_Paulo',
        'setHours',
        '14696253fuCUNT',
        'status',
        'JuGZA',
        '_contact_',
        'Aghgm',
        '789523aqJuWH',
        '../../erro',
        'fault',
        'contactId',
        'YsYfc',
        'number',
        'ampaign',
        'getHours',
        'GN_CONTACT',
        '_time_',
        'fOpMK',
        'isWithinIn',
        'end',
        'ERR_CAMPAI',
        'HH:mm',
        'update',
        'QUKms',
        'map',
        'nContacts',
        'XISTS',
        'AjNMH',
        'message',
        'random',
        'GUCdk',
        'NmYlk',
        'terval',
        'findOne',
        'addSeconds',
        'NfYuy',
        'eLBAG',
        'rs/AppErro',
        'GsWOe',
        'FbYll',
        'include',
        'campaginId'
    ];
    a = function () {
        return a0;
    };
    return a();
}
const J = b, K = b;
(function (c, d) {
    const H = b, I = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(H(0x1da)) / (-0x1d19 + -0xcca * 0x3 + 0x4378) + parseInt(I(0x221)) / (0x2f + 0x5b5 + -0xfb * 0x6) * (parseInt(I(0x226)) / (0x153 + 0x22 * 0x100 + -0x2350)) + parseInt(I(0x21b)) / (0x1f69 + -0x2 * -0x1c6 + -0x22f1 * 0x1) + parseInt(H(0x1cb)) / (-0x1 * -0x18df + 0x19fe + -0x32d8) * (parseInt(I(0x211)) / (0x24 * 0xa2 + 0x2701 + -0x3dc3)) + -parseInt(I(0x1c1)) / (0x1893 + 0x670 + -0x1efc) + parseInt(H(0x20e)) / (0x1b7c + -0x1 * -0xc8c + -0x2800) + -parseInt(I(0x1d5)) / (-0x1 * -0x20bd + -0xb0e * -0x3 + -0x41de);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x441d * 0xe + -0x1 * 0x6eafb + -0x3 * -0x73da3));
var __importDefault = this && this[J(0x1a2) + K(0x1dc)] || function (c) {
    const L = J;
    return c && c[L(0x224)] ? c : { 'default': c };
};
const G = {};
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x2 * -0xfbb + 0x1615 * -0x1 + -0x7bf);
        let h = e[f];
        return h;
    }, b(c, d);
}
G[J(0x225)] = !![], Object[J(0x212) + K(0x21c)](exports, J(0x224), G);
const date_fns_1 = require(K(0x1ae)), date_fns_tz_1 = require(J(0x1cf) + 'z'), Campaign_1 = __importDefault(require(J(0x1bc) + J(0x1b0) + 'n')), AppError_1 = __importDefault(require(J(0x1db) + K(0x1f8) + 'r')), CampaignContacts_1 = __importDefault(require(K(0x1bc) + J(0x1b0) + J(0x1ec))), Queue_1 = __importDefault(require(K(0x227) + K(0x217))), cArquivoName = d => {
        const M = J, N = J, e = {};
        e[M(0x1c4)] = function (i, j) {
            return i - j;
        };
        const f = e;
        if (!d)
            return '';
        const g = d[M(0x1a5)]('/'), h = g[f[M(0x1c4)](g[N(0x22a)], -0x6c9 + 0x2c9 * -0x3 + 0xf25 * 0x1)];
        return h;
    }, randomInteger = (d, e) => {
        const O = J, P = K, f = {};
        f[O(0x1b5)] = function (h, i) {
            return h + i;
        }, f[O(0x21a)] = function (h, i) {
            return h * i;
        }, f[P(0x1a3)] = function (h, i) {
            return h - i;
        };
        const g = f;
        return g[O(0x1b5)](Math[O(0x1bd)](g[O(0x21a)](Math[P(0x1f0)](), g[O(0x1b5)](g[P(0x1a3)](e, d), -0x1edd * -0x1 + -0x343 * -0x8 + -0x38f4))), d);
    }, mountMessageData = (c, d, e) => {
        const Q = J, R = J, f = {
                'AaflB': function (i, j, k) {
                    return i(j, k);
                },
                'ZMTLE': function (i, j) {
                    return i === j;
                },
                'Aghgm': function (i, j) {
                    return i === j;
                },
                'DGHny': function (i, j) {
                    return i(j);
                }
            }, g = f[Q(0x1b6)](randomInteger, 0xd7e + 0x146a + -0xb * 0x315, 0x12ff + 0x1fc2 + -0x32be);
        let h = '';
        if (f[Q(0x215)](g, -0x617 + -0x1 * -0x676 + -0x5e))
            h = c[Q(0x20f)];
        if (f[R(0x1d9)](g, 0x73 * -0x1f + -0x8da + 0x13 * 0x133))
            h = c[R(0x219)];
        if (f[Q(0x1d9)](g, 0x1 * -0x319 + 0x287 * -0x2 + 0x82a))
            h = c[R(0x214)];
        return {
            'whatsappId': c[R(0x1ad)],
            'message': h,
            'number': d[Q(0x1d0)][R(0x1df)],
            'mediaUrl': c[R(0x213)],
            'mediaName': f[Q(0x1fe)](cArquivoName, c[Q(0x213)]),
            'messageRandom': Q(0x1ef) + g,
            'campaignContact': d,
            'options': e
        };
    }, nextDayHoursValid = e => {
        const S = J, T = J, f = {};
        f[S(0x1c0)] = function (q, r) {
            return q * r;
        }, f[T(0x1e4)] = function (q, r) {
            return q - r;
        }, f[S(0x1b2)] = function (q, r) {
            return q < r;
        }, f[T(0x1f2)] = function (q, r) {
            return q * r;
        }, f[T(0x220)] = T(0x205), f[T(0x1c2)] = S(0x1e8), f[T(0x1f9)] = S(0x1ba), f[S(0x1b1)] = function (q, r) {
            return q && r;
        }, f[T(0x1c7)] = function (q, r) {
            return q !== r;
        }, f[T(0x1be)] = T(0x1fd), f[T(0x20a)] = T(0x1c3), f[T(0x1a4)] = function (q, r) {
            return q && r;
        }, f[S(0x1ab)] = function (q, r) {
            return q === r;
        }, f[T(0x1f6)] = S(0x1f1), f[T(0x1b4)] = function (q, r) {
            return q && r;
        }, f[T(0x21e)] = function (q, r) {
            return q > r;
        };
        const g = f;
        let h = e;
        const i = new Date(), j = (0x4db * 0x6 + 0x2 * 0x1363 + -0x43e8, date_fns_1[T(0x223) + S(0x202)])(h, new Date());
        g[T(0x1b2)](j, 0x2b * -0x8 + 0x1 * 0xc90 + -0x4 * 0x2ce) && (h = (0xb * -0xdf + 0x346 + 0x64f, date_fns_1[T(0x222)])(h, g[S(0x1f2)](j, -(0x13 * 0x1dd + -0x162a + 0x4d * -0x2c))));
        g[S(0x1b2)](h[S(0x21f)](), i[T(0x21f)]()) && (h = (0x1 * 0x1dab + 0xbbf + -0x296a, date_fns_1[T(0x1bb)])((-0x1306 + -0x5a4 + -0x386 * -0x7, date_fns_1[T(0x1d4)])(h, i[S(0x1e1)]()), i[S(0x1d1)]()));
        const k = (-0x21 * -0x16 + 0x380 + -0x2 * 0x32b, date_fns_1[T(0x1a8)])(g[S(0x220)], g[T(0x1c2)], h), l = (0x1db4 + 0x1d22 + -0x3ad6, date_fns_1[S(0x1a8)])(g[S(0x1f9)], g[S(0x1c2)], h), m = {};
        m[S(0x228)] = k, m[S(0x1e6)] = l;
        const n = (-0x55d * -0x2 + 0x173c + 0xbd * -0x2e, date_fns_1[S(0x1e5) + S(0x1f3)])(h, m), o = (0x50d + -0x24c9 + 0x1fbc, date_fns_1[S(0x218)])(k, h), p = (0x2f * 0x56 + -0x2590 + 0x15c6, date_fns_1[S(0x208)])(l, h);
        g[T(0x1b1)](!n, o) && (g[T(0x1c7)](g[T(0x1be)], g[T(0x20a)]) ? h = (-0x117c + -0x9 * -0x35b + 0x7 * -0x1d1, date_fns_1[S(0x1bb)])((-0x1d55 + 0x55 * 0x6d + -0x2 * 0x36e, date_fns_1[S(0x1d4)])(h, 0x1 * 0x19cd + -0x3 * -0xc22 + -0x3e2b), -0x3 * 0xc53 + 0x1552 + 0xb * 0x16f) : g = (-0x2 * -0x832 + -0x17e5 + 0x781, h[T(0x222)])(i, g[T(0x1c0)](j, -(0xd7d + -0x2a * -0x23 + -0x133a))));
        if (g[S(0x1a4)](!n, p) && g[S(0x1ab)](j, 0xf * -0x191 + -0x1c5 * -0xd + 0x7e)) {
            if (g[T(0x1ab)](g[T(0x1f6)], g[T(0x1f6)]))
                h = (0x74a + -0x1 * -0x1de8 + -0x2532, date_fns_1[S(0x222)])((0x1b82 + 0x3 * 0x121 + -0x1ee5, date_fns_1[T(0x1d4)])(h, 0x1b78 + 0x221 + -0x1d91), 0x1842 + -0x8d * 0x24 + -0x46d);
            else {
                if (!e)
                    return '';
                const s = f[S(0x1a5)]('/'), t = s[g[T(0x1e4)](s[S(0x22a)], -0x154d + 0x2 * 0x665 + 0x884)];
                return t;
            }
        }
        return g[T(0x1b4)](!n, p) && g[S(0x21e)](j, -0x156e + 0x15b1 + 0x1 * -0x43) && (h = (-0xe45 + 0xb0e + 0x337 * 0x1, date_fns_1[T(0x1d4)])(h, -0x2 * 0x7c9 + -0x83d + 0x17d7)), h;
    }, calcDelay = (d, e) => {
        const U = J, V = K, f = {};
        f[U(0x229)] = function (i, j) {
            return i + j;
        }, f[V(0x1c8)] = function (i, j) {
            return i * j;
        };
        const g = f, h = (0x3 * 0x4e9 + 0x15f7 * 0x1 + -0x24b2 * 0x1, date_fns_1[V(0x223) + V(0x1ff)])(d, new Date());
        return g[V(0x229)](g[V(0x1c8)](h, 0x10f7 + 0x21a6 + 0x2eb5 * -0x1), e);
    }, StartCampaignService = async ({
        campaignId: h,
        tenantId: i,
        options: j
    }) => {
        const W = K, X = J, k = {
                'bWwwW': function (v, w, x) {
                    return v(w, x);
                },
                'cChNj': function (v, w) {
                    return v === w;
                },
                'YsYfc': function (v, w) {
                    return v(w);
                },
                'ufuKv': function (v, w) {
                    return v / w;
                },
                'PfKAv': function (v, w, x, y) {
                    return v(w, x, y);
                },
                'GSjbL': W(0x1b8),
                'iTlCv': X(0x1ea),
                'uPfvo': X(0x1fa),
                'AjNMH': W(0x1ca) + W(0x201) + W(0x1ed),
                'HDuDY': X(0x1d0),
                'Wtthj': function (v, w) {
                    return v !== w;
                },
                'SslkF': W(0x1f7),
                'JuGZA': X(0x1e7) + X(0x1e2) + X(0x203) + 'TS',
                'WjLAE': function (v, w) {
                    return v * w;
                },
                'UjVwK': W(0x207) + X(0x1d3),
                'rRDlH': X(0x1af) + W(0x1d2) + X(0x1e0),
                'wAoYr': X(0x1b9)
            }, l = {};
        l['id'] = h, l[X(0x1ac)] = i;
        const m = {};
        m[W(0x206)] = l, m[X(0x1fb)] = [k[W(0x209)]];
        const n = await Campaign_1[X(0x1c6)][W(0x1f4)](m);
        if (!n) {
            if (k[X(0x21d)](k[X(0x216)], k[W(0x1cc)])) {
                const w = k[X(0x1bf)](n, -0x2eb + -0xd35 + 0x1021, -0x22cf + 0x1cc3 + 0x60f);
                let x = '';
                if (k[X(0x21d)](w, -0x242e + 0x28 * -0x53 + -0x1 * -0x3127))
                    x = o[X(0x20f)];
                if (k[X(0x21d)](w, -0x2 * -0xa1d + 0x81c + -0x1c54))
                    x = p[W(0x219)];
                if (k[X(0x21d)](w, 0xfc5 + -0xa33 + -0x58f))
                    x = q[X(0x214)];
                return {
                    'whatsappId': r[X(0x1ad)],
                    'message': x,
                    'number': s[W(0x1d0)][W(0x1df)],
                    'mediaUrl': t[X(0x213)],
                    'mediaName': k[X(0x1de)](u, v[X(0x213)]),
                    'messageRandom': W(0x1ef) + w,
                    'campaignContact': w,
                    'options': x
                };
            } else
                throw new AppError_1[(X(0x1c6))](k[W(0x1ee)], -0xd * 0xa3 + -0x106d + 0x1a48 * 0x1);
        }
        const o = {};
        o[X(0x1a9)] = h;
        const p = {};
        p[X(0x206)] = o, p[W(0x1fb)] = [k[W(0x1a6)]];
        const q = await CampaignContacts_1[W(0x1c6)][X(0x1cd)](p);
        if (!q) {
            if (k[X(0x1ce)](k[W(0x204)], k[X(0x204)]))
                u = (-0xe8a + 0x4 * -0x12a + -0x1b * -0xb6, h[W(0x222)])((0xde3 + -0x1806 + -0xad * -0xf, i[W(0x1d4)])(j, 0x9a3 * 0x1 + 0x155 * -0xe + -0x1cf * -0x5), 0x25ce + 0x1e7c + -0x3 * 0x16c3);
            else
                throw new AppError_1[(X(0x1c6))](k[W(0x1d7)], -0x9 * -0x278 + 0x4e * -0x4 + -0x2c * 0x71);
        }
        const r = n[X(0x20d)] ? k[W(0x20b)](n[X(0x20d)], -0x4 * -0x4 + 0x1cdc + 0xc82 * -0x2) : 0x28 * 0x395 + 0x1d * 0xbf + -0x56cb;
        let s = (0x1c1a + -0x1 * -0x4d2 + 0x83b * -0x4, date_fns_tz_1[X(0x1aa) + W(0x1a7)])(n[X(0x228)], k[W(0x1b7)]);
        const t = q[W(0x1eb)](x => {
            const Y = X, Z = W;
            return s = (0x233 * 0x6 + -0x22bb + -0x1 * -0x1589, date_fns_1[Y(0x1f5)])(s, k[Y(0x210)](r, -0xfef * 0x2 + -0x1bab + 0x3f71)), k[Z(0x1c5)](mountMessageData, n, x, {
                ...j,
                'jobId': Y(0x1fc) + '_' + n['id'] + Z(0x1d8) + x[Y(0x1dd)] + Z(0x1b3) + x['id'] + Z(0x1e3) + n[Z(0x228)][Z(0x21f)](),
                'delay': k[Z(0x1bf)](calcDelay, s, r)
            });
        });
        Queue_1[X(0x1c6)][X(0x1c9)](k[W(0x200)], t);
        const u = {};
        u[X(0x1d6)] = k[X(0x20c)], await n[X(0x1e9)](u);
    };
exports[J(0x1c6)] = StartCampaignService;