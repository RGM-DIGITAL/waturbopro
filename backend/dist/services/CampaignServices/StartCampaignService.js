'use strict';
const J = b, K = b;
(function (c, d) {
    const H = b, I = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(H(0x1fd)) / (-0x6f * 0xd + 0xae * -0x7 + 0xa66) * (-parseInt(H(0x250)) / (0xae7 + -0xe57 * 0x1 + 0x372)) + -parseInt(I(0x25f)) / (0x9 + 0x6 * 0x58b + -0x2148) * (parseInt(I(0x229)) / (0x17a7 * 0x1 + -0x2 * -0x919 + -0x29d5)) + -parseInt(H(0x1ea)) / (0xe5 * 0x29 + 0x2d3 * 0xb + -0x43b9) + -parseInt(I(0x220)) / (-0x2024 * 0x1 + -0x1e90 + 0x3eba) * (-parseInt(I(0x23e)) / (-0x146e + 0x1 * -0x2185 + 0x35fa)) + -parseInt(I(0x1e1)) / (0x1499 + -0x26b4 * -0x1 + -0x3b45 * 0x1) + parseInt(H(0x20e)) / (-0x7 * 0x558 + -0x2fa * 0x1 + 0x286b) + -parseInt(I(0x210)) / (0x1 * 0xb96 + -0x1de7 + 0x125b) * (-parseInt(H(0x208)) / (0x6 * 0x1bb + -0x4e9 * -0x1 + -0x7a * 0x20));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, 0x1095d7 * 0x1 + -0x161dc * -0x2 + 0x2a2 * -0x395));
var __importDefault = this && this[J(0x22d) + K(0x261)] || function (c) {
    const L = K;
    return c && c[L(0x1e4)] ? c : { 'default': c };
};
const G = {};
G[K(0x1fb)] = !![], Object[J(0x205) + J(0x24f)](exports, J(0x1e4), G);
function a() {
    const a0 = [
        'rs/AppErro',
        '8043750NhuClb',
        'status',
        '550zskTsg',
        'default',
        'dwIcq',
        'S_NOT_EXIS',
        'SPNKo',
        'TjBjI',
        'OTHPm',
        'PsdvK',
        '../../mode',
        'map',
        'update',
        '_id_',
        'setHours',
        'oUtc',
        'findAll',
        '/Queue',
        '6OxGyhH',
        'hjCZp',
        'start',
        'session',
        'WInMQ',
        'end',
        'XOnZm',
        'sessionId',
        'ampaign',
        '2355220RHrFrP',
        'campaginId',
        'iKXMu',
        'message2',
        '__importDe',
        'ls/Campaig',
        'zDZOd',
        'floor',
        'AIGN_NOT_E',
        'iiCYe',
        'isWithinIn',
        'terval',
        '../../libs',
        'AcGFV',
        'addSeconds',
        'YTunB',
        'yxAWJ',
        'ERROR_CAMP',
        'LlamP',
        'tenantId',
        'split',
        '5973779WDsXXu',
        'ArIpT',
        'message1',
        'nContacts',
        'zonedTimeT',
        'difference',
        'date-fns',
        'KiHGS',
        'CBASw',
        'IhNev',
        'SendMessag',
        'PHRPA',
        'tOobe',
        'ovcas',
        'length',
        '_contact_',
        'o_Paulo',
        'erty',
        '762812UcgiCD',
        'message3',
        'HH:mm',
        'SstpP',
        'Pmnfo',
        'drkCe',
        'ghjSh',
        'campaignId',
        '08:00',
        'XISTS',
        'XVRCo',
        'UCTek',
        'setMinutes',
        'FCSzT',
        'eWhatsappC',
        '3tmhQAv',
        'MmbEc',
        'fault',
        'BjVdY',
        '20:00',
        'InSeconds',
        'wfDfH',
        'scheduled',
        'SCYGN',
        'InDays',
        'add',
        'sAHcE',
        '1167016ZFEyQO',
        'CeieK',
        'random',
        '__esModule',
        'delay',
        'ERR_CAMPAI',
        'include',
        'twChO',
        'contact',
        '5853640sPDHCL',
        'message',
        'contactId',
        'mediaUrl',
        'CLAHT',
        'AGzjf',
        'date-fns-t',
        'getHours',
        'number',
        'getMinutes',
        'EadkS',
        'GN_CONTACT',
        '../../erro',
        'qPwoz',
        'getTime',
        'America/Sa',
        'PCXut',
        'value',
        'jKToJ',
        '1lIrEXk',
        'fWbFT',
        'UkutV',
        'isBefore',
        'parse',
        'where',
        'NlSNw',
        'isAfter',
        'defineProp',
        'addDays',
        '_time_',
        '85382DMAytd',
        'jOkgO',
        'ibIje',
        'findOne',
        'XOIIJ'
    ];
    a = function () {
        return a0;
    };
    return a();
}
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x66d + -0x1a5 + 0x5 * 0x1fd);
        let h = e[f];
        return h;
    }, b(c, d);
}
const date_fns_1 = require(J(0x244)), date_fns_tz_1 = require(K(0x1f0) + 'z'), Campaign_1 = __importDefault(require(K(0x218) + K(0x22e) + 'n')), AppError_1 = __importDefault(require(J(0x1f6) + J(0x20d) + 'r')), CampaignContacts_1 = __importDefault(require(J(0x218) + J(0x22e) + K(0x241))), Queue_1 = __importDefault(require(J(0x235) + K(0x21f))), cArquivoName = d => {
        const M = K, N = J, e = {};
        e[M(0x226)] = function (i, j) {
            return i - j;
        };
        const f = e;
        if (!d)
            return '';
        const g = d[N(0x23d)]('/'), h = g[f[N(0x226)](g[M(0x24c)], 0x23fb + -0x14 * -0x1f3 + -0x4af6)];
        return h;
    }, randomInteger = (d, e) => {
        const O = J, P = J, f = {};
        f[O(0x1e8)] = function (h, i) {
            return h + i;
        }, f[P(0x256)] = function (h, i) {
            return h * i;
        }, f[P(0x238)] = function (h, i) {
            return h - i;
        };
        const g = f;
        return g[O(0x1e8)](Math[P(0x230)](g[P(0x256)](Math[P(0x1e3)](), g[P(0x1e8)](g[P(0x238)](e, d), 0x1 * -0x2335 + 0x13d9 * -0x1 + -0x5 * -0xb03))), d);
    }, mountMessageData = (c, d, e) => {
        const Q = K, R = J, f = {
                'jOkgO': function (i, j, k) {
                    return i(j, k);
                },
                'OTHPm': function (i, j) {
                    return i === j;
                },
                'NlSNw': function (i, j) {
                    return i === j;
                },
                'PHRPA': function (i, j) {
                    return i(j);
                }
            }, g = f[Q(0x209)](randomInteger, -0x88b * -0x3 + 0x90 + -0x1a30, 0x800 + 0x1a54 + 0x5 * -0x6dd);
        let h = '';
        if (f[R(0x216)](g, -0x7a2 + -0x19c9 + 0x1 * 0x216c))
            h = c[R(0x240)];
        if (f[R(0x203)](g, -0x2 * 0x653 + -0x1704 + 0x23ac))
            h = c[Q(0x22c)];
        if (f[R(0x216)](g, -0x1aad * -0x1 + -0x124c + -0x22 * 0x3f))
            h = c[R(0x251)];
        return {
            'whatsappId': c[R(0x227)],
            'message': h,
            'number': d[Q(0x1e9)][Q(0x1f2)],
            'mediaUrl': c[Q(0x1ed)],
            'mediaName': f[Q(0x249)](cArquivoName, c[Q(0x1ed)]),
            'messageRandom': R(0x1eb) + g,
            'campaignContact': d,
            'options': e
        };
    }, nextDayHoursValid = e => {
        const S = J, T = K, f = {};
        f[S(0x247)] = function (q, r) {
            return q * r;
        }, f[T(0x1fa)] = function (q, r) {
            return q + r;
        }, f[T(0x246)] = function (q, r) {
            return q - r;
        }, f[T(0x255)] = function (q, r) {
            return q < r;
        }, f[T(0x20a)] = function (q, r) {
            return q !== r;
        }, f[S(0x265)] = T(0x215), f[T(0x214)] = S(0x258), f[T(0x1fe)] = S(0x252), f[S(0x1e0)] = S(0x263), f[T(0x232)] = function (q, r) {
            return q && r;
        }, f[S(0x221)] = function (q, r) {
            return q && r;
        }, f[T(0x22f)] = function (q, r) {
            return q === r;
        }, f[T(0x224)] = function (q, r) {
            return q !== r;
        }, f[S(0x25b)] = T(0x20c), f[T(0x245)] = function (q, r) {
            return q > r;
        }, f[S(0x239)] = T(0x22b), f[T(0x254)] = T(0x24b);
        const g = f;
        let h = e;
        const i = new Date(), j = (0x1fb6 + -0x1 * 0x1252 + -0xd64, date_fns_1[T(0x243) + T(0x268)])(h, new Date());
        g[S(0x255)](j, -0x1016 + 0x112 + 0xf04) && (g[S(0x20a)](g[S(0x265)], g[T(0x265)]) ? g = (-0x2c * 0x65 + -0x9d7 + 0xb * 0x279, h[S(0x206)])(i, g[T(0x247)](j, -(-0x1261 + 0x847 * -0x3 + 0x2b37))) : h = (0x6e9 + -0x1c1 * 0x5 + 0x1dc, date_fns_1[T(0x206)])(h, g[S(0x247)](j, -(0x1 * 0xb47 + -0x133 * -0x3 + -0xedf))));
        g[S(0x255)](h[T(0x1f8)](), i[T(0x1f8)]()) && (h = (0x1781 + 0x78b * 0x1 + 0x2 * -0xf86, date_fns_1[S(0x25c)])((0x1de9 + -0x2274 + 0x48b, date_fns_1[S(0x21c)])(h, i[T(0x1f1)]()), i[S(0x1f3)]()));
        const k = (0xc3e * -0x1 + 0x7c1 * -0x4 + 0x1 * 0x2b42, date_fns_1[T(0x201)])(g[T(0x214)], g[S(0x1fe)], h), l = (0x1 * -0x90d + -0xc40 + 0x30b * 0x7, date_fns_1[T(0x201)])(g[T(0x1e0)], g[S(0x1fe)], h), m = {};
        m[T(0x222)] = k, m[T(0x225)] = l;
        const n = (-0x9ac * -0x4 + 0x3b2 * 0x4 + 0x1d * -0x1d8, date_fns_1[S(0x233) + T(0x234)])(h, m), o = (-0x256a + -0x1f8d + 0x645 * 0xb, date_fns_1[S(0x200)])(k, h), p = (-0x2 * 0x3d5 + -0x240b + 0x43 * 0xa7, date_fns_1[T(0x204)])(l, h);
        g[T(0x232)](!n, o) && (h = (0xcf2 * 0x1 + -0x566 * -0x1 + -0x4 * 0x496, date_fns_1[S(0x25c)])((-0x20d7 + 0x116e + 0xf69, date_fns_1[S(0x21c)])(h, 0x333 * 0x1 + -0x213f * -0x1 + -0x246a), -0x1 * 0xbbf + -0x16a2 * -0x1 + 0x3 * -0x397));
        g[T(0x221)](!n, p) && g[T(0x22f)](j, 0x8e9 * 0x4 + -0x4 * 0x4ff + -0xfa8 * 0x1) && (g[S(0x224)](g[T(0x25b)], g[T(0x25b)]) ? f = (-0x19b5 + 0x1c2 + 0x17f3, g[S(0x21c)])(h, -0x21e8 + -0x1369 * -0x1 + 0xe87) : h = (-0x2294 + 0x36 * 0xa8 + -0xdc, date_fns_1[T(0x206)])((0x3a0 * 0x3 + -0x33 * -0x3a + -0x166e, date_fns_1[T(0x21c)])(h, -0x1ae + 0x5 * -0x16d + 0x8d7), -0x1f * -0x94 + 0x13e0 + -0x9 * 0x433));
        if (g[S(0x221)](!n, p) && g[T(0x245)](j, -0x2593 + 0x755 * 0x4 + -0x1 * -0x83f)) {
            if (g[S(0x22f)](g[T(0x239)], g[S(0x254)]))
                return g[T(0x1fa)](h[T(0x230)](g[S(0x247)](i[S(0x1e3)](), g[T(0x1fa)](g[T(0x246)](j, k), -0x38 * 0xaf + -0x2 + 0x264b))), l);
            else
                h = (0x1 * -0x1e6f + -0x23db + 0x2125 * 0x2, date_fns_1[S(0x21c)])(h, -0x1ce8 * 0x1 + 0xd6 * 0x5 + 0x18c2);
        }
        return h;
    }, calcDelay = (d, e) => {
        const U = J, V = K, f = {};
        f[U(0x1f7)] = function (i, j) {
            return i + j;
        }, f[U(0x25a)] = function (i, j) {
            return i * j;
        };
        const g = f, h = (0x1 * 0xceb + -0x2 * -0x6c9 + -0x1a7d * 0x1, date_fns_1[U(0x243) + V(0x264)])(d, new Date());
        return g[U(0x1f7)](g[U(0x25a)](h, 0x1034 + 0x1acb + -0x2717), e);
    }, StartCampaignService = async ({
        campaignId: h,
        tenantId: i,
        options: j
    }) => {
        const W = K, X = J, k = {
                'BjVdY': function (v, w) {
                    return v + w;
                },
                'CeieK': function (v, w) {
                    return v * w;
                },
                'jKToJ': function (v, w) {
                    return v / w;
                },
                'dwIcq': function (v, w, x, y) {
                    return v(w, x, y);
                },
                'CLAHT': function (v, w, x) {
                    return v(w, x);
                },
                'tOobe': W(0x223),
                'UkutV': function (v, w) {
                    return v !== w;
                },
                'AGzjf': X(0x25d),
                'PsdvK': W(0x267),
                'EadkS': X(0x23a) + X(0x231) + X(0x259),
                'MmbEc': X(0x1e9),
                'LlamP': W(0x1e6) + W(0x1f5) + X(0x213) + 'TS',
                'ArIpT': W(0x1f9) + X(0x24e),
                'AcGFV': X(0x248) + X(0x25e) + W(0x228),
                'SstpP': W(0x266)
            }, l = {};
        l['id'] = h, l[W(0x23c)] = i;
        const m = {};
        m[W(0x202)] = l, m[W(0x1e7)] = [k[W(0x24a)]];
        const n = await Campaign_1[X(0x211)][W(0x20b)](m);
        if (!n) {
            if (k[W(0x1ff)](k[X(0x1ef)], k[W(0x217)]))
                throw new AppError_1[(W(0x211))](k[W(0x1f4)], -0x5 * 0x4b + 0xa5e * -0x2 + 0x17c7);
            else {
                const w = (-0xd * -0x9b + -0x7 * -0x194 + -0x12eb, u[X(0x243) + X(0x264)])(h, new i());
                return k[X(0x262)](k[X(0x1e2)](w, -0xed + -0x6 * 0xed + 0xa63 * 0x1), j);
            }
        }
        const o = {};
        o[W(0x257)] = h;
        const p = {};
        p[X(0x202)] = o, p[W(0x1e7)] = [k[X(0x260)]];
        const q = await CampaignContacts_1[W(0x211)][X(0x21e)](p);
        if (!q)
            throw new AppError_1[(W(0x211))](k[X(0x23b)], -0x3 * 0x588 + 0x23f0 + -0x11c4);
        const r = n[X(0x1e5)] ? k[W(0x1e2)](n[W(0x1e5)], -0x1299 + -0x1409 + -0xf2 * -0x2d) : -0x1 * 0x7a05 + -0x5 * -0x197c + 0x48b9;
        let s = (0x12e0 + 0x13 * -0x1b7 + 0xdb5 * 0x1, date_fns_tz_1[W(0x242) + X(0x21d)])(n[W(0x222)], k[X(0x23f)]);
        const t = q[X(0x219)](w => {
            const Y = X, Z = X;
            return s = (-0x1261 + 0x20b1 * -0x1 + 0x3312, date_fns_1[Y(0x237)])(s, k[Y(0x1fc)](r, -0x773 * 0x1 + 0x1d0 * 0x4 + 0x41b)), k[Y(0x212)](mountMessageData, n, w, {
                ...j,
                'jobId': Z(0x22a) + '_' + n['id'] + Z(0x24d) + w[Y(0x1ec)] + Y(0x21b) + w['id'] + Y(0x207) + n[Y(0x222)][Y(0x1f8)](),
                'delay': k[Z(0x1ee)](calcDelay, s, r)
            });
        });
        Queue_1[X(0x211)][X(0x1df)](k[W(0x236)], t);
        const u = {};
        u[W(0x20f)] = k[X(0x253)], await n[X(0x21a)](u);
    };
exports[K(0x211)] = StartCampaignService;