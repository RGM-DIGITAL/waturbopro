'use strict';
const L = b, M = b;
function a() {
    const a2 = [
        'value',
        'ticketId',
        'ence',
        'BEpiC',
        'QueueDefin',
        'VMlvS',
        'action',
        'findOne',
        '../errors/',
        ':ticket',
        'bot',
        'status',
        'wLogTicket',
        'tickets',
        'rvices/Lis',
        'show',
        'vice',
        'queuesIds',
        'rvices/Sho',
        '../models/',
        'wTicketSer',
        'EWLpf',
        'zEyOG',
        'ignedTicke',
        's/TicketSe',
        '\x20usuário',
        'PeYtW',
        'profile',
        'nnjPi',
        'essages',
        'tPGaV',
        'gShcp',
        'atribuido\x20',
        'eted',
        'sendType',
        'tenantId',
        'access',
        'CewFK',
        'Service',
        'findAll',
        '5554376QUQazI',
        'hMdbF',
        'upa',
        '984162DZctEl',
        '1554200tfWgeh',
        'note',
        'tTicketsSe',
        '5525595HpcrYS',
        '__esModule',
        'json',
        '../libs/so',
        'fromMe',
        'rvices/Del',
        'cket',
        'body',
        'showAll',
        'ticketData',
        'uBOYu',
        'enabled',
        'xBYgr',
        'key',
        'create',
        'name',
        'vSPkD',
        'Messages',
        'irIFf',
        'rvice',
        'params',
        'ssage',
        'isNotAssig',
        'est',
        'stSettings',
        '../utils/p',
        'scheduledM',
        'tedgS',
        'cFnoI',
        'KGZNo',
        'JAcla',
        'gZfQs',
        'ervice',
        'userIdRequ',
        'fannw',
        'nPZLZ',
        'farewellMe',
        'ticket',
        'open',
        'NotViewAss',
        '825540PwCICn',
        'Whatsapp',
        'date',
        'ateLogTick',
        'Message',
        'getIO',
        'nedUser',
        'tvunT',
        'protocol',
        'whatsappId',
        'Ticket',
        'ion',
        'ticket\x20del',
        '5OBMTia',
        'channelId',
        'wUAJJ',
        'VRVKN',
        's/SettingS',
        '3006576DcuBgt',
        's/MessageS',
        'rvices/Upd',
        'defineProp',
        'fWknm',
        'EDNNo',
        '742058RBuyrx',
        'etService',
        'hasMore',
        'Ticket\x20já\x20',
        'default',
        'includeNot',
        'store',
        'contactId',
        '7gepRKT',
        'message',
        'isFarewell',
        'find',
        'update',
        'query',
        '../service',
        'sequelize',
        'YCIgP',
        'erty',
        'NbMvl',
        'lwqyT',
        'wnLQv',
        'searchPara',
        'userId',
        ':notificat',
        'contact',
        'ervices/Cr',
        'ateTicketS',
        'index',
        'eteTicketS',
        'remove',
        'gCcWa',
        'iizLR',
        'emit',
        'where',
        '__importDe',
        'AppError',
        'setDataVal',
        'type',
        'pupa',
        'pending',
        'VpjSE',
        'isTransfer',
        'FPSVK',
        'zbvaF',
        'rvices/Cre',
        'UjAzA',
        'closed',
        'eSystemSer',
        'msg',
        'KIZhh',
        'channel',
        'SeheO',
        'withUnread',
        'showLogsTi',
        'ervices/Li',
        'TSqPK',
        'delete',
        'para\x20outro',
        'not',
        'UkyGX',
        'hkPcn',
        'eateMessag',
        'fault',
        'read',
        '1oSqHCk',
        'user',
        'pageNumber',
        'count',
        'scheduleDa'
    ];
    a = function () {
        return a2;
    };
    return a();
}
(function (c, d) {
    const J = b, K = b, e = c();
    while (!![]) {
        try {
            const f = parseInt(J(0x1c1)) / (0x169c + 0x2 * 0xd0f + 0x30b9 * -0x1) * (-parseInt(J(0x181)) / (0x853 + -0x1382 + -0xf * -0xbf)) + parseInt(J(0x17b)) / (-0x1ddd + 0x121a + 0xb * 0x112) + -parseInt(K(0x1f2)) / (0x287 * 0x5 + -0x1393 * 0x1 + -0xa * -0xb2) + parseInt(K(0x176)) / (0xa97 + 0x1 * 0xc77 + -0x1709 * 0x1) * (parseInt(J(0x1f1)) / (0x1819 + -0x3b3 * -0x5 + 0x1549 * -0x2)) + parseInt(J(0x189)) / (0x130c + 0x17b1 + -0x2ab6) * (parseInt(J(0x1ee)) / (-0x730 + -0x3 * -0xfb + 0x16d * 0x3)) + -parseInt(J(0x1f5)) / (-0xca5 * -0x2 + -0x26d2 + -0x97 * -0x17) + parseInt(J(0x169)) / (-0x2446 + 0x1a8 + -0x1154 * -0x2);
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x5c * -0x48d + -0x1b17 * 0x92 + -0x9 * -0x28022));
var __importDefault = this && this[L(0x1a3) + M(0x1bf)] || function (c) {
    const N = M;
    return c && c[N(0x1f6)] ? c : { 'default': c };
};
const n = {};
n[M(0x1c6)] = !![], Object[M(0x17e) + M(0x192)](exports, M(0x1f6), n), exports[M(0x1b6) + L(0x1fb)] = exports[L(0x19e)] = exports[M(0x18d)] = exports[L(0x1d5)] = exports[M(0x187)] = exports[L(0x19c)] = void (-0x1370 + -0x22a9 + 0xb * 0x4eb);
const sequelize_1 = require(M(0x190)), socket_1 = require(L(0x1f8) + M(0x1fb)), Message_1 = __importDefault(require(M(0x1d9) + L(0x16d))), CreateLogTicketService_1 = __importDefault(require(L(0x18f) + M(0x1de) + M(0x1ad) + M(0x16c) + L(0x182))), CreateTicketService_1 = __importDefault(require(L(0x18f) + L(0x1de) + M(0x1ad) + M(0x19b) + M(0x161))), DeleteTicketService_1 = __importDefault(require(L(0x18f) + L(0x1de) + M(0x1fa) + L(0x19d) + L(0x161))), ListTicketsService_1 = __importDefault(require(M(0x18f) + M(0x1de) + L(0x1d4) + M(0x1f4) + L(0x208))), ShowLogTicketService_1 = __importDefault(require(L(0x18f) + M(0x1de) + M(0x1d8) + M(0x1d2) + M(0x1ec))), ShowTicketService_1 = __importDefault(require(M(0x18f) + L(0x1de) + M(0x1d8) + L(0x1da) + L(0x1d6))), UpdateTicketService_1 = __importDefault(require(M(0x18f) + L(0x1de) + M(0x17d) + L(0x19b) + M(0x161))), Whatsapp_1 = __importDefault(require(M(0x1d9) + M(0x16a))), AppError_1 = __importDefault(require(M(0x1ce) + M(0x1a4))), CreateMessageSystemService_1 = __importDefault(require(L(0x18f) + L(0x17c) + L(0x19a) + L(0x1be) + M(0x1b0) + M(0x1d6))), pupa_1 = require(L(0x20e) + L(0x1f0)), Ticket_1 = __importDefault(require(M(0x1d9) + L(0x173))), ListSettingsService_1 = __importDefault(require(M(0x18f) + M(0x17a) + M(0x1b7) + M(0x20d) + M(0x1ec))), index = async (e, f) => {
        const O = L, P = M, {
                tenantId: g,
                profile: h
            } = e[O(0x1c2)], {
                searchParam: i,
                pageNumber: j,
                status: k,
                date: l,
                showAll: m,
                withUnreadMessages: o,
                queuesIds: p,
                isNotAssignedUser: q,
                includeNotQueueDefined: r
            } = e[P(0x18e)], s = e[O(0x1c2)]['id'], t = {};
        t[P(0x196) + 'm'] = i, t[P(0x1c3)] = j, t[P(0x1d1)] = k, t[O(0x16b)] = l, t[O(0x1fd)] = m, t[P(0x197)] = s, t[P(0x1b5) + O(0x206)] = o, t[O(0x1d7)] = p, t[O(0x20b) + O(0x16f)] = q, t[P(0x186) + O(0x1ca) + 'ed'] = r, t[O(0x1e9)] = g, t[O(0x1e1)] = h;
        const {
                tickets: u,
                count: v,
                hasMore: w
            } = await (-0xd3d + 0x2a8 + 0xa95, ListTicketsService_1[O(0x185)])(t), x = {};
        return x[O(0x1d3)] = u, x[P(0x1c4)] = v, x[O(0x183)] = w, f[O(0x1d1)](0x9f3 * -0x3 + 0x2214 + 0x373 * -0x1)[O(0x1f7)](x);
    };
exports[M(0x19c)] = index;
const store = async (i, j) => {
    const Q = L, R = M, k = {};
    k[Q(0x193)] = function (C, D) {
        return C !== D;
    }, k[R(0x1ff)] = R(0x1eb), k[R(0x1b2)] = function (C, D) {
        return C === D;
    }, k[R(0x179)] = Q(0x168) + Q(0x1dd) + 'ts', k[Q(0x1bd)] = Q(0x184) + Q(0x1e6) + Q(0x1ba) + Q(0x1df), k[Q(0x195)] = Q(0x167), k[R(0x1b8)] = Q(0x1a8), k[Q(0x1ab)] = function (C, D) {
        return C === D;
    }, k[Q(0x1ac)] = R(0x200), k[Q(0x1b4)] = function (C, D) {
        return C != D;
    }, k[Q(0x17f)] = function (C, D) {
        return C == D;
    }, k[Q(0x1a0)] = R(0x1bc), k[Q(0x1c9)] = Q(0x207), k[Q(0x19f)] = Q(0x1ae), k[R(0x1db)] = Q(0x15f), k[Q(0x1e2)] = R(0x203);
    const l = k, {tenantId: m} = i[R(0x1c2)], {
            contactId: o,
            status: p,
            userId: q,
            channel: r,
            channelId: s
        } = i[R(0x1fc)], t = {};
    t[R(0x1d1)] = l[Q(0x195)];
    const u = {};
    u[Q(0x1d1)] = l[R(0x1b8)];
    const v = {
        [sequelize_1['Op']['or']]: [
            t,
            u
        ]
    };
    v[Q(0x188)] = o, v[R(0x1e9)] = m, v[R(0x1b3)] = r;
    const w = {};
    w[R(0x1a2)] = v;
    const x = await Ticket_1[R(0x185)][R(0x1cd)](w), y = await (-0x22a * 0xa + 0x242b * -0x1 + 0x39cf, ListSettingsService_1[R(0x185)])(m), z = l[R(0x1ab)](y?.[Q(0x18c)](C => {
            const S = R, T = R;
            if (l[S(0x193)](l[T(0x1ff)], l[T(0x1ff)])) {
                const E = {};
                return E[T(0x185)] = j, w && E[T(0x1f6)] ? i : E;
            } else
                return l[T(0x1b2)](C[T(0x202)], l[S(0x179)]);
        })?.[Q(0x1c6)], l[R(0x1ac)]) ? 'S' : 'N';
    if (x && !!x[Q(0x197)] && l[R(0x1b4)](x[Q(0x197)], q) && l[Q(0x17f)](z, 'S'))
        throw new AppError_1[(Q(0x185))](l[Q(0x1bd)]);
    if (x) {
        if (l[R(0x193)](l[Q(0x1a0)], l[R(0x1c9)]))
            return j[Q(0x1d1)](0x161e + 0x1bff + -0x3155)[Q(0x1f7)](x);
        else
            throw new t[(Q(0x185))](l[Q(0x1bd)]);
    }
    const A = {};
    A[Q(0x188)] = o, A[R(0x1d1)] = p, A[Q(0x197)] = q, A[Q(0x1e9)] = m, A[R(0x1b3)] = r, A[R(0x177)] = s;
    const B = await (-0xc0a + 0x1d30 + -0x1126, CreateTicketService_1[R(0x185)])(A);
    if (!q) {
        if (l[R(0x193)](l[Q(0x19f)], l[Q(0x1db)])) {
            const D = (-0x3d2 + 0x2 * 0xb3f + 0x4 * -0x4ab, socket_1[Q(0x16e)])();
            D['to'](m + ':' + B[R(0x1d1)])[R(0x1a1)](m + Q(0x1cf), {
                'action': l[R(0x1e2)],
                'ticket': B
            });
        } else
            return u[R(0x1d1)](0xaf4 + -0x23 * -0x58 + -0xc4 * 0x1d)[R(0x1f7)](v);
    }
    return j[Q(0x1d1)](-0x1 * 0xee5 + 0x1073 * 0x1 + -0xc6)[Q(0x1f7)](B);
};
exports[M(0x187)] = store;
const show = async (i, j) => {
    const U = L, V = L, k = {};
    k[U(0x1dc)] = U(0x1a8), k[V(0x1e5)] = V(0x15b) + V(0x1e3), k[V(0x164)] = V(0x1ea);
    const l = k, {ticketId: m} = i[V(0x209)], {tenantId: o} = i[V(0x1c2)], p = i[U(0x1c2)]['id'], q = {};
    q['id'] = m, q[U(0x1e9)] = o;
    const r = await (0x1267 * -0x1 + 0x13 * 0x157 + -0x70e, ShowTicketService_1[V(0x185)])(q), s = { [sequelize_1['Op'][V(0x1bb)]]: null }, t = {};
    t[U(0x188)] = r[V(0x188)], t[V(0x1c5) + 'te'] = s, t[U(0x1d1)] = l[U(0x1dc)];
    const u = t, v = {};
    v[U(0x1a2)] = u;
    const w = await Message_1[V(0x185)][V(0x1ed)](v);
    r[V(0x1a5) + 'ue'](l[U(0x1e5)], w);
    const x = {};
    return x[V(0x197)] = p, x[U(0x1c7)] = m, x[U(0x1a6)] = l[V(0x164)], await (0x1765 + -0x1a86 + -0x10b * -0x3, CreateLogTicketService_1[V(0x185)])(x), j[V(0x1d1)](0x11b * 0x5 + -0x3c7 * 0x3 + 0x696)[U(0x1f7)](r);
};
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (0x37d + 0x321 + -0x543);
        let h = e[f];
        return h;
    }, b(c, d);
}
exports[L(0x1d5)] = show;
const update = async (l, m) => {
    const W = M, X = L, o = {};
    o[W(0x180)] = W(0x203), o[X(0x1cb)] = function (z, A) {
        return z === A;
    }, o[X(0x201)] = W(0x168) + W(0x1dd) + 'ts', o[X(0x205)] = function (z, A) {
        return z === A;
    }, o[W(0x170)] = W(0x1af), o[X(0x160)] = function (z, A) {
        return z !== A;
    }, o[X(0x163)] = W(0x1e4), o[W(0x1a9)] = X(0x15d), o[X(0x1e0)] = function (z, A) {
        return z !== A;
    }, o[X(0x194)] = X(0x15c), o[X(0x191)] = X(0x1d0), o[X(0x178)] = X(0x1a8);
    const p = o, {ticketId: q} = l[W(0x209)], {tenantId: r} = l[W(0x1c2)], s = l[W(0x1c2)]['id'], {isTransference: t} = l[X(0x1fc)], u = { ...l[W(0x1fc)] };
    u[W(0x1e9)] = r;
    const v = u, w = {};
    w[W(0x1fe)] = v, w[W(0x1c7)] = q, w[X(0x1aa) + X(0x1c8)] = t, w[X(0x162) + W(0x20c)] = s;
    const {ticket: x} = await (0xb * 0x3f + 0x922 + -0xbd7, UpdateTicketService_1[X(0x185)])(w);
    if (p[X(0x205)](v[W(0x1d1)], p[X(0x170)])) {
        if (p[W(0x160)](p[W(0x163)], p[W(0x1a9)])) {
            const y = {};
            y['id'] = x[W(0x172)], y[W(0x1e9)] = r;
            const z = {};
            z[X(0x1a2)] = y;
            const A = await Whatsapp_1[X(0x185)][W(0x1cd)](z);
            if (A?.[X(0x165) + X(0x20a)]) {
                if (p[X(0x1e0)](p[W(0x194)], p[X(0x194)])) {
                    const C = (0x1 * 0x2072 + -0x1dcb + -0x2a7, D[W(0x16e)])(), D = {};
                    D[W(0x1cc)] = p[X(0x180)], D[X(0x166)] = l, C['to'](i + ':' + j[W(0x1d1)])[X(0x1a1)](k + X(0x1cf), D);
                } else {
                    const C = {};
                    C[X(0x171)] = x[W(0x171)], C[X(0x204)] = x[W(0x199)][X(0x204)];
                    const D = (-0xbd2 + 0x13ab + 0x7d9 * -0x1, pupa_1[X(0x1a7)])(A[W(0x165) + X(0x20a)] || '', C), E = {};
                    E[W(0x1fc)] = D, E[X(0x1f9)] = !![], E[X(0x1c0)] = !![];
                    const F = {};
                    F[X(0x1b1)] = E, F[X(0x1e9)] = r, F[X(0x166)] = x, F[W(0x197)] = l[W(0x1c2)]['id'], F[X(0x1e8)] = p[X(0x191)], F[X(0x1d1)] = p[W(0x178)], F[W(0x1aa)] = ![], F[X(0x1f3)] = ![];
                    const G = F;
                    await (0x15 * 0x175 + -0x2565 + 0x122 * 0x6, CreateMessageSystemService_1[X(0x185)])(G);
                    const H = {};
                    H[X(0x18b) + X(0x16d)] = !![], await x[W(0x18d)](H);
                }
            }
        } else
            return p[X(0x1cb)](u[W(0x202)], p[W(0x201)]);
    }
    return m[X(0x1d1)](-0x698 + -0x2236 + 0x1 * 0x2996)[X(0x1f7)](x);
};
exports[L(0x18d)] = update;
const remove = async (f, g) => {
    const Y = M, Z = M, h = {};
    h[Y(0x15e)] = Z(0x1b9), h[Z(0x1ef)] = Y(0x175) + Z(0x1e7);
    const i = h, {ticketId: j} = f[Z(0x209)], {tenantId: k} = f[Z(0x1c2)], l = f[Z(0x1c2)]['id'], m = {};
    m['id'] = j, m[Y(0x1e9)] = k, m[Z(0x197)] = l;
    const o = await (-0x1879 + -0x1ba7 + 0x3420, DeleteTicketService_1[Z(0x185)])(m), p = (-0x1177 * -0x1 + 0x246a + -0x35e1, socket_1[Z(0x16e)])();
    p['to'](k + ':' + o[Y(0x1d1)])['to'](k + ':' + j)['to'](k + (Z(0x198) + Z(0x174)))[Z(0x1a1)](k + Y(0x1cf), {
        'action': i[Y(0x15e)],
        'ticketId': +j
    });
    const q = {};
    return q[Z(0x18a)] = i[Z(0x1ef)], g[Z(0x1d1)](0xb0f + 0x78c + 0x15f * -0xd)[Y(0x1f7)](q);
};
exports[L(0x19e)] = remove;
const showLogsTicket = async (d, e) => {
    const a0 = M, a1 = L, {ticketId: f} = d[a0(0x209)], g = {};
    g[a1(0x1c7)] = f;
    const h = await (-0x511 + -0x4fe + -0x203 * -0x5, ShowLogTicketService_1[a1(0x185)])(g);
    return e[a0(0x1d1)](0x4a9 * 0x1 + -0x17d6 + 0x13f5)[a1(0x1f7)](h);
};
exports[M(0x1b6) + M(0x1fb)] = showLogsTicket;