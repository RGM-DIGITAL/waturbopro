'use strict';
const z = b, A = b;
(function (c, d) {
    const x = b, y = b, e = c();
    while (!![]) {
        try {
            const f = -parseInt(x(0x133)) / (-0xd3d * -0x2 + -0x1f02 + 0x489) + -parseInt(x(0xea)) / (0x1e4 * -0xb + 0x1f05 + 0xa37 * -0x1) * (-parseInt(x(0xda)) / (0x260b + -0x6f2 * 0x5 + 0x2 * -0x1a7)) + -parseInt(y(0x14c)) / (-0xe36 * -0x2 + 0x118d + -0x2df5) + -parseInt(y(0xe0)) / (-0x1240 + 0xe4a * -0x1 + 0x208f) + parseInt(y(0x138)) / (0x4dd + -0x442 * 0x5 + 0x1073 * 0x1) * (-parseInt(y(0x127)) / (0x41c * -0x3 + 0x4 * 0x506 + -0x7 * 0x11b)) + parseInt(y(0x10b)) / (-0xbf9 * -0x2 + -0x3 * 0x9e9 + 0x5d1) + -parseInt(x(0xdf)) / (0x1847 + -0x139f + -0x49f) * (-parseInt(y(0x141)) / (0x9f * -0x3d + -0x1a15 + 0x4002));
            if (f === d)
                break;
            else
                e['push'](e['shift']());
        } catch (g) {
            e['push'](e['shift']());
        }
    }
}(a, -0x1f * 0x7367 + -0x192045 + 0x2e60 * 0x120));
var __importDefault = this && this[z(0x154) + z(0x106)] || function (c) {
    const B = A;
    return c && c[B(0xfe)] ? c : { 'default': c };
};
const q = {};
function a() {
    const Q = [
        'rvice',
        'contact',
        '6uremfe',
        '/DeleteMes',
        'XzLOu',
        'ERR_EDITIN',
        'dMessageSe',
        'rHiSL',
        'lrMWQ',
        'pending',
        'PIfjA',
        '4286530oYFaqO',
        'idFront',
        'aKoLh',
        'tHXLT',
        'wTicketSer',
        's/MessageS',
        'messages',
        'userId',
        'tWDAu',
        'sage',
        'ices/EditW',
        '330648egZRSZ',
        'AppError',
        'kRvls',
        'json',
        'msg',
        'ERR_DELETE',
        'ervices/Li',
        'FUQqo',
        '__importDe',
        'sendType',
        'hatsAppMes',
        '/SetTicket',
        'ticketIdOr',
        'sageSystem',
        '../errors/',
        'SetTicketM',
        'etbpP',
        'VcoPM',
        'forward',
        'params',
        'ead',
        'log',
        'hasMore',
        'erty',
        'ticket',
        'tKhlf',
        'fKdzB',
        'MessagesAs',
        'messagesOf',
        'message',
        'remove',
        'svAfr',
        'user',
        'bHucX',
        '6747FQPGAl',
        'EmTHh',
        's/WbotServ',
        'ogger',
        '_SYSTEM_MS',
        '9XWrgvt',
        '565915wAriDv',
        'G:\x20',
        '../service',
        'index',
        'rUUsm',
        'VAijX',
        'ticketId',
        'medias',
        'chat',
        'send',
        '252pXLvRc',
        'value',
        'UDOIV',
        'FELVD',
        'NOCMy',
        'store',
        'temService',
        'tenantId',
        'mPKju',
        'vice',
        'MessageSys',
        'QsxTw',
        'fromMe',
        'rvices/Sho',
        'FqgcI',
        'ozipa',
        'Message',
        'qoGNc',
        'body',
        'ensagens.',
        '__esModule',
        'defineProp',
        'default',
        'Read',
        'gYwJH',
        'TaUrT',
        'edit',
        'eateForwar',
        'fault',
        '../helpers',
        'Ocorreu\x20um',
        'error',
        'eSystemSer',
        '9288904QdpPAv',
        'logger',
        'hdMdS',
        'igin',
        'essagesAsR',
        'hVHPd',
        'isArray',
        'ZGdYM',
        '../utils/l',
        'rulLm',
        'ListCountM',
        'riqet',
        'ervices/Cr',
        'try\x20Create',
        's/TicketSe',
        'HEsTQ',
        'ontar\x20as\x20m',
        'rceKV',
        'forEach',
        'fLine',
        'oHkWC',
        'messageId',
        'count',
        'IGXqh',
        'stMessages',
        'pajSm',
        'ensagens',
        'eateMessag',
        '1622243FVEGWd',
        'DJGFN',
        'Service',
        'drkxI',
        'scheduleDa',
        'query',
        'status',
        '\x20erro\x20ao\x20c',
        'G_WAPP_MSG',
        'rptFa',
        'lMTWJ',
        'pageNumber',
        '588904pyviMG',
        '../models/',
        'files'
    ];
    a = function () {
        return Q;
    };
    return a();
}
q[A(0xeb)] = !![], Object[A(0xff) + A(0xcf)](exports, A(0xfe), q), exports[z(0x15e)] = exports[z(0xd6)] = exports[A(0x104)] = exports[A(0xef)] = exports[z(0x115) + z(0x125)] = exports[z(0xe3)] = void (-0x1389 + 0x1 * -0x2d7 + -0x598 * -0x4);
const AppError_1 = __importDefault(require(z(0x15a) + z(0x14d))), DeleteMessageSystem_1 = __importDefault(require(A(0x107) + A(0x139) + A(0x159))), SetTicketMessagesAsRead_1 = __importDefault(require(A(0x107) + z(0x157) + z(0xd3) + A(0x101))), Message_1 = __importDefault(require(A(0x134) + z(0xfa))), CreateForwardMessageService_1 = __importDefault(require(z(0xe2) + A(0x146) + A(0x117) + z(0x105) + z(0x13c) + z(0x136))), CreateMessageSystemService_1 = __importDefault(require(z(0xe2) + A(0x146) + A(0x117) + z(0x126) + z(0x10a) + z(0xf3))), ListMessagesService_1 = __importDefault(require(z(0xe2) + z(0x146) + A(0x152) + z(0x123) + A(0x129))), ShowTicketService_1 = __importDefault(require(z(0xe2) + z(0x119) + A(0xf7) + z(0x145) + A(0xf3))), logger_1 = require(z(0x113) + z(0xdd)), EditWhatsAppMessage_1 = __importDefault(require(z(0xe2) + z(0xdc) + A(0x14b) + A(0x156) + A(0x14a))), index = async (e, f) => {
        const C = z, D = z, {ticketId: g} = e[C(0xcb)], {pageNumber: h} = e[C(0x12c)], {tenantId: i} = e[D(0xd8)], j = {};
        j[D(0x132)] = h, j[D(0xe6)] = g, j[C(0xf1)] = i;
        const {
            count: k,
            messages: l,
            messagesOffLine: m,
            ticket: n,
            hasMore: o
        } = await (0x5c9 * -0x1 + 0x1 * -0x1d4f + 0x8 * 0x463, ListMessagesService_1[D(0x100)])(j);
        (0x21d8 + -0x2 * -0x66e + -0x1 * 0x2eb4, SetTicketMessagesAsRead_1[C(0x100)])(n);
        const p = {};
        return p[D(0x121)] = k, p[C(0x147)] = l, p[D(0xd4) + C(0x11e)] = m, p[D(0xd0)] = n, p[D(0xce)] = o, f[D(0x14f)](p);
    };
function b(c, d) {
    const e = a();
    return b = function (f, g) {
        f = f - (-0x1bda + -0x1 * 0xa58 + 0x26fd);
        let h = e[f];
        return h;
    }, b(c, d);
}
exports[A(0xe3)] = index;
const ListCountMensagens = async (f, g) => {
    const E = A, F = A, h = {};
    h[E(0x15d)] = F(0x151) + F(0xde) + 'G', h[E(0xed)] = function (j, k) {
        return j !== k;
    }, h[E(0xe4)] = F(0x11c), h[E(0xd1)] = E(0x130), h[E(0x12a)] = F(0x108) + F(0x12e) + F(0x11b) + E(0xfd);
    const i = h;
    try {
        if (i[E(0xed)](i[E(0xe4)], i[E(0xd1)])) {
            const j = await Message_1[E(0x100)][F(0x121)](), k = {};
            return k[E(0x121)] = j, g[E(0x14f)](k);
        } else {
            f[F(0x10c)][E(0x109)](E(0x151) + E(0xde) + E(0xe1) + g);
            throw new h[(F(0x100))](i[F(0x15d)]);
        }
    } catch (m) {
        const n = {};
        return n[F(0x109)] = i[E(0x12a)], g[E(0x12d)](-0x1e8b + -0x18be + 0x393d * 0x1)[E(0x14f)](n);
    }
};
exports[z(0x115) + A(0x125)] = ListCountMensagens;
const store = async (f, g) => {
    const G = A, H = A, h = {};
    h[G(0x140)] = G(0x108) + G(0x12e) + G(0x11b) + H(0xfd), h[G(0xf9)] = H(0xe8), h[H(0xee)] = G(0x13f), h[G(0x144)] = function (r, s) {
        return r instanceof s;
    }, h[G(0x13d)] = function (r, s) {
        return r === s;
    }, h[G(0x102)] = G(0x13b) + H(0x12f), h[G(0x153)] = function (r, s) {
        return r !== s;
    }, h[H(0x14e)] = H(0x149), h[H(0xd9)] = H(0x15b) + G(0x10f) + G(0xcc), h[H(0xe5)] = function (r, s) {
        return r !== s;
    }, h[H(0xf2)] = H(0x116), h[G(0x131)] = G(0x110), h[H(0x112)] = H(0xec), h[H(0xf8)] = G(0x118) + G(0xf4) + G(0xf0);
    const i = h, {ticketId: j} = f[H(0xcb)], {
            tenantId: k,
            id: l
        } = f[G(0xd8)], m = f[G(0xfc)], n = f[G(0x135)], o = {};
    o['id'] = j, o[H(0xf1)] = k;
    const p = await (0x248a + 0x714 + -0x2 * 0x15cf, ShowTicketService_1[H(0x100)])(o);
    try {
        await (0x1a9f + -0x2f4 + -0x17ab, SetTicketMessagesAsRead_1[H(0x100)])(p);
    } catch (r) {
        if (i[H(0x153)](i[G(0x14e)], i[G(0x14e)])) {
            const t = {};
            return t[H(0x109)] = i[G(0x140)], o[H(0x12d)](0x1827 + -0x1433 * 0x1 + 0x80 * -0x4)[H(0x14f)](t);
        } else
            console[G(0xcd)](i[G(0xd9)], r);
    }
    try {
        if (i[G(0xe5)](i[G(0xf2)], i[G(0xf2)])) {
            const u = {};
            return u[G(0x109)] = f[H(0xd5)], u[G(0x12d)](0x1c5f + 0x7cb + -0x229a)[H(0x14f)](u);
        } else {
            if (n) {
                if (i[G(0xe5)](i[H(0x131)], i[G(0x112)]))
                    n[G(0x11d)](async (u, v) => {
                        const I = G, J = G, w = {
                                'fromMe': m[I(0xf6)],
                                'body': Array[I(0x111)](m[I(0xfc)]) ? m[I(0xfc)][v] : m[I(0xfc)],
                                'idFront': Array[J(0x111)](m[I(0x142)]) ? m[J(0x142)][v] : m[J(0x142)],
                                'read': ![]
                            };
                        await (-0xe37 + 0x15e1 + -0x7aa * 0x1, CreateMessageSystemService_1[I(0x100)])({
                            'msg': w,
                            'tenantId': k,
                            'medias': [u],
                            'ticket': p,
                            'userId': l,
                            'scheduleDate': m[I(0x12b) + 'te'] ? new Date(Array[J(0x111)](m[I(0x12b) + 'te']) ? m[J(0x12b) + 'te'][v] : m[J(0x12b) + 'te']) : undefined,
                            'sendType': m[I(0x155)] || i[I(0xf9)],
                            'status': i[J(0xee)],
                            'idFront': Array[J(0x111)](m[J(0x142)]) ? m[J(0x142)][v] : m[I(0x142)]
                        });
                    });
                else {
                    if (i[G(0x144)](i, j[G(0x100)]) && i[H(0x13d)](k[H(0xd5)], i[H(0x102)])) {
                        const v = {};
                        return v[G(0x109)] = p[H(0xd5)], o[H(0x12d)](-0x1843 * 0x1 + 0x9 * 0x35b + 0x70 * -0xa)[H(0x14f)](v);
                    }
                    throw n;
                }
            } else {
                const v = {};
                v[G(0x150)] = m, v[H(0xf1)] = k, v[H(0xe7)] = n, v[G(0xd0)] = p, v[H(0x148)] = l, v[G(0x12b) + 'te'] = m[G(0x12b) + 'te'], v[H(0x155)] = m[H(0x155)] || i[G(0xf9)], v[G(0x12d)] = i[G(0xee)], v[G(0x142)] = m[G(0x142)], await (-0x120b * -0x1 + -0x17e + -0x108d, CreateMessageSystemService_1[G(0x100)])(v);
            }
        }
    } catch (w) {
        console[H(0xcd)](i[H(0xf8)], w);
    }
    return g[H(0xe9)]();
};
exports[z(0xef)] = store;
const edit = async (f, g) => {
    const K = z, L = z, h = {};
    h[K(0x10d)] = K(0x118) + K(0xf4) + L(0xf0), h[K(0xd2)] = function (n, o) {
        return n === o;
    }, h[K(0x11f)] = K(0xfb), h[L(0x13a)] = function (n, o) {
        return n instanceof o;
    }, h[K(0x114)] = function (n, o) {
        return n === o;
    }, h[L(0x122)] = L(0x13b) + K(0x12f), h[K(0x128)] = function (n, o) {
        return n === o;
    }, h[K(0x13e)] = L(0xf5), h[K(0xdb)] = L(0x143);
    const i = h, {messageId: j} = f[K(0xcb)], {tenantId: k} = f[L(0xd8)], l = +k, {body: m} = f[L(0xfc)];
    try {
        if (i[K(0xd2)](i[L(0x11f)], i[L(0x11f)])) {
            const n = {};
            n[K(0x120)] = j, n[K(0xf1)] = l, n[L(0xfc)] = m;
            const {
                ticketId: o,
                message: p
            } = await (0x1 * -0x731 + -0x2040 + -0x17 * -0x1b7, EditWhatsAppMessage_1[K(0x100)])(n);
        } else {
            const s = {};
            return s[K(0x100)] = j, g && h[K(0xfe)] ? i : s;
        }
    } catch (s) {
        if (i[L(0x13a)](s, AppError_1[L(0x100)]) && i[K(0x114)](s[K(0xd5)], i[K(0x122)])) {
            if (i[L(0x128)](i[K(0x13e)], i[L(0xdb)]))
                e[K(0xcd)](i[K(0x10d)], f);
            else {
                const u = {};
                return u[K(0x109)] = s[K(0xd5)], g[K(0x12d)](0x5d4 + -0x393 * 0x7 + 0x14c1)[K(0x14f)](u);
            }
        }
        throw s;
    }
    return g[K(0xe9)]();
};
exports[z(0x104)] = edit;
const remove = async (d, e) => {
    const M = A, N = z, f = {};
    f[M(0xd7)] = M(0x15b) + M(0x10f) + N(0xcc), f[N(0x15c)] = function (j, k) {
        return j !== k;
    }, f[M(0x11a)] = N(0x103), f[N(0x124)] = N(0x151) + M(0xde) + 'G';
    const g = f, {messageId: h} = d[M(0xcb)], {tenantId: i} = d[N(0xd8)];
    try {
        g[M(0x15c)](g[N(0x11a)], g[M(0x11a)]) ? e[N(0xcd)](g[N(0xd7)], f) : await (0x166 * -0x6 + -0x23f5 * -0x1 + -0x1 * 0x1b91, DeleteMessageSystem_1[M(0x100)])(d[M(0xfc)]['id'], h, i);
    } catch (k) {
        logger_1[N(0x10c)][M(0x109)](N(0x151) + M(0xde) + M(0xe1) + k);
        throw new AppError_1[(M(0x100))](g[M(0x124)]);
    }
    return e[N(0xe9)]();
};
exports[A(0xd6)] = remove;
const forward = async (d, e) => {
    const O = z, P = A, f = d[O(0xfc)], {user: g} = d;
    for (const h of f[P(0x147)]) {
        const i = {};
        i[P(0x148)] = g['id'], i[O(0xf1)] = g[P(0xf1)], i[P(0xd5)] = h, i[O(0x137)] = f[O(0x137)], i[P(0x158) + P(0x10e)] = h[O(0xe6)], await (-0x1b66 + -0x2493 * 0x1 + 0x135 * 0x35, CreateForwardMessageService_1[P(0x100)])(i);
    }
    return e[O(0xe9)]();
};
exports[z(0x15e)] = forward;